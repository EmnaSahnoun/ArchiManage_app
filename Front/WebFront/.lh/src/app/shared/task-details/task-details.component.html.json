{
    "sourceFile": "src/app/shared/task-details/task-details.component.html",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 150,
            "patches": [
                {
                    "date": 1744726774081,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1744730360136,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,161 +1,1 @@\n-<div class=\"modal-header\">\r\n-    <h4 class=\"modal-title\">{{ task?.name }}</h4>\r\n-    <button type=\"button\" class=\"close\" (click)=\"activeModal.dismiss()\">\r\n-      <span>&times;</span>\r\n-    </button>\r\n-  </div>\r\n-  \r\n-  <div class=\"modal-body\">\r\n-    <div class=\"row\">\r\n-      <div class=\"col-md-8\">\r\n-        <!-- Section Description -->\r\n-        <div class=\"card mb-3\">\r\n-          <div class=\"card-header\">\r\n-            <h5>Description</h5>\r\n-          </div>\r\n-          <div class=\"card-body\">\r\n-            <p>{{ task?.description || 'Aucune description' }}</p>\r\n-          </div>\r\n-        </div>\r\n-  \r\n-        <!-- Section Sous-tâches -->\r\n-        <div class=\"card mb-3\" *ngIf=\"task?.subTasks?.length\">\r\n-          <div class=\"card-header\">\r\n-            <h5>Sous-tâches</h5>\r\n-          </div>\r\n-          <div class=\"card-body\">\r\n-            <ul class=\"list-group\">\r\n-              <li class=\"list-group-item\" *ngFor=\"let subTask of task.subTasks\">\r\n-                <div class=\"d-flex justify-content-between align-items-center\">\r\n-                  <span>{{ subTask.name }}</span>\r\n-                  <span class=\"badge\" [ngClass]=\"{\r\n-                    'badge-primary': subTask.status === 'PENDING',\r\n-                    'badge-warning': subTask.status === 'IN_PROGRESS',\r\n-                    'badge-success': subTask.status === 'COMPLETED'\r\n-                  }\">\r\n-                    {{ subTask.status }}\r\n-                  </span>\r\n-                </div>\r\n-              </li>\r\n-            </ul>\r\n-          </div>\r\n-        </div>\r\n-  \r\n-        <!-- Section Commentaires -->\r\n-        <div class=\"card mb-3\">\r\n-          <div class=\"card-header\">\r\n-            <h5>Commentaires</h5>\r\n-          </div>\r\n-          <div class=\"card-body\">\r\n-            <div class=\"comment-list\">\r\n-              <div class=\"comment-item mb-3\" *ngFor=\"let comment of comments\">\r\n-                <div class=\"d-flex\">\r\n-                  <img [src]=\"comment.user.avatar\" class=\"rounded-circle mr-3\" width=\"40\" height=\"40\">\r\n-                  <div>\r\n-                    <strong>{{ comment.user.name }}</strong>\r\n-                    <small class=\"text-muted ml-2\">{{ comment.date | date:'short' }}</small>\r\n-                    <p>{{ comment.text }}</p>\r\n-                  </div>\r\n-                </div>\r\n-              </div>\r\n-            </div>\r\n-            <div class=\"comment-form\">\r\n-              <textarea class=\"form-control mb-2\" [(ngModel)]=\"newComment\" placeholder=\"Ajouter un commentaire...\"></textarea>\r\n-              <button class=\"btn btn-primary\" (click)=\"addComment()\">Envoyer</button>\r\n-            </div>\r\n-          </div>\r\n-        </div>\r\n-      </div>\r\n-  \r\n-      <div class=\"col-md-4\">\r\n-        <!-- Section Métadonnées -->\r\n-        <div class=\"card mb-3\">\r\n-          <div class=\"card-header\">\r\n-            <h5>Détails</h5>\r\n-          </div>\r\n-          <div class=\"card-body\">\r\n-            <ul class=\"list-group list-group-flush\">\r\n-              <li class=\"list-group-item\">\r\n-                <strong>Phase:</strong> {{ phaseName }}\r\n-              </li>\r\n-              <li class=\"list-group-item\">\r\n-                <strong>Statut:</strong>\r\n-                <select class=\"form-control mt-1\" [(ngModel)]=\"task.status\" (change)=\"updateStatus()\">\r\n-                  <option value=\"PENDING\">À faire</option>\r\n-                  <option value=\"IN_PROGRESS\">En cours</option>\r\n-                  <option value=\"COMPLETED\">Terminé</option>\r\n-                </select>\r\n-              </li>\r\n-              <li class=\"list-group-item\">\r\n-                <strong>Priorité:</strong>\r\n-                <select class=\"form-control mt-1\" [(ngModel)]=\"task.priority\" (change)=\"updatePriority()\">\r\n-                  <option value=\"HIGH\">Haute</option>\r\n-                  <option value=\"MEDIUM\">Moyenne</option>\r\n-                  <option value=\"LOW\">Basse</option>\r\n-                </select>\r\n-              </li>\r\n-              <li class=\"list-group-item\">\r\n-                <strong>Date de début:</strong> {{ task.startDate | date:'mediumDate' }}\r\n-              </li>\r\n-              <li class=\"list-group-item\">\r\n-                <strong>Date de fin:</strong> {{ task.endDate | date:'mediumDate' }}\r\n-              </li>\r\n-            </ul>\r\n-          </div>\r\n-        </div>\r\n-  \r\n-        <!-- Section Documents -->\r\n-        <div class=\"card mb-3\">\r\n-          <div class=\"card-header\">\r\n-            <h5>Documents</h5>\r\n-          </div>\r\n-          <div class=\"card-body\">\r\n-            <div class=\"media-gallery\">\r\n-              <div class=\"media-item\" *ngFor=\"let media of mediaFiles\">\r\n-                <img *ngIf=\"media.type === 'image'\" [src]=\"media.url\" class=\"img-thumbnail\">\r\n-                <video *ngIf=\"media.type === 'video'\" controls class=\"img-thumbnail\">\r\n-                  <source [src]=\"media.url\" type=\"video/mp4\">\r\n-                </video>\r\n-                <div class=\"media-actions\">\r\n-                  <button class=\"btn btn-sm btn-danger\" (click)=\"deleteMedia(media)\">\r\n-                    <i class=\"bi bi-trash\"></i>\r\n-                  </button>\r\n-                </div>\r\n-              </div>\r\n-            </div>\r\n-            <div class=\"upload-section mt-3\">\r\n-              <input type=\"file\" #fileInput (change)=\"handleFileInput($event)\" multiple style=\"display: none\">\r\n-              <button class=\"btn btn-secondary btn-block\" (click)=\"fileInput.click()\">\r\n-                <i class=\"bi bi-upload\"></i> Ajouter des fichiers\r\n-              </button>\r\n-            </div>\r\n-          </div>\r\n-        </div>\r\n-  \r\n-        <!-- Section Historique -->\r\n-        <div class=\"card\">\r\n-          <div class=\"card-header\">\r\n-            <h5>Historique</h5>\r\n-          </div>\r\n-          <div class=\"card-body\">\r\n-            <ul class=\"timeline\">\r\n-              <li *ngFor=\"let history of taskHistory\">\r\n-                <div class=\"timeline-item\">\r\n-                  <span class=\"time\">{{ history.date | date:'short' }}</span>\r\n-                  <h6 class=\"timeline-header\">{{ history.user.name }}</h6>\r\n-                  <div class=\"timeline-body\">\r\n-                    {{ history.action }}\r\n-                  </div>\r\n-                </div>\r\n-              </li>\r\n-            </ul>\r\n-          </div>\r\n-        </div>\r\n-      </div>\r\n-    </div>\r\n-  </div>\r\n-  \r\n-  <div class=\"modal-footer\">\r\n-    <button type=\"button\" class=\"btn btn-secondary\" (click)=\"activeModal.dismiss()\">Fermer</button>\r\n-    <button type=\"button\" class=\"btn btn-primary\" (click)=\"saveChanges()\">Enregistrer</button>\r\n-  </div>\n\\ No newline at end of file\n+<p>task-details works!</p>\r\n"
                },
                {
                    "date": 1746377004255,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,1 @@\n-<p>task-details works!</p>\r\n+task-details\n\\ No newline at end of file\n"
                },
                {
                    "date": 1746377014156,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,118 @@\n-task-details\n\\ No newline at end of file\n+<div class=\"task-details-container\">\r\n+    <div class=\"task-header\">\r\n+      <h2>{{ task?.name }}</h2>\r\n+      <button mat-icon-button class=\"close-btn\" (click)=\"closeModal()\">\r\n+        <i class=\"bi bi-x-lg\"></i>\r\n+      </button>\r\n+    </div>\r\n+  \r\n+    <div class=\"task-content\">\r\n+      <!-- Left Column -->\r\n+      <div class=\"task-left-column\">\r\n+        <div class=\"task-section\">\r\n+          <h3>Priority</h3>\r\n+          <div class=\"priority-badge\" [class.high]=\"task?.priority === 'HIGH'\" \r\n+                                  [class.medium]=\"task?.priority === 'MEDIUM'\" \r\n+                                  [class.low]=\"task?.priority === 'LOW'\">\r\n+            {{ task?.priority }}\r\n+          </div>\r\n+          \r\n+          <div class=\"date-range\">\r\n+            <div class=\"date-item\">\r\n+              <label>Start Date</label>\r\n+              <p>{{ task?.startDate | date:'mediumDate' }}</p>\r\n+            </div>\r\n+            <div class=\"date-item\">\r\n+              <label>End Date</label>\r\n+              <p>{{ task?.endDate | date:'mediumDate' }}</p>\r\n+            </div>\r\n+          </div>\r\n+        </div>\r\n+  \r\n+        <div class=\"task-section\">\r\n+          <h3>Status</h3>\r\n+          <div class=\"progress-container\">\r\n+            <mat-progress-bar mode=\"determinate\" [value]=\"task?.progress || 0\"></mat-progress-bar>\r\n+            <span class=\"progress-value\">{{ task?.progress || 0 }}%</span>\r\n+          </div>\r\n+        </div>\r\n+  \r\n+        <div class=\"task-section\">\r\n+          <h3>Assignees</h3>\r\n+          <div class=\"subtasks-list\">\r\n+            <div class=\"subtask-item\" *ngFor=\"let subtask of task?.subtasks\">\r\n+              <div class=\"subtask-info\">\r\n+                <i class=\"bi bi-check-circle\"></i>\r\n+                <span>{{ subtask.name }}</span>\r\n+              </div>\r\n+              <div class=\"assignee\">\r\n+                <span class=\"assignee-name\">{{ subtask.assignee }}</span>\r\n+              </div>\r\n+            </div>\r\n+          </div>\r\n+        </div>\r\n+  \r\n+        <div class=\"task-section\">\r\n+          <h3>Attachments</h3>\r\n+          <div class=\"attachments-list\">\r\n+            <div class=\"attachment-item\" *ngFor=\"let attachment of task?.attachments\">\r\n+              <i class=\"bi bi-paperclip\"></i>\r\n+              <div class=\"attachment-info\">\r\n+                <strong>{{ attachment.name }}</strong>\r\n+                <small>{{ attachment.description }}</small>\r\n+              </div>\r\n+              <button mat-icon-button>\r\n+                <i class=\"bi bi-download\"></i>\r\n+              </button>\r\n+            </div>\r\n+          </div>\r\n+        </div>\r\n+      </div>\r\n+  \r\n+      <!-- Right Column -->\r\n+      <div class=\"task-right-column\">\r\n+        <div class=\"task-section\">\r\n+          <h3>Task Overview</h3>\r\n+          <p class=\"task-description\">{{ task?.description }}</p>\r\n+        </div>\r\n+  \r\n+        <div class=\"task-section\">\r\n+          <h3>Requirements</h3>\r\n+          <ul class=\"requirements-list\">\r\n+            <li *ngFor=\"let requirement of task?.requirements\">\r\n+              <i class=\"bi bi-check-circle-fill\"></i>\r\n+              <span>{{ requirement }}</span>\r\n+            </li>\r\n+          </ul>\r\n+        </div>\r\n+  \r\n+        <div class=\"task-section\">\r\n+          <h3>Guidelines</h3>\r\n+          <ul class=\"guidelines-list\">\r\n+            <li *ngFor=\"let guideline of task?.guidelines\">\r\n+              <i class=\"bi bi-arrow-right-circle\"></i>\r\n+              <span>{{ guideline }}</span>\r\n+            </li>\r\n+          </ul>\r\n+        </div>\r\n+  \r\n+        <div class=\"task-section\">\r\n+          <h3>Activity</h3>\r\n+          <div class=\"activity-timeline\">\r\n+            <div class=\"activity-item\" *ngFor=\"let activity of task?.activities\">\r\n+              <div class=\"activity-header\">\r\n+                <span class=\"user\">{{ activity.user }}</span>\r\n+                <span class=\"timestamp\">{{ activity.timestamp | date:'short' }}</span>\r\n+              </div>\r\n+              <p class=\"activity-content\">{{ activity.content }}</p>\r\n+              <button class=\"reply-btn\" *ngIf=\"activity.hasReply\">Reply</button>\r\n+            </div>\r\n+          </div>\r\n+          <div class=\"new-comment\">\r\n+            <textarea placeholder=\"Add a comment...\"></textarea>\r\n+            <button mat-raised-button color=\"primary\">Post</button>\r\n+          </div>\r\n+        </div>\r\n+      </div>\r\n+    </div>\r\n+  </div>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1746378884311,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -86,9 +86,9 @@\n           </ul>\r\n         </div>\r\n   \r\n         <div class=\"task-section\">\r\n-          <h3>Guidelines</h3>\r\n+          <h3>Historique</h3>\r\n           <ul class=\"guidelines-list\">\r\n             <li *ngFor=\"let guideline of task?.guidelines\">\r\n               <i class=\"bi bi-arrow-right-circle\"></i>\r\n               <span>{{ guideline }}</span>\r\n"
                },
                {
                    "date": 1746378903279,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -85,17 +85,9 @@\n             </li>\r\n           </ul>\r\n         </div>\r\n   \r\n-        <div class=\"task-section\">\r\n-          <h3>Historique</h3>\r\n-          <ul class=\"guidelines-list\">\r\n-            <li *ngFor=\"let guideline of task?.guidelines\">\r\n-              <i class=\"bi bi-arrow-right-circle\"></i>\r\n-              <span>{{ guideline }}</span>\r\n-            </li>\r\n-          </ul>\r\n-        </div>\r\n+        \r\n   \r\n         <div class=\"task-section\">\r\n           <h3>Activity</h3>\r\n           <div class=\"activity-timeline\">\r\n"
                },
                {
                    "date": 1746468745265,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,9 +31,9 @@\n   \r\n         <div class=\"task-section\">\r\n           <h3>Status</h3>\r\n           <div class=\"progress-container\">\r\n-            <mat-progress-bar mode=\"determinate\" [value]=\"task?.progress || 0\"></mat-progress-bar>\r\n+            <mat-progress-bar mode=\"determinate\" [value]=\"task?.status || 0\"></mat-progress-bar>\r\n             <span class=\"progress-value\">{{ task?.progress || 0 }}%</span>\r\n           </div>\r\n         </div>\r\n   \r\n"
                },
                {
                    "date": 1746468752718,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,9 +32,9 @@\n         <div class=\"task-section\">\r\n           <h3>Status</h3>\r\n           <div class=\"progress-container\">\r\n             <mat-progress-bar mode=\"determinate\" [value]=\"task?.status || 0\"></mat-progress-bar>\r\n-            <span class=\"progress-value\">{{ task?.progress || 0 }}%</span>\r\n+            <span class=\"progress-value\">{{ task?.status || 0 }}%</span>\r\n           </div>\r\n         </div>\r\n   \r\n         <div class=\"task-section\">\r\n"
                },
                {
                    "date": 1746468770243,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,9 +32,9 @@\n         <div class=\"task-section\">\r\n           <h3>Status</h3>\r\n           <div class=\"progress-container\">\r\n             <mat-progress-bar mode=\"determinate\" [value]=\"task?.status || 0\"></mat-progress-bar>\r\n-            <span class=\"progress-value\">{{ task?.status || 0 }}%</span>\r\n+            <span class=\"progress-value\">{{ task?.status || 0 }}</span>\r\n           </div>\r\n         </div>\r\n   \r\n         <div class=\"task-section\">\r\n"
                },
                {
                    "date": 1746468776497,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,10 +31,10 @@\n   \r\n         <div class=\"task-section\">\r\n           <h3>Status</h3>\r\n           <div class=\"progress-container\">\r\n-            <mat-progress-bar mode=\"determinate\" [value]=\"task?.status || 0\"></mat-progress-bar>\r\n-            <span class=\"progress-value\">{{ task?.status || 0 }}</span>\r\n+            <mat-progress-bar mode=\"determinate\" [value]=\"task?.status \"></mat-progress-bar>\r\n+            <span class=\"progress-value\">{{ task?.status }}</span>\r\n           </div>\r\n         </div>\r\n   \r\n         <div class=\"task-section\">\r\n"
                },
                {
                    "date": 1746468839509,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -37,9 +37,9 @@\n           </div>\r\n         </div>\r\n   \r\n         <div class=\"task-section\">\r\n-          <h3>Assignees</h3>\r\n+          <h3> </h3>\r\n           <div class=\"subtasks-list\">\r\n             <div class=\"subtask-item\" *ngFor=\"let subtask of task?.subtasks\">\r\n               <div class=\"subtask-info\">\r\n                 <i class=\"bi bi-check-circle\"></i>\r\n"
                },
                {
                    "date": 1746468981956,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -37,9 +37,9 @@\n           </div>\r\n         </div>\r\n   \r\n         <div class=\"task-section\">\r\n-          <h3> </h3>\r\n+          <h3>Assignees</h3>\r\n           <div class=\"subtasks-list\">\r\n             <div class=\"subtask-item\" *ngFor=\"let subtask of task?.subtasks\">\r\n               <div class=\"subtask-info\">\r\n                 <i class=\"bi bi-check-circle\"></i>\r\n"
                },
                {
                    "date": 1746469287359,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,9 +39,9 @@\n   \r\n         <div class=\"task-section\">\r\n           <h3>Assignees</h3>\r\n           <div class=\"subtasks-list\">\r\n-            <div class=\"subtask-item\" *ngFor=\"let subtask of task?.subtasks\">\r\n+            <div class=\"subtask-item\" *ngFor=\"let subtask of subtasks\">\r\n               <div class=\"subtask-info\">\r\n                 <i class=\"bi bi-check-circle\"></i>\r\n                 <span>{{ subtask.name }}</span>\r\n               </div>\r\n"
                },
                {
                    "date": 1746469345114,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -75,17 +75,9 @@\n           <h3>Task Overview</h3>\r\n           <p class=\"task-description\">{{ task?.description }}</p>\r\n         </div>\r\n   \r\n-        <div class=\"task-section\">\r\n-          <h3>Requirements</h3>\r\n-          <ul class=\"requirements-list\">\r\n-            <li *ngFor=\"let requirement of task?.requirements\">\r\n-              <i class=\"bi bi-check-circle-fill\"></i>\r\n-              <span>{{ requirement }}</span>\r\n-            </li>\r\n-          </ul>\r\n-        </div>\r\n+       \r\n   \r\n         \r\n   \r\n         <div class=\"task-section\">\r\n"
                },
                {
                    "date": 1746469494972,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,14 +8,9 @@\n   \r\n     <div class=\"task-content\">\r\n       <!-- Left Column -->\r\n       <div class=\"task-left-column\">\r\n-        <div class=\"task-section\">\r\n-          <h3>Priority</h3>\r\n-          <div class=\"priority-badge\" [class.high]=\"task?.priority === 'HIGH'\" \r\n-                                  [class.medium]=\"task?.priority === 'MEDIUM'\" \r\n-                                  [class.low]=\"task?.priority === 'LOW'\">\r\n-            {{ task?.priority }}\r\n+        \r\n           </div>\r\n           \r\n           <div class=\"date-range\">\r\n             <div class=\"date-item\">\r\n"
                },
                {
                    "date": 1746469508475,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,16 @@\n   \r\n     <div class=\"task-content\">\r\n       <!-- Left Column -->\r\n       <div class=\"task-left-column\">\r\n-        \r\n+        <div class=\"priority-status-row\">\r\n+          <div class=\"priority-section\">\r\n+            <h3>Priority</h3>\r\n+            <div class=\"priority-badge\" [class.high]=\"task?.priority === 'HIGH'\"\r\n+                                    [class.medium]=\"task?.priority === 'MEDIUM'\"\r\n+                                    [class.low]=\"task?.priority === 'LOW'\">\r\n+              {{ task?.priority }}\r\n+            </div>\r\n           </div>\r\n           \r\n           <div class=\"date-range\">\r\n             <div class=\"date-item\">\r\n"
                },
                {
                    "date": 1746469522672,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -18,10 +18,12 @@\n               {{ task?.priority }}\r\n             </div>\r\n           </div>\r\n           \r\n-          <div class=\"date-range\">\r\n-            <div class=\"date-item\">\r\n+          <div class=\"status-section\">\r\n+            <h3>Status</h3>\r\n+            <div class=\"progress-container\">\r\n+            \r\n               <label>Start Date</label>\r\n               <p>{{ task?.startDate | date:'mediumDate' }}</p>\r\n             </div>\r\n             <div class=\"date-item\">\r\n"
                },
                {
                    "date": 1746469546778,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,8 +30,10 @@\n               <label>End Date</label>\r\n               <p>{{ task?.endDate | date:'mediumDate' }}</p>\r\n             </div>\r\n           </div>\r\n+          <span class=\"progress-value\">{{ task?.status }}</span>\r\n+          </div>\r\n         </div>\r\n   \r\n         <div class=\"task-section\">\r\n           <h3>Status</h3>\r\n"
                },
                {
                    "date": 1746469574545,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,12 +35,9 @@\n           </div>\r\n         </div>\r\n   \r\n         <div class=\"task-section\">\r\n-          <h3>Status</h3>\r\n-          <div class=\"progress-container\">\r\n-            <mat-progress-bar mode=\"determinate\" [value]=\"task?.status \"></mat-progress-bar>\r\n-            <span class=\"progress-value\">{{ task?.status }}</span>\r\n+          \r\n           </div>\r\n         </div>\r\n   \r\n         <div class=\"task-section\">\r\n"
                },
                {
                    "date": 1746469584947,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,9 +35,18 @@\n           </div>\r\n         </div>\r\n   \r\n         <div class=\"task-section\">\r\n-          \r\n+          <h3>Dates</h3>\r\n+          <div class=\"date-range\">\r\n+            <div class=\"date-item\">\r\n+              <label>Start Date</label>\r\n+              <p>{{ task?.startDate | date:'mediumDate' }}</p>\r\n+            </div>\r\n+            <div class=\"date-item\">\r\n+              <label>End Date</label>\r\n+              <p>{{ task?.endDate | date:'mediumDate' }}</p>\r\n+            </div>\r\n           </div>\r\n         </div>\r\n   \r\n         <div class=\"task-section\">\r\n"
                },
                {
                    "date": 1746469604690,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,9 +32,9 @@\n             </div>\r\n           </div>\r\n           <span class=\"progress-value\">{{ task?.status }}</span>\r\n           </div>\r\n-        </div>\r\n+       \r\n   \r\n         <div class=\"task-section\">\r\n           <h3>Dates</h3>\r\n           <div class=\"date-range\">\r\n"
                },
                {
                    "date": 1746469771748,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,113 @@\n+<div class=\"task-details-container\">\r\n+    <div class=\"task-header\">\r\n+      <h2>{{ task?.name }}</h2>\r\n+      <button mat-icon-button class=\"close-btn\" (click)=\"closeModal()\">\r\n+        <i class=\"bi bi-x-lg\"></i>\r\n+      </button>\r\n+    </div>\r\n+  \r\n+    <div class=\"task-content\">\r\n+      <!-- Left Column -->\r\n+      <div class=\"task-left-column\">\r\n+        <div class=\"priority-status-row\">\r\n+          <div class=\"priority-section\">\r\n+            <h3>Priority</h3>\r\n+            <div class=\"priority-badge\" [class.high]=\"task?.priority === 'HIGH'\"\r\n+                                    [class.medium]=\"task?.priority === 'MEDIUM'\"\r\n+                                    [class.low]=\"task?.priority === 'LOW'\">\r\n+              {{ task?.priority }}\r\n+            </div>\r\n+          </div>\r\n+          \r\n+          <div class=\"status-section\">\r\n+            <h3>Status</h3>\r\n+            <div class=\"progress-container\">\r\n+            \r\n+              \r\n+            </div>\r\n+            <div class=\"date-item\">\r\n+              <label>End Date</label>\r\n+              <p>{{ task?.endDate | date:'mediumDate' }}</p>\r\n+            </div>\r\n+          </div>\r\n+          <span class=\"progress-value\">{{ task?.status }}</span>\r\n+          </div>\r\n+       \r\n+  \r\n+        <div class=\"task-section\">\r\n+          <h3>Dates</h3>\r\n+          <div class=\"date-range\">\r\n+            <div class=\"date-item\">\r\n+              <label>Start Date</label>\r\n+              <p>{{ task?.startDate | date:'mediumDate' }}</p>\r\n+            </div>\r\n+            <div class=\"date-item\">\r\n+              <label>End Date</label>\r\n+              <p>{{ task?.endDate | date:'mediumDate' }}</p>\r\n+            </div>\r\n+          </div>\r\n+        </div>\r\n+  \r\n+        <div class=\"task-section\">\r\n+          <h3>Assignees</h3>\r\n+          <div class=\"subtasks-list\">\r\n+            <div class=\"subtask-item\" *ngFor=\"let subtask of subtasks\">\r\n+              <div class=\"subtask-info\">\r\n+                <i class=\"bi bi-check-circle\"></i>\r\n+                <span>{{ subtask.name }}</span>\r\n+              </div>\r\n+              <div class=\"assignee\">\r\n+                <span class=\"assignee-name\">{{ subtask.assignee }}</span>\r\n+              </div>\r\n+            </div>\r\n+          </div>\r\n+        </div>\r\n+  \r\n+        <div class=\"task-section\">\r\n+          <h3>Attachments</h3>\r\n+          <div class=\"attachments-list\">\r\n+            <div class=\"attachment-item\" *ngFor=\"let attachment of task?.attachments\">\r\n+              <i class=\"bi bi-paperclip\"></i>\r\n+              <div class=\"attachment-info\">\r\n+                <strong>{{ attachment.name }}</strong>\r\n+                <small>{{ attachment.description }}</small>\r\n+              </div>\r\n+              <button mat-icon-button>\r\n+                <i class=\"bi bi-download\"></i>\r\n+              </button>\r\n+            </div>\r\n+          </div>\r\n+        </div>\r\n+      </div>\r\n+  \r\n+      <!-- Right Column -->\r\n+      <div class=\"task-right-column\">\r\n+        <div class=\"task-section\">\r\n+          <h3>Task Overview</h3>\r\n+          <p class=\"task-description\">{{ task?.description }}</p>\r\n+        </div>\r\n+  \r\n+       \r\n+  \r\n+        \r\n+  \r\n+        <div class=\"task-section\">\r\n+          <h3>Activity</h3>\r\n+          <div class=\"activity-timeline\">\r\n+            <div class=\"activity-item\" *ngFor=\"let activity of task?.activities\">\r\n+              <div class=\"activity-header\">\r\n+                <span class=\"user\">{{ activity.user }}</span>\r\n+                <span class=\"timestamp\">{{ activity.timestamp | date:'short' }}</span>\r\n+              </div>\r\n+              <p class=\"activity-content\">{{ activity.content }}</p>\r\n+              <button class=\"reply-btn\" *ngIf=\"activity.hasReply\">Reply</button>\r\n+            </div>\r\n+          </div>\r\n+          <div class=\"new-comment\">\r\n+            <textarea placeholder=\"Add a comment...\"></textarea>\r\n+            <button mat-raised-button color=\"primary\">Post</button>\r\n+          </div>\r\n+        </div>\r\n+      </div>\r\n+    </div>\r\n+  </div>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1746469780605,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,130 +20,10 @@\n           </div>\r\n           \r\n           <div class=\"status-section\">\r\n             <h3>Status</h3>\r\n-            <div class=\"progress-container\">\r\n-            \r\n-              \r\n-            </div>\r\n-            <div class=\"date-item\">\r\n-              <label>End Date</label>\r\n-              <p>{{ task?.endDate | date:'mediumDate' }}</p>\r\n-            </div>\r\n-          </div>\r\n-          <span class=\"progress-value\">{{ task?.status }}</span>\r\n-          </div>\r\n-       \r\n-  \r\n-        <div class=\"task-section\">\r\n-          <h3>Dates</h3>\r\n-          <div class=\"date-range\">\r\n-            <div class=\"date-item\">\r\n-              <label>Start Date</label>\r\n-              <p>{{ task?.startDate | date:'mediumDate' }}</p>\r\n-            </div>\r\n-            <div class=\"date-item\">\r\n-              <label>End Date</label>\r\n-              <p>{{ task?.endDate | date:'mediumDate' }}</p>\r\n-            </div>\r\n-          </div>\r\n-        </div>\r\n-  \r\n-        <div class=\"task-section\">\r\n-          <h3>Assignees</h3>\r\n-          <div class=\"subtasks-list\">\r\n-            <div class=\"subtask-item\" *ngFor=\"let subtask of subtasks\">\r\n-              <div class=\"subtask-info\">\r\n-                <i class=\"bi bi-check-circle\"></i>\r\n-                <span>{{ subtask.name }}</span>\r\n-              </div>\r\n-              <div class=\"assignee\">\r\n-                <span class=\"assignee-name\">{{ subtask.assignee }}</span>\r\n-              </div>\r\n-            </div>\r\n-          </div>\r\n-        </div>\r\n-  \r\n-        <div class=\"task-section\">\r\n-          <h3>Attachments</h3>\r\n-          <div class=\"attachments-list\">\r\n-            <div class=\"attachment-item\" *ngFor=\"let attachment of task?.attachments\">\r\n-              <i class=\"bi bi-paperclip\"></i>\r\n-              <div class=\"attachment-info\">\r\n-                <strong>{{ attachment.name }}</strong>\r\n-                <small>{{ attachment.description }}</small>\r\n-              </div>\r\n-              <button mat-icon-button>\r\n-                <i class=\"bi bi-download\"></i>\r\n-              </button>\r\n-            </div>\r\n-          </div>\r\n-        </div>\r\n-      </div>\r\n-  \r\n-      <!-- Right Column -->\r\n-      <div class=\"task-right-column\">\r\n-        <div class=\"task-section\">\r\n-          <h3>Task Overview</h3>\r\n-          <p class=\"task-description\">{{ task?.description }}</p>\r\n-        </div>\r\n-  \r\n-       \r\n-  \r\n-        \r\n-  \r\n-        <div class=\"task-section\">\r\n-          <h3>Activity</h3>\r\n-          <div class=\"activity-timeline\">\r\n-            <div class=\"activity-item\" *ngFor=\"let activity of task?.activities\">\r\n-              <div class=\"activity-header\">\r\n-                <span class=\"user\">{{ activity.user }}</span>\r\n-                <span class=\"timestamp\">{{ activity.timestamp | date:'short' }}</span>\r\n-              </div>\r\n-              <p class=\"activity-content\">{{ activity.content }}</p>\r\n-              <button class=\"reply-btn\" *ngIf=\"activity.hasReply\">Reply</button>\r\n-            </div>\r\n-          </div>\r\n-          <div class=\"new-comment\">\r\n-            <textarea placeholder=\"Add a comment...\"></textarea>\r\n-            <button mat-raised-button color=\"primary\">Post</button>\r\n-          </div>\r\n-        </div>\r\n-      </div>\r\n-    </div>\r\n-  </div>\n-<div class=\"task-details-container\">\r\n-    <div class=\"task-header\">\r\n-      <h2>{{ task?.name }}</h2>\r\n-      <button mat-icon-button class=\"close-btn\" (click)=\"closeModal()\">\r\n-        <i class=\"bi bi-x-lg\"></i>\r\n-      </button>\r\n-    </div>\r\n-  \r\n-    <div class=\"task-content\">\r\n-      <!-- Left Column -->\r\n-      <div class=\"task-left-column\">\r\n-        <div class=\"priority-status-row\">\r\n-          <div class=\"priority-section\">\r\n-            <h3>Priority</h3>\r\n-            <div class=\"priority-badge\" [class.high]=\"task?.priority === 'HIGH'\"\r\n-                                    [class.medium]=\"task?.priority === 'MEDIUM'\"\r\n-                                    [class.low]=\"task?.priority === 'LOW'\">\r\n-              {{ task?.priority }}\r\n-            </div>\r\n-          </div>\r\n+           \r\n           \r\n-          <div class=\"status-section\">\r\n-            <h3>Status</h3>\r\n-            <div class=\"progress-container\">\r\n-            \r\n-              <label>Start Date</label>\r\n-              <p>{{ task?.startDate | date:'mediumDate' }}</p>\r\n-            </div>\r\n-            <div class=\"date-item\">\r\n-              <label>End Date</label>\r\n-              <p>{{ task?.endDate | date:'mediumDate' }}</p>\r\n-            </div>\r\n           </div>\r\n           <span class=\"progress-value\">{{ task?.status }}</span>\r\n           </div>\r\n        \r\n"
                },
                {
                    "date": 1746471340079,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n <div class=\"task-details-container\">\r\n-    <div class=\"task-header\">\r\n+  <header class=\"task-header\">\r\n       <h2>{{ task?.name }}</h2>\r\n       <button mat-icon-button class=\"close-btn\" (click)=\"closeModal()\">\r\n         <i class=\"bi bi-x-lg\"></i>\r\n       </button>\r\n@@ -19,11 +19,9 @@\n             </div>\r\n           </div>\r\n           \r\n           <div class=\"status-section\">\r\n-            <h3>Status</h3>\r\n-           \r\n-          \r\n+            <h3>Status</h3>        \r\n           </div>\r\n           <span class=\"progress-value\">{{ task?.status }}</span>\r\n           </div>\r\n        \r\n"
                },
                {
                    "date": 1746471368930,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,105 +1,134 @@\n <div class=\"task-details-container\">\r\n   <header class=\"task-header\">\r\n-      <h2>{{ task?.name }}</h2>\r\n-      <button mat-icon-button class=\"close-btn\" (click)=\"closeModal()\">\r\n-        <i class=\"bi bi-x-lg\"></i>\r\n-      </button>\r\n-    </div>\r\n-  \r\n-    <div class=\"task-content\">\r\n-      <!-- Left Column -->\r\n-      <div class=\"task-left-column\">\r\n-        <div class=\"priority-status-row\">\r\n-          <div class=\"priority-section\">\r\n-            <h3>Priority</h3>\r\n-            <div class=\"priority-badge\" [class.high]=\"task?.priority === 'HIGH'\"\r\n-                                    [class.medium]=\"task?.priority === 'MEDIUM'\"\r\n-                                    [class.low]=\"task?.priority === 'LOW'\">\r\n-              {{ task?.priority }}\r\n-            </div>\r\n+    <h2>{{ task?.name }}</h2>\r\n+    <button mat-icon-button class=\"close-btn\" (click)=\"closeModal()\">\r\n+      <i class=\"bi bi-x-lg\"></i>\r\n+    </button>\r\n+  </div>\r\n+\r\n+  <div class=\"task-content\">\r\n+    <!-- ==== Left Column ==== -->\r\n+    <div class=\"task-left-column\">\r\n+      <!-- Priority & Status Card -->\r\n+      <div class=\"detail-card priority-status-card\">\r\n+        <div class=\"priority-section \">\r\n+          <h3>Priority</h3>\r\n+          <div class=\"priority-badge\" [class.high]=\"task?.priority === 'HIGH'\"\r\n+                                  [class.medium]=\"task?.priority === 'MEDIUM'\"\r\n+                                  [class.low]=\"task?.priority === 'LOW'\">\r\n+            {{ task?.priority }}\r\n           </div>\r\n-          \r\n-          <div class=\"status-section\">\r\n-            <h3>Status</h3>        \r\n+        </div>\r\n+        <div class=\"status-section\">\r\n+          <h3>Status</h3>\r\n+          <!-- Moved status value inside its section -->\r\n+          <span class=\"status-value\">{{ task?.status }}</span>\r\n+        </div>\r\n+      </div>\r\n+\r\n+      <!-- Dates Card -->\r\n+      <div class=\"detail-card dates-card\">\r\n+        <h3>Dates</h3>\r\n+        <div class=\"date-range\">\r\n+          <div class=\"date-item\">\r\n+            <label>Start Date</label>\r\n+            <p><i class=\"bi bi-calendar-event\"></i> {{ task?.startDate | date:'mediumDate' }}</p>\r\n           </div>\r\n-          <span class=\"progress-value\">{{ task?.status }}</span>\r\n+          <div class=\"date-item\">\r\n+            <label>End Date</label>\r\n+            <p>{{ task?.endDate | date:'mediumDate' }}</p>\r\n           </div>\r\n-       \r\n-  \r\n-        <div class=\"task-section\">\r\n-          <h3>Dates</h3>\r\n-          <div class=\"date-range\">\r\n-            <div class=\"date-item\">\r\n-              <label>Start Date</label>\r\n-              <p>{{ task?.startDate | date:'mediumDate' }}</p>\r\n+        </div>\r\n+      </div>\r\n+\r\n+      <!-- Assignees Card -->\r\n+      <div class=\"detail-card assignees-card\">\r\n+        <h3>Assignees</h3>\r\n+        <!-- Add loading state if needed -->\r\n+        <div class=\"subtasks-list\">\r\n+          <div class=\"subtask-item\" *ngFor=\"let subtask of subtasks\">\r\n+            <div class=\"subtask-info\">\r\n+              <i class=\"bi bi-check-circle\"></i>\r\n+              <span>{{ subtask.name }}</span>\r\n             </div>\r\n-            <div class=\"date-item\">\r\n-              <label>End Date</label>\r\n-              <p>{{ task?.endDate | date:'mediumDate' }}</p>\r\n+            <div class=\"assignee\">\r\n+              <span class=\"assignee-name\">{{ subtask.assignee }}</span>\r\n             </div>\r\n           </div>\r\n-        </div>\r\n-  \r\n-        <div class=\"task-section\">\r\n-          <h3>Assignees</h3>\r\n-          <div class=\"subtasks-list\">\r\n-            <div class=\"subtask-item\" *ngFor=\"let subtask of subtasks\">\r\n-              <div class=\"subtask-info\">\r\n-                <i class=\"bi bi-check-circle\"></i>\r\n-                <span>{{ subtask.name }}</span>\r\n-              </div>\r\n-              <div class=\"assignee\">\r\n-                <span class=\"assignee-name\">{{ subtask.assignee }}</span>\r\n-              </div>\r\n-            </div>\r\n+          <!-- Add empty state -->\r\n+          <div *ngIf=\"!subtasks || subtasks.length === 0\" class=\"empty-state\">\r\n\\ No newline at end of file\n+            No assignees found.\r\n           </div>\r\n         </div>\r\n-  \r\n-        <div class=\"task-section\">\r\n-          <h3>Attachments</h3>\r\n-          <div class=\"attachments-list\">\r\n-            <div class=\"attachment-item\" *ngFor=\"let attachment of task?.attachments\">\r\n-              <i class=\"bi bi-paperclip\"></i>\r\n-              <div class=\"attachment-info\">\r\n-                <strong>{{ attachment.name }}</strong>\r\n-                <small>{{ attachment.description }}</small>\r\n-              </div>\r\n-              <button mat-icon-button>\r\n-                <i class=\"bi bi-download\"></i>\r\n-              </button>\r\n+      </div>\r\n+\r\n+      <div class=\"detail-card attachments-card\">\r\n+        <h3>Attachments</h3>\r\n+        <div class=\"attachments-list\">\r\n+          <div class=\"attachment-item\" *ngFor=\"let attachment of task?.attachments\">\r\n+            <i class=\"bi bi-paperclip\"></i>\r\n+            <div class=\"attachment-info\">\r\n+              <strong>{{ attachment.name }}</strong>\r\n+              <small>{{ attachment.description }}</small>\r\n             </div>\r\n+            <button mat-icon-button>\r\n+              <i class=\"bi bi-download\"></i>\r\n+            </button>\r\n           </div>\r\n+          <!-- Add empty state -->\r\n+          <div *ngIf=\"!task?.attachments || task?.attachments.length === 0\" class=\"empty-state\">\r\n+            No attachments added.\r\n+          </div>\r\n         </div>\r\n       </div>\r\n-  \r\n-      <!-- Right Column -->\r\n-      <div class=\"task-right-column\">\r\n-        <div class=\"task-section\">\r\n-          <h3>Task Overview</h3>\r\n-          <p class=\"task-description\">{{ task?.description }}</p>\r\n-        </div>\r\n-  \r\n-       \r\n-  \r\n-        \r\n-  \r\n-        <div class=\"task-section\">\r\n-          <h3>Activity</h3>\r\n-          <div class=\"activity-timeline\">\r\n-            <div class=\"activity-item\" *ngFor=\"let activity of task?.activities\">\r\n-              <div class=\"activity-header\">\r\n-                <span class=\"user\">{{ activity.user }}</span>\r\n-                <span class=\"timestamp\">{{ activity.timestamp | date:'short' }}</span>\r\n-              </div>\r\n-              <p class=\"activity-content\">{{ activity.content }}</p>\r\n-              <button class=\"reply-btn\" *ngIf=\"activity.hasReply\">Reply</button>\r\n+    </div>\r\n+\r\n+    <!-- ==== Right Column ==== -->\r\n+    <div class=\"task-right-column\">\r\n+      <!-- Overview Card -->\r\n+      <div class=\"detail-card overview-card\">\r\n+        <h3>Task Overview</h3>\r\n+        <p class=\"task-description\">{{ task?.description }}</p>\r\n+      </div>\r\n+\r\n+      <!-- Requirements Card -->\r\n+      <div class=\"detail-card requirements-card\" *ngIf=\"task?.requirements?.length > 0\">\r\n+         <h3>Requirements</h3>\r\n+         <ul class=\"requirements-list\">\r\n+           <li *ngFor=\"let req of task?.requirements\"><i class=\"bi bi-check2-circle\"></i><span>{{ req }}</span></li>\r\n+         </ul>\r\n+      </div>\r\n+\r\n+      <!-- Guidelines Card -->\r\n+      <div class=\"detail-card guidelines-card\" *ngIf=\"task?.guidelines?.length > 0\">\r\n+         <h3>Guidelines</h3>\r\n+         <ul class=\"guidelines-list\">\r\n+           <li *ngFor=\"let guide of task?.guidelines\"><i class=\"bi bi-lightbulb\"></i><span>{{ guide }}</span></li>\r\n+         </ul>\r\n+      </div>\r\n+\r\n+      <!-- Activity Card -->\r\n+      <div class=\"detail-card activity-card\">\r\n+        <h3>Activity</h3>\r\n+        <div class=\"activity-timeline\">\r\n+          <div class=\"activity-item\" *ngFor=\"let activity of task?.activities\">\r\n+            <div class=\"activity-header\">\r\n+              <span class=\"user\">{{ activity.user }}</span>\r\n+              <span class=\"timestamp\">{{ activity.timestamp | date:'short' }}</span>\r\n             </div>\r\n+            <p class=\"activity-content\">{{ activity.content }}</p>\r\n+            <button class=\"reply-btn\" *ngIf=\"activity.hasReply\">Reply</button>\r\n           </div>\r\n-          <div class=\"new-comment\">\r\n-            <textarea placeholder=\"Add a comment...\"></textarea>\r\n-            <button mat-raised-button color=\"primary\">Post</button>\r\n+           <!-- Add empty state -->\r\n+           <div *ngIf=\"!task?.activities || task?.activities.length === 0\" class=\"empty-state\">\r\n+            No activity yet.\r\n           </div>\r\n         </div>\r\n+        <div class=\"new-comment\">\r\n+          <textarea placeholder=\"Add a comment...\"></textarea>\r\n+          <button mat-flat-button color=\"primary\">Post Comment</button>\r\n+        </div>\r\n       </div>\r\n     </div>\r\n-  </div>\n+  </div>\r\n+</div>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1746471380682,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,134 +1,105 @@\n <div class=\"task-details-container\">\r\n   <header class=\"task-header\">\r\n-    <h2>{{ task?.name }}</h2>\r\n-    <button mat-icon-button class=\"close-btn\" (click)=\"closeModal()\">\r\n-      <i class=\"bi bi-x-lg\"></i>\r\n-    </button>\r\n-  </div>\r\n-\r\n-  <div class=\"task-content\">\r\n-    <!-- ==== Left Column ==== -->\r\n-    <div class=\"task-left-column\">\r\n-      <!-- Priority & Status Card -->\r\n-      <div class=\"detail-card priority-status-card\">\r\n-        <div class=\"priority-section \">\r\n-          <h3>Priority</h3>\r\n-          <div class=\"priority-badge\" [class.high]=\"task?.priority === 'HIGH'\"\r\n-                                  [class.medium]=\"task?.priority === 'MEDIUM'\"\r\n-                                  [class.low]=\"task?.priority === 'LOW'\">\r\n-            {{ task?.priority }}\r\n+      <h2>{{ task?.name }}</h2>\r\n+      <button mat-icon-button class=\"close-btn\" (click)=\"closeModal()\">\r\n+        <i class=\"bi bi-x-lg\"></i>\r\n+      </button>\r\n+    </div>\r\n+  \r\n+    <div class=\"task-content\">\r\n+      <!-- Left Column -->\r\n+      <div class=\"task-left-column\">\r\n+        <div class=\"priority-status-row\">\r\n+          <div class=\"priority-section\">\r\n+            <h3>Priority</h3>\r\n+            <div class=\"priority-badge\" [class.high]=\"task?.priority === 'HIGH'\"\r\n+                                    [class.medium]=\"task?.priority === 'MEDIUM'\"\r\n+                                    [class.low]=\"task?.priority === 'LOW'\">\r\n+              {{ task?.priority }}\r\n+            </div>\r\n           </div>\r\n-        </div>\r\n-        <div class=\"status-section\">\r\n-          <h3>Status</h3>\r\n-          <!-- Moved status value inside its section -->\r\n-          <span class=\"status-value\">{{ task?.status }}</span>\r\n-        </div>\r\n-      </div>\r\n-\r\n-      <!-- Dates Card -->\r\n-      <div class=\"detail-card dates-card\">\r\n-        <h3>Dates</h3>\r\n-        <div class=\"date-range\">\r\n-          <div class=\"date-item\">\r\n-            <label>Start Date</label>\r\n-            <p><i class=\"bi bi-calendar-event\"></i> {{ task?.startDate | date:'mediumDate' }}</p>\r\n+          \r\n+          <div class=\"status-section\">\r\n+            <h3>Status</h3>        \r\n           </div>\r\n-          <div class=\"date-item\">\r\n-            <label>End Date</label>\r\n-            <p>{{ task?.endDate | date:'mediumDate' }}</p>\r\n+          <span class=\"progress-value\">{{ task?.status }}</span>\r\n           </div>\r\n-        </div>\r\n-      </div>\r\n-\r\n-      <!-- Assignees Card -->\r\n-      <div class=\"detail-card assignees-card\">\r\n-        <h3>Assignees</h3>\r\n-        <!-- Add loading state if needed -->\r\n-        <div class=\"subtasks-list\">\r\n-          <div class=\"subtask-item\" *ngFor=\"let subtask of subtasks\">\r\n-            <div class=\"subtask-info\">\r\n-              <i class=\"bi bi-check-circle\"></i>\r\n-              <span>{{ subtask.name }}</span>\r\n+       \r\n+  \r\n+        <div class=\"task-section\">\r\n+          <h3>Dates</h3>\r\n+          <div class=\"date-range\">\r\n+            <div class=\"date-item\">\r\n+              <label>Start Date</label>\r\n+              <p>{{ task?.startDate | date:'mediumDate' }}</p>\r\n             </div>\r\n-            <div class=\"assignee\">\r\n-              <span class=\"assignee-name\">{{ subtask.assignee }}</span>\r\n+            <div class=\"date-item\">\r\n+              <label>End Date</label>\r\n+              <p>{{ task?.endDate | date:'mediumDate' }}</p>\r\n             </div>\r\n           </div>\r\n-          <!-- Add empty state -->\r\n-          <div *ngIf=\"!subtasks || subtasks.length === 0\" class=\"empty-state\">\r\n-            No assignees found.\r\n+        </div>\r\n+  \r\n+        <div class=\"task-section\">\r\n+          <h3>Assignees</h3>\r\n+          <div class=\"subtasks-list\">\r\n+            <div class=\"subtask-item\" *ngFor=\"let subtask of subtasks\">\r\n+              <div class=\"subtask-info\">\r\n+                <i class=\"bi bi-check-circle\"></i>\r\n+                <span>{{ subtask.name }}</span>\r\n+              </div>\r\n+              <div class=\"assignee\">\r\n+                <span class=\"assignee-name\">{{ subtask.assignee }}</span>\r\n+              </div>\r\n+            </div>\r\n           </div>\r\n         </div>\r\n-      </div>\r\n-\r\n-      <div class=\"detail-card attachments-card\">\r\n-        <h3>Attachments</h3>\r\n-        <div class=\"attachments-list\">\r\n-          <div class=\"attachment-item\" *ngFor=\"let attachment of task?.attachments\">\r\n-            <i class=\"bi bi-paperclip\"></i>\r\n-            <div class=\"attachment-info\">\r\n-              <strong>{{ attachment.name }}</strong>\r\n-              <small>{{ attachment.description }}</small>\r\n+  \r\n+        <div class=\"task-section\">\r\n+          <h3>Attachments</h3>\r\n+          <div class=\"attachments-list\">\r\n+            <div class=\"attachment-item\" *ngFor=\"let attachment of task?.attachments\">\r\n+              <i class=\"bi bi-paperclip\"></i>\r\n+              <div class=\"attachment-info\">\r\n+                <strong>{{ attachment.name }}</strong>\r\n+                <small>{{ attachment.description }}</small>\r\n+              </div>\r\n+              <button mat-icon-button>\r\n+                <i class=\"bi bi-download\"></i>\r\n+              </button>\r\n             </div>\r\n-            <button mat-icon-button>\r\n-              <i class=\"bi bi-download\"></i>\r\n\\ No newline at end of file\n-            </button>\r\n           </div>\r\n-          <!-- Add empty state -->\r\n-          <div *ngIf=\"!task?.attachments || task?.attachments.length === 0\" class=\"empty-state\">\r\n-            No attachments added.\r\n-          </div>\r\n         </div>\r\n       </div>\r\n-    </div>\r\n-\r\n-    <!-- ==== Right Column ==== -->\r\n-    <div class=\"task-right-column\">\r\n-      <!-- Overview Card -->\r\n-      <div class=\"detail-card overview-card\">\r\n-        <h3>Task Overview</h3>\r\n-        <p class=\"task-description\">{{ task?.description }}</p>\r\n-      </div>\r\n-\r\n-      <!-- Requirements Card -->\r\n-      <div class=\"detail-card requirements-card\" *ngIf=\"task?.requirements?.length > 0\">\r\n-         <h3>Requirements</h3>\r\n-         <ul class=\"requirements-list\">\r\n-           <li *ngFor=\"let req of task?.requirements\"><i class=\"bi bi-check2-circle\"></i><span>{{ req }}</span></li>\r\n-         </ul>\r\n-      </div>\r\n-\r\n-      <!-- Guidelines Card -->\r\n-      <div class=\"detail-card guidelines-card\" *ngIf=\"task?.guidelines?.length > 0\">\r\n-         <h3>Guidelines</h3>\r\n-         <ul class=\"guidelines-list\">\r\n-           <li *ngFor=\"let guide of task?.guidelines\"><i class=\"bi bi-lightbulb\"></i><span>{{ guide }}</span></li>\r\n-         </ul>\r\n-      </div>\r\n-\r\n-      <!-- Activity Card -->\r\n-      <div class=\"detail-card activity-card\">\r\n-        <h3>Activity</h3>\r\n-        <div class=\"activity-timeline\">\r\n-          <div class=\"activity-item\" *ngFor=\"let activity of task?.activities\">\r\n-            <div class=\"activity-header\">\r\n-              <span class=\"user\">{{ activity.user }}</span>\r\n-              <span class=\"timestamp\">{{ activity.timestamp | date:'short' }}</span>\r\n+  \r\n+      <!-- Right Column -->\r\n+      <div class=\"task-right-column\">\r\n+        <div class=\"task-section\">\r\n+          <h3>Task Overview</h3>\r\n+          <p class=\"task-description\">{{ task?.description }}</p>\r\n+        </div>\r\n+  \r\n+       \r\n+  \r\n+        \r\n+  \r\n+        <div class=\"task-section\">\r\n+          <h3>Activity</h3>\r\n+          <div class=\"activity-timeline\">\r\n+            <div class=\"activity-item\" *ngFor=\"let activity of task?.activities\">\r\n+              <div class=\"activity-header\">\r\n+                <span class=\"user\">{{ activity.user }}</span>\r\n+                <span class=\"timestamp\">{{ activity.timestamp | date:'short' }}</span>\r\n+              </div>\r\n+              <p class=\"activity-content\">{{ activity.content }}</p>\r\n+              <button class=\"reply-btn\" *ngIf=\"activity.hasReply\">Reply</button>\r\n             </div>\r\n-            <p class=\"activity-content\">{{ activity.content }}</p>\r\n-            <button class=\"reply-btn\" *ngIf=\"activity.hasReply\">Reply</button>\r\n           </div>\r\n-           <!-- Add empty state -->\r\n-           <div *ngIf=\"!task?.activities || task?.activities.length === 0\" class=\"empty-state\">\r\n-            No activity yet.\r\n+          <div class=\"new-comment\">\r\n+            <textarea placeholder=\"Add a comment...\"></textarea>\r\n+            <button mat-raised-button color=\"primary\">Post</button>\r\n           </div>\r\n         </div>\r\n-        <div class=\"new-comment\">\r\n-          <textarea placeholder=\"Add a comment...\"></textarea>\r\n-          <button mat-flat-button color=\"primary\">Post Comment</button>\r\n-        </div>\r\n       </div>\r\n     </div>\r\n-  </div>\r\n-</div>\n+  </div>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1746471389111,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,9 @@\n       <h2>{{ task?.name }}</h2>\r\n       <button mat-icon-button class=\"close-btn\" (click)=\"closeModal()\">\r\n         <i class=\"bi bi-x-lg\"></i>\r\n       </button>\r\n-    </div>\r\n+    </header>\r\n   \r\n     <div class=\"task-content\">\r\n       <!-- Left Column -->\r\n       <div class=\"task-left-column\">\r\n"
                },
                {
                    "date": 1746471418148,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,10 +8,11 @@\n   \r\n     <div class=\"task-content\">\r\n       <!-- Left Column -->\r\n       <div class=\"task-left-column\">\r\n-        <div class=\"priority-status-row\">\r\n-          <div class=\"priority-section\">\r\n+        <div class=\"detail-card priority-status-card\">\r\n+          <div class=\"priority-section \">\r\n+          \r\n             <h3>Priority</h3>\r\n             <div class=\"priority-badge\" [class.high]=\"task?.priority === 'HIGH'\"\r\n                                     [class.medium]=\"task?.priority === 'MEDIUM'\"\r\n                                     [class.low]=\"task?.priority === 'LOW'\">\r\n"
                },
                {
                    "date": 1746471435651,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,9 +20,11 @@\n             </div>\r\n           </div>\r\n           \r\n           <div class=\"status-section\">\r\n-            <h3>Status</h3>        \r\n+            <h3>Status</h3>   \r\n+            <span class=\"status-value\">{{ task?.status }}</span>\r\n+           \r\n           </div>\r\n           <span class=\"progress-value\">{{ task?.status }}</span>\r\n           </div>\r\n        \r\n"
                },
                {
                    "date": 1746471466241,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -21,16 +21,11 @@\n           </div>\r\n           \r\n           <div class=\"status-section\">\r\n             <h3>Status</h3>   \r\n-            <span class=\"status-value\">{{ task?.status }}</span>\r\n-           \r\n+            <span class=\"status-value\">{{ task?.status }}</span>          \r\n           </div>\r\n-          <span class=\"progress-value\">{{ task?.status }}</span>\r\n-          </div>\r\n-       \r\n-  \r\n-        <div class=\"task-section\">\r\n+          \r\n           <h3>Dates</h3>\r\n           <div class=\"date-range\">\r\n             <div class=\"date-item\">\r\n               <label>Start Date</label>\r\n"
                },
                {
                    "date": 1746471474315,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,9 +23,9 @@\n           <div class=\"status-section\">\r\n             <h3>Status</h3>   \r\n             <span class=\"status-value\">{{ task?.status }}</span>          \r\n           </div>\r\n-          \r\n+        </div>\r\n           <h3>Dates</h3>\r\n           <div class=\"date-range\">\r\n             <div class=\"date-item\">\r\n               <label>Start Date</label>\r\n"
                },
                {
                    "date": 1746471485017,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,8 +24,10 @@\n             <h3>Status</h3>   \r\n             <span class=\"status-value\">{{ task?.status }}</span>          \r\n           </div>\r\n         </div>\r\n+        <div class=\"detail-card dates-card\">\r\n+        \r\n           <h3>Dates</h3>\r\n           <div class=\"date-range\">\r\n             <div class=\"date-item\">\r\n               <label>Start Date</label>\r\n"
                },
                {
                    "date": 1746471500231,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,9 +30,10 @@\n           <h3>Dates</h3>\r\n           <div class=\"date-range\">\r\n             <div class=\"date-item\">\r\n               <label>Start Date</label>\r\n-              <p>{{ task?.startDate | date:'mediumDate' }}</p>\r\n+              <p><i class=\"bi bi-calendar-event\"></i> {{ task?.startDate | date:'mediumDate' }}</p>\r\n+         \r\n             </div>\r\n             <div class=\"date-item\">\r\n               <label>End Date</label>\r\n               <p>{{ task?.endDate | date:'mediumDate' }}</p>\r\n"
                },
                {
                    "date": 1746471522938,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -40,9 +40,10 @@\n             </div>\r\n           </div>\r\n         </div>\r\n   \r\n-        <div class=\"task-section\">\r\n+        <div class=\"detail-card assignees-card\">\r\n+       \r\n           <h3>Assignees</h3>\r\n           <div class=\"subtasks-list\">\r\n             <div class=\"subtask-item\" *ngFor=\"let subtask of subtasks\">\r\n               <div class=\"subtask-info\">\r\n"
                },
                {
                    "date": 1746471534806,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,8 +53,10 @@\n               <div class=\"assignee\">\r\n                 <span class=\"assignee-name\">{{ subtask.assignee }}</span>\r\n               </div>\r\n             </div>\r\n+\r\n+            \r\n           </div>\r\n         </div>\r\n   \r\n         <div class=\"task-section\">\r\n"
                },
                {
                    "date": 1746471542206,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -54,9 +54,12 @@\n                 <span class=\"assignee-name\">{{ subtask.assignee }}</span>\r\n               </div>\r\n             </div>\r\n \r\n-            \r\n+            <!-- Add empty state -->\r\n+            <div *ngIf=\"!subtasks || subtasks.length === 0\" class=\"empty-state\">\r\n+              No assignees found.\r\n+            </div>\r\n           </div>\r\n         </div>\r\n   \r\n         <div class=\"task-section\">\r\n"
                },
                {
                    "date": 1746471552971,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -61,9 +61,10 @@\n             </div>\r\n           </div>\r\n         </div>\r\n   \r\n-        <div class=\"task-section\">\r\n+        <div class=\"detail-card attachments-card\">\r\n+       \r\n           <h3>Attachments</h3>\r\n           <div class=\"attachments-list\">\r\n             <div class=\"attachment-item\" *ngFor=\"let attachment of task?.attachments\">\r\n               <i class=\"bi bi-paperclip\"></i>\r\n"
                },
                {
                    "date": 1746471561426,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -75,8 +75,10 @@\n               <button mat-icon-button>\r\n                 <i class=\"bi bi-download\"></i>\r\n               </button>\r\n             </div>\r\n+\r\n+            \r\n           </div>\r\n         </div>\r\n       </div>\r\n   \r\n"
                },
                {
                    "date": 1746471571143,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -75,10 +75,13 @@\n               <button mat-icon-button>\r\n                 <i class=\"bi bi-download\"></i>\r\n               </button>\r\n             </div>\r\n+ <!-- Add empty state -->\r\n+ <div *ngIf=\"!task?.attachments || task?.attachments.length === 0\" class=\"empty-state\">\r\n+  No attachments added.\r\n+</div>\r\n \r\n-            \r\n           </div>\r\n         </div>\r\n       </div>\r\n   \r\n"
                },
                {
                    "date": 1746471602364,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -86,9 +86,10 @@\n       </div>\r\n   \r\n       <!-- Right Column -->\r\n       <div class=\"task-right-column\">\r\n-        <div class=\"task-section\">\r\n+        <div class=\"detail-card overview-card\">\r\n+       \r\n           <h3>Task Overview</h3>\r\n           <p class=\"task-description\">{{ task?.description }}</p>\r\n         </div>\r\n   \r\n"
                },
                {
                    "date": 1746471635153,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -96,9 +96,10 @@\n        \r\n   \r\n         \r\n   \r\n-        <div class=\"task-section\">\r\n+        <div class=\"detail-card activity-card\">\r\n+        \r\n           <h3>Activity</h3>\r\n           <div class=\"activity-timeline\">\r\n             <div class=\"activity-item\" *ngFor=\"let activity of task?.activities\">\r\n               <div class=\"activity-header\">\r\n"
                },
                {
                    "date": 1746471643713,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -108,8 +108,9 @@\n               </div>\r\n               <p class=\"activity-content\">{{ activity.content }}</p>\r\n               <button class=\"reply-btn\" *ngIf=\"activity.hasReply\">Reply</button>\r\n             </div>\r\n+            \r\n           </div>\r\n           <div class=\"new-comment\">\r\n             <textarea placeholder=\"Add a comment...\"></textarea>\r\n             <button mat-raised-button color=\"primary\">Post</button>\r\n"
                },
                {
                    "date": 1746471649767,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -108,9 +108,12 @@\n               </div>\r\n               <p class=\"activity-content\">{{ activity.content }}</p>\r\n               <button class=\"reply-btn\" *ngIf=\"activity.hasReply\">Reply</button>\r\n             </div>\r\n-            \r\n+            <!-- Add empty state -->\r\n+            <div *ngIf=\"!task?.activities || task?.activities.length === 0\" class=\"empty-state\">\r\n+              No activity yet.\r\n+            </div>\r\n           </div>\r\n           <div class=\"new-comment\">\r\n             <textarea placeholder=\"Add a comment...\"></textarea>\r\n             <button mat-raised-button color=\"primary\">Post</button>\r\n"
                },
                {
                    "date": 1746471661196,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -115,9 +115,10 @@\n             </div>\r\n           </div>\r\n           <div class=\"new-comment\">\r\n             <textarea placeholder=\"Add a comment...\"></textarea>\r\n-            <button mat-raised-button color=\"primary\">Post</button>\r\n+            <button mat-flat-button color=\"primary\">Post Comment</button>\r\n+          \r\n           </div>\r\n         </div>\r\n       </div>\r\n     </div>\r\n"
                },
                {
                    "date": 1746472397476,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,18 +1,17 @@\n <div class=\"task-details-container\">\r\n-  <header class=\"task-header\">\r\n+    <div class=\"task-header\">\r\n       <h2>{{ task?.name }}</h2>\r\n       <button mat-icon-button class=\"close-btn\" (click)=\"closeModal()\">\r\n         <i class=\"bi bi-x-lg\"></i>\r\n       </button>\r\n-    </header>\r\n+    </div>\r\n   \r\n     <div class=\"task-content\">\r\n       <!-- Left Column -->\r\n       <div class=\"task-left-column\">\r\n-        <div class=\"detail-card priority-status-card\">\r\n-          <div class=\"priority-section \">\r\n-          \r\n+        <div class=\"priority-status-row\">\r\n+          <div class=\"priority-section\">\r\n             <h3>Priority</h3>\r\n             <div class=\"priority-badge\" [class.high]=\"task?.priority === 'HIGH'\"\r\n                                     [class.medium]=\"task?.priority === 'MEDIUM'\"\r\n                                     [class.low]=\"task?.priority === 'LOW'\">\r\n@@ -20,30 +19,29 @@\n             </div>\r\n           </div>\r\n           \r\n           <div class=\"status-section\">\r\n-            <h3>Status</h3>   \r\n-            <span class=\"status-value\">{{ task?.status }}</span>          \r\n+            <h3>Status</h3>        \r\n           </div>\r\n-        </div>\r\n-        <div class=\"detail-card dates-card\">\r\n-        \r\n+          <span class=\"progress-value\">{{ task?.status }}</span>\r\n+          </div>\r\n+       \r\n+  \r\n+        <div class=\"task-section\">\r\n           <h3>Dates</h3>\r\n           <div class=\"date-range\">\r\n             <div class=\"date-item\">\r\n               <label>Start Date</label>\r\n-              <p><i class=\"bi bi-calendar-event\"></i> {{ task?.startDate | date:'mediumDate' }}</p>\r\n-         \r\n+              <p>{{ task?.startDate | date:'mediumDate' }}</p>\r\n             </div>\r\n             <div class=\"date-item\">\r\n               <label>End Date</label>\r\n               <p>{{ task?.endDate | date:'mediumDate' }}</p>\r\n             </div>\r\n           </div>\r\n         </div>\r\n   \r\n-        <div class=\"detail-card assignees-card\">\r\n-       \r\n+        <div class=\"task-section\">\r\n           <h3>Assignees</h3>\r\n           <div class=\"subtasks-list\">\r\n             <div class=\"subtask-item\" *ngFor=\"let subtask of subtasks\">\r\n               <div class=\"subtask-info\">\r\n@@ -53,18 +51,12 @@\n               <div class=\"assignee\">\r\n                 <span class=\"assignee-name\">{{ subtask.assignee }}</span>\r\n               </div>\r\n             </div>\r\n-\r\n-            <!-- Add empty state -->\r\n-            <div *ngIf=\"!subtasks || subtasks.length === 0\" class=\"empty-state\">\r\n-              No assignees found.\r\n-            </div>\r\n           </div>\r\n         </div>\r\n   \r\n-        <div class=\"detail-card attachments-card\">\r\n-       \r\n+        <div class=\"task-section\">\r\n           <h3>Attachments</h3>\r\n           <div class=\"attachments-list\">\r\n             <div class=\"attachment-item\" *ngFor=\"let attachment of task?.attachments\">\r\n               <i class=\"bi bi-paperclip\"></i>\r\n@@ -75,31 +67,24 @@\n               <button mat-icon-button>\r\n                 <i class=\"bi bi-download\"></i>\r\n               </button>\r\n             </div>\r\n- <!-- Add empty state -->\r\n- <div *ngIf=\"!task?.attachments || task?.attachments.length === 0\" class=\"empty-state\">\r\n-  No attachments added.\r\n-</div>\r\n-\r\n           </div>\r\n         </div>\r\n       </div>\r\n   \r\n       <!-- Right Column -->\r\n       <div class=\"task-right-column\">\r\n-        <div class=\"detail-card overview-card\">\r\n-       \r\n+        <div class=\"task-section\">\r\n           <h3>Task Overview</h3>\r\n           <p class=\"task-description\">{{ task?.description }}</p>\r\n         </div>\r\n   \r\n        \r\n   \r\n         \r\n   \r\n-        <div class=\"detail-card activity-card\">\r\n-        \r\n+        <div class=\"task-section\">\r\n           <h3>Activity</h3>\r\n           <div class=\"activity-timeline\">\r\n             <div class=\"activity-item\" *ngFor=\"let activity of task?.activities\">\r\n               <div class=\"activity-header\">\r\n@@ -108,17 +93,12 @@\n               </div>\r\n               <p class=\"activity-content\">{{ activity.content }}</p>\r\n               <button class=\"reply-btn\" *ngIf=\"activity.hasReply\">Reply</button>\r\n             </div>\r\n-            <!-- Add empty state -->\r\n-            <div *ngIf=\"!task?.activities || task?.activities.length === 0\" class=\"empty-state\">\r\n-              No activity yet.\r\n-            </div>\r\n           </div>\r\n           <div class=\"new-comment\">\r\n             <textarea placeholder=\"Add a comment...\"></textarea>\r\n-            <button mat-flat-button color=\"primary\">Post Comment</button>\r\n-          \r\n+            <button mat-raised-button color=\"primary\">Post</button>\r\n           </div>\r\n         </div>\r\n       </div>\r\n     </div>\r\n"
                },
                {
                    "date": 1746472451021,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,8 @@\n <div class=\"task-details-container\">\r\n     <div class=\"task-header\">\r\n       <h2>{{ task?.name }}</h2>\r\n+      \r\n       <button mat-icon-button class=\"close-btn\" (click)=\"closeModal()\">\r\n         <i class=\"bi bi-x-lg\"></i>\r\n       </button>\r\n     </div>\r\n"
                },
                {
                    "date": 1746472494422,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,12 @@\n <div class=\"task-details-container\">\r\n     <div class=\"task-header\">\r\n       <h2>{{ task?.name }}</h2>\r\n-      \r\n+      <div class=\"priority-badge\" [class.high]=\"task?.priority === 'HIGH'\"\r\n+                                    [class.medium]=\"task?.priority === 'MEDIUM'\"\r\n+                                    [class.low]=\"task?.priority === 'LOW'\">\r\n+              {{ task?.priority }}\r\n+            </div>\r\n       <button mat-icon-button class=\"close-btn\" (click)=\"closeModal()\">\r\n         <i class=\"bi bi-x-lg\"></i>\r\n       </button>\r\n     </div>\r\n@@ -22,9 +26,9 @@\n           \r\n           <div class=\"status-section\">\r\n             <h3>Status</h3>        \r\n           </div>\r\n-          <span class=\"progress-value\">{{ task?.status }}</span>\r\n+          \r\n           </div>\r\n        \r\n   \r\n         <div class=\"task-section\">\r\n"
                },
                {
                    "date": 1746472501612,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,8 +5,9 @@\n                                     [class.medium]=\"task?.priority === 'MEDIUM'\"\r\n                                     [class.low]=\"task?.priority === 'LOW'\">\r\n               {{ task?.priority }}\r\n             </div>\r\n+            \r\n       <button mat-icon-button class=\"close-btn\" (click)=\"closeModal()\">\r\n         <i class=\"bi bi-x-lg\"></i>\r\n       </button>\r\n     </div>\r\n@@ -26,9 +27,9 @@\n           \r\n           <div class=\"status-section\">\r\n             <h3>Status</h3>        \r\n           </div>\r\n-          \r\n+          <span class=\"progress-value\">{{ task?.status }}</span>\r\n           </div>\r\n        \r\n   \r\n         <div class=\"task-section\">\r\n"
                },
                {
                    "date": 1746472540112,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,32 +5,18 @@\n                                     [class.medium]=\"task?.priority === 'MEDIUM'\"\r\n                                     [class.low]=\"task?.priority === 'LOW'\">\r\n               {{ task?.priority }}\r\n             </div>\r\n-            \r\n+            <span class=\"progress-value\">{{ task?.status }}</span>\r\n       <button mat-icon-button class=\"close-btn\" (click)=\"closeModal()\">\r\n         <i class=\"bi bi-x-lg\"></i>\r\n       </button>\r\n     </div>\r\n   \r\n     <div class=\"task-content\">\r\n       <!-- Left Column -->\r\n       <div class=\"task-left-column\">\r\n-        <div class=\"priority-status-row\">\r\n-          <div class=\"priority-section\">\r\n-            <h3>Priority</h3>\r\n-            <div class=\"priority-badge\" [class.high]=\"task?.priority === 'HIGH'\"\r\n-                                    [class.medium]=\"task?.priority === 'MEDIUM'\"\r\n-                                    [class.low]=\"task?.priority === 'LOW'\">\r\n-              {{ task?.priority }}\r\n-            </div>\r\n-          </div>\r\n-          \r\n-          <div class=\"status-section\">\r\n-            <h3>Status</h3>        \r\n-          </div>\r\n-          <span class=\"progress-value\">{{ task?.status }}</span>\r\n-          </div>\r\n+        \r\n        \r\n   \r\n         <div class=\"task-section\">\r\n           <h3>Dates</h3>\r\n"
                },
                {
                    "date": 1746472595746,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,9 +5,9 @@\n                                     [class.medium]=\"task?.priority === 'MEDIUM'\"\r\n                                     [class.low]=\"task?.priority === 'LOW'\">\r\n               {{ task?.priority }}\r\n             </div>\r\n-            <span class=\"progress-value\">{{ task?.status }}</span>\r\n+            <span class=\"priority-badge\">{{ task?.status }}</span>\r\n       <button mat-icon-button class=\"close-btn\" (click)=\"closeModal()\">\r\n         <i class=\"bi bi-x-lg\"></i>\r\n       </button>\r\n     </div>\r\n"
                },
                {
                    "date": 1746472601107,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,9 +5,9 @@\n                                     [class.medium]=\"task?.priority === 'MEDIUM'\"\r\n                                     [class.low]=\"task?.priority === 'LOW'\">\r\n               {{ task?.priority }}\r\n             </div>\r\n-            <span class=\"priority-badge\">{{ task?.status }}</span>\r\n+            <span class=\"status-badge\">{{ task?.status }}</span>\r\n       <button mat-icon-button class=\"close-btn\" (click)=\"closeModal()\">\r\n         <i class=\"bi bi-x-lg\"></i>\r\n       </button>\r\n     </div>\r\n"
                },
                {
                    "date": 1746472850287,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,9 +5,11 @@\n                                     [class.medium]=\"task?.priority === 'MEDIUM'\"\r\n                                     [class.low]=\"task?.priority === 'LOW'\">\r\n               {{ task?.priority }}\r\n             </div>\r\n-            <span class=\"status-badge\">{{ task?.status }}</span>\r\n+            <span class=\"status-badge\" [class.high]=\"task?.priority === 'HIGH'\"\r\n+            [class.medium]=\"task?.priority === 'MEDIUM'\"\r\n+            [class.low]=\"task?.priority === 'LOW'\">{{ task?.status }}</span>\r\n       <button mat-icon-button class=\"close-btn\" (click)=\"closeModal()\">\r\n         <i class=\"bi bi-x-lg\"></i>\r\n       </button>\r\n     </div>\r\n"
                },
                {
                    "date": 1746472865137,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,9 +5,9 @@\n                                     [class.medium]=\"task?.priority === 'MEDIUM'\"\r\n                                     [class.low]=\"task?.priority === 'LOW'\">\r\n               {{ task?.priority }}\r\n             </div>\r\n-            <span class=\"status-badge\" [class.high]=\"task?.priority === 'HIGH'\"\r\n+            <span class=\"status-badge\" [class.TODO]=\"task?.priority === 'HIGH'\"\r\n             [class.medium]=\"task?.priority === 'MEDIUM'\"\r\n             [class.low]=\"task?.priority === 'LOW'\">{{ task?.status }}</span>\r\n       <button mat-icon-button class=\"close-btn\" (click)=\"closeModal()\">\r\n         <i class=\"bi bi-x-lg\"></i>\r\n"
                },
                {
                    "date": 1746472884539,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,10 +5,10 @@\n                                     [class.medium]=\"task?.priority === 'MEDIUM'\"\r\n                                     [class.low]=\"task?.priority === 'LOW'\">\r\n               {{ task?.priority }}\r\n             </div>\r\n-            <span class=\"status-badge\" [class.TODO]=\"task?.priority === 'HIGH'\"\r\n-            [class.medium]=\"task?.priority === 'MEDIUM'\"\r\n+            <span class=\"status-badge\" [class.TODO]=\"task?.priority === 'TODO'\"\r\n+            [class.medium]=\"task?.priority === 'COMPLETED '\"\r\n             [class.low]=\"task?.priority === 'LOW'\">{{ task?.status }}</span>\r\n       <button mat-icon-button class=\"close-btn\" (click)=\"closeModal()\">\r\n         <i class=\"bi bi-x-lg\"></i>\r\n       </button>\r\n"
                },
                {
                    "date": 1746472890623,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,9 +6,9 @@\n                                     [class.low]=\"task?.priority === 'LOW'\">\r\n               {{ task?.priority }}\r\n             </div>\r\n             <span class=\"status-badge\" [class.TODO]=\"task?.priority === 'TODO'\"\r\n-            [class.medium]=\"task?.priority === 'COMPLETED '\"\r\n+            [class.COMPLETED]=\"task?.priority === 'COMPLETED'\"\r\n             [class.low]=\"task?.priority === 'LOW'\">{{ task?.status }}</span>\r\n       <button mat-icon-button class=\"close-btn\" (click)=\"closeModal()\">\r\n         <i class=\"bi bi-x-lg\"></i>\r\n       </button>\r\n"
                },
                {
                    "date": 1746472900128,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,9 +7,9 @@\n               {{ task?.priority }}\r\n             </div>\r\n             <span class=\"status-badge\" [class.TODO]=\"task?.priority === 'TODO'\"\r\n             [class.COMPLETED]=\"task?.priority === 'COMPLETED'\"\r\n-            [class.low]=\"task?.priority === 'LOW'\">{{ task?.status }}</span>\r\n+            [class.IN_PROGRESS]=\"task?.priority === 'LOW'\">{{ task?.status }}</span>\r\n       <button mat-icon-button class=\"close-btn\" (click)=\"closeModal()\">\r\n         <i class=\"bi bi-x-lg\"></i>\r\n       </button>\r\n     </div>\r\n"
                },
                {
                    "date": 1746472907596,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,11 +5,11 @@\n                                     [class.medium]=\"task?.priority === 'MEDIUM'\"\r\n                                     [class.low]=\"task?.priority === 'LOW'\">\r\n               {{ task?.priority }}\r\n             </div>\r\n-            <span class=\"status-badge\" [class.TODO]=\"task?.priority === 'TODO'\"\r\n+            <span class=\"status-badge\" [class.TODO]=\"task?.status === 'TODO'\"\r\n             [class.COMPLETED]=\"task?.priority === 'COMPLETED'\"\r\n-            [class.IN_PROGRESS]=\"task?.priority === 'LOW'\">{{ task?.status }}</span>\r\n+            [class.IN_PROGRESS]=\"task?.priority === 'IN_PROGRESS'\">{{ task?.status }}</span>\r\n       <button mat-icon-button class=\"close-btn\" (click)=\"closeModal()\">\r\n         <i class=\"bi bi-x-lg\"></i>\r\n       </button>\r\n     </div>\r\n"
                },
                {
                    "date": 1746481643806,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,10 +6,10 @@\n                                     [class.low]=\"task?.priority === 'LOW'\">\r\n               {{ task?.priority }}\r\n             </div>\r\n             <span class=\"status-badge\" [class.TODO]=\"task?.status === 'TODO'\"\r\n-            [class.COMPLETED]=\"task?.priority === 'COMPLETED'\"\r\n-            [class.IN_PROGRESS]=\"task?.priority === 'IN_PROGRESS'\">{{ task?.status }}</span>\r\n+            [class.COMPLETED]=\"task?.status === 'COMPLETED'\"\r\n+            [class.IN_PROGRESS]=\"task?.status === 'IN_PROGRESS'\">{{ task?.status }}</span>\r\n       <button mat-icon-button class=\"close-btn\" (click)=\"closeModal()\">\r\n         <i class=\"bi bi-x-lg\"></i>\r\n       </button>\r\n     </div>\r\n@@ -20,9 +20,9 @@\n         \r\n        \r\n   \r\n         <div class=\"task-section\">\r\n-          <h3>Dates</h3>\r\n+          \r\n           <div class=\"date-range\">\r\n             <div class=\"date-item\">\r\n               <label>Start Date</label>\r\n               <p>{{ task?.startDate | date:'mediumDate' }}</p>\r\n"
                },
                {
                    "date": 1747010854578,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -87,8 +87,9 @@\n               </div>\r\n               <p class=\"activity-content\">{{ activity.content }}</p>\r\n               <button class=\"reply-btn\" *ngIf=\"activity.hasReply\">Reply</button>\r\n             </div>\r\n+            \r\n           </div>\r\n           <div class=\"new-comment\">\r\n             <textarea placeholder=\"Add a comment...\"></textarea>\r\n             <button mat-raised-button color=\"primary\">Post</button>\r\n"
                },
                {
                    "date": 1747010861050,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -87,9 +87,11 @@\n               </div>\r\n               <p class=\"activity-content\">{{ activity.content }}</p>\r\n               <button class=\"reply-btn\" *ngIf=\"activity.hasReply\">Reply</button>\r\n             </div>\r\n-            \r\n+            <div *ngIf=\"!task?.activities || task?.activities?.length === 0\" class=\"no-comments\">\r\n+              No activities yet.\r\n+            </div>\r\n           </div>\r\n           <div class=\"new-comment\">\r\n             <textarea placeholder=\"Add a comment...\"></textarea>\r\n             <button mat-raised-button color=\"primary\">Post</button>\r\n"
                },
                {
                    "date": 1747010880353,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -92,10 +92,11 @@\n               No activities yet.\r\n             </div>\r\n           </div>\r\n           <div class=\"new-comment\">\r\n-            <textarea placeholder=\"Add a comment...\"></textarea>\r\n-            <button mat-raised-button color=\"primary\">Post</button>\r\n+            <textarea placeholder=\"Add an activity update...\"></textarea> <!-- Placeholder text changed for clarity -->\r\n+            <button mat-raised-button color=\"primary\">Post Update</button> <!-- Button text changed for clarity -->\r\n+       \r\n           </div>\r\n         </div>\r\n       </div>\r\n     </div>\r\n"
                },
                {
                    "date": 1747010887946,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -97,7 +97,9 @@\n             <button mat-raised-button color=\"primary\">Post Update</button> <!-- Button text changed for clarity -->\r\n        \r\n           </div>\r\n         </div>\r\n+\r\n+        \r\n       </div>\r\n     </div>\r\n   </div>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1747010897253,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -98,8 +98,27 @@\n        \r\n           </div>\r\n         </div>\r\n \r\n-        \r\n+        <!-- Comments Section -->\r\n+        <div class=\"task-section\">\r\n+          <h3>Comments</h3>\r\n+          <div class=\"comments-list\">\r\n+            <div class=\"comment-item\" *ngFor=\"let comment of task?.comments\">\r\n+              <div class=\"comment-header\">\r\n+                <span class=\"user\">{{ comment.user }}</span>\r\n+                <span class=\"timestamp\">{{ comment.timestamp | date:'short' }}</span>\r\n+              </div>\r\n+              <p class=\"comment-content\">{{ comment.content }}</p>\r\n+            </div>\r\n+            <div *ngIf=\"!task?.comments || task?.comments?.length === 0\" class=\"no-comments\">\r\n+              No comments yet. Be the first to comment!\r\n+            </div>\r\n+          </div>\r\n+          <div class=\"add-comment-section\"> <!-- Changed class name -->\r\n+            <textarea [(ngModel)]=\"newCommentText\" placeholder=\"Add a public comment...\"></textarea>\r\n+            <button mat-raised-button color=\"primary\" (click)=\"addComment()\">Post Comment</button>\r\n+          </div>\r\n+        </div>\r\n       </div>\r\n     </div>\r\n   </div>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1747020859619,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -80,12 +80,9 @@\n         <div class=\"task-section\">\r\n           <h3>Activity</h3>\r\n           <div class=\"activity-timeline\">\r\n             <div class=\"activity-item\" *ngFor=\"let activity of task?.activities\">\r\n-              <div class=\"activity-header\">\r\n-                <span class=\"user\">{{ activity.user }}</span>\r\n-                <span class=\"timestamp\">{{ activity.timestamp | date:'short' }}</span>\r\n-              </div>\r\n+              \r\n               <p class=\"activity-content\">{{ activity.content }}</p>\r\n               <button class=\"reply-btn\" *ngIf=\"activity.hasReply\">Reply</button>\r\n             </div>\r\n             <div *ngIf=\"!task?.activities || task?.activities?.length === 0\" class=\"no-comments\">\r\n"
                },
                {
                    "date": 1747020867146,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -82,9 +82,9 @@\n           <div class=\"activity-timeline\">\r\n             <div class=\"activity-item\" *ngFor=\"let activity of task?.activities\">\r\n               \r\n               <p class=\"activity-content\">{{ activity.content }}</p>\r\n-              <button class=\"reply-btn\" *ngIf=\"activity.hasReply\">Reply</button>\r\n+              \r\n             </div>\r\n             <div *ngIf=\"!task?.activities || task?.activities?.length === 0\" class=\"no-comments\">\r\n               No activities yet.\r\n             </div>\r\n"
                },
                {
                    "date": 1747020875311,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -81,9 +81,9 @@\n           <h3>Activity</h3>\r\n           <div class=\"activity-timeline\">\r\n             <div class=\"activity-item\" *ngFor=\"let activity of task?.activities\">\r\n               \r\n-              <p class=\"activity-content\">{{ activity.content }}</p>\r\n+              <p class=\"activity-content\">{{ activity.fo }}</p>\r\n               \r\n             </div>\r\n             <div *ngIf=\"!task?.activities || task?.activities?.length === 0\" class=\"no-comments\">\r\n               No activities yet.\r\n"
                },
                {
                    "date": 1747020887566,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -81,9 +81,9 @@\n           <h3>Activity</h3>\r\n           <div class=\"activity-timeline\">\r\n             <div class=\"activity-item\" *ngFor=\"let activity of task?.activities\">\r\n               \r\n-              <p class=\"activity-content\">{{ activity.fo }}</p>\r\n+              <p class=\"activity-content\">{{ activity.formattedMessage }}</p>\r\n               \r\n             </div>\r\n             <div *ngIf=\"!task?.activities || task?.activities?.length === 0\" class=\"no-comments\">\r\n               No activities yet.\r\n"
                },
                {
                    "date": 1747020936089,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,13 +88,9 @@\n             <div *ngIf=\"!task?.activities || task?.activities?.length === 0\" class=\"no-comments\">\r\n               No activities yet.\r\n             </div>\r\n           </div>\r\n-          <div class=\"new-comment\">\r\n-            <textarea placeholder=\"Add an activity update...\"></textarea> <!-- Placeholder text changed for clarity -->\r\n-            <button mat-raised-button color=\"primary\">Post Update</button> <!-- Button text changed for clarity -->\r\n-       \r\n-          </div>\r\n+         \r\n         </div>\r\n \r\n         <!-- Comments Section -->\r\n         <div class=\"task-section\">\r\n"
                },
                {
                    "date": 1747021883939,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -78,19 +78,40 @@\n         \r\n   \r\n         <div class=\"task-section\">\r\n           <h3>Activity</h3>\r\n-          <div class=\"activity-timeline\">\r\n-            <div class=\"activity-item\" *ngFor=\"let activity of task?.activities\">\r\n-              \r\n-              <p class=\"activity-content\">{{ activity.formattedMessage }}</p>\r\n-              \r\n+          <div *ngIf=\"isLoadingActivities\" class=\"loading-indicator\">Loading activities...</div>\r\n+          <div *ngIf=\"!isLoadingActivities\">\r\n+            <div class=\"activity-timeline\">\r\n+              <div class=\"activity-item\" *ngFor=\"let activity of task?.activities\">\r\n+                <div class=\"activity-icon\"\r\n+                     [class.comment-icon]=\"activity.action === 'COMMENT'\"\r\n+                     [class.update-icon]=\"activity.action === 'UPDATE'\"\r\n+                     [class.delete-icon]=\"activity.action === 'DELETE'\"\r\n+                     [class.create-icon]=\"activity.action === 'CREATE'\">\r\n+                  <i *ngIf=\"activity.action === 'COMMENT'\" class=\"bi bi-chat-left-text\"></i>\r\n+                  <i *ngIf=\"activity.action === 'UPDATE'\" class=\"bi bi-pencil-square\"></i>\r\n+                  <i *ngIf=\"activity.action === 'DELETE'\" class=\"bi bi-trash3\"></i>\r\n+                  <i *ngIf=\"activity.action === 'CREATE'\" class=\"bi bi-plus-circle\"></i>\r\n+                  <!-- Fallback icon for other actions -->\r\n+                  <i *ngIf=\"!['COMMENT', 'UPDATE', 'DELETE', 'CREATE'].includes(activity.action)\" class=\"bi bi-bell\"></i>\r\n+                </div>\r\n+                <div class=\"activity-content-wrapper\">\r\n+                  <div class=\"activity-main-info\">\r\n+                    <span class=\"user\" *ngIf=\"activity.username\">{{ activity.username }}</span>\r\n+                    <span class=\"user\" *ngIf=\"!activity.username\">Système</span> <!-- Fallback for system actions -->\r\n+                    <span class=\"action-description\">{{ generateActivityDescription(activity) }}</span>\r\n+                  </div>\r\n+                  <div class=\"activity-meta\">\r\n+                    <span class=\"timestamp\">{{ activity.createdAt | date:'short' }}</span>\r\n+                  </div>\r\n+                </div>\r\n+              </div>\r\n+              <div *ngIf=\"(!task?.activities || task?.activities?.length === 0) && !isLoadingActivities\" class=\"no-comments\">\r\n+                No activities yet.\r\n+              </div>\r\n             </div>\r\n-            <div *ngIf=\"!task?.activities || task?.activities?.length === 0\" class=\"no-comments\">\r\n-              No activities yet.\r\n-            </div>\r\n           </div>\r\n-         \r\n         </div>\r\n \r\n         <!-- Comments Section -->\r\n         <div class=\"task-section\">\r\n"
                },
                {
                    "date": 1747021904576,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -115,19 +115,27 @@\n \r\n         <!-- Comments Section -->\r\n         <div class=\"task-section\">\r\n           <h3>Comments</h3>\r\n-          <div class=\"comments-list\">\r\n-            <div class=\"comment-item\" *ngFor=\"let comment of task?.comments\">\r\n-              <div class=\"comment-header\">\r\n-                <span class=\"user\">{{ comment.user }}</span>\r\n-                <span class=\"timestamp\">{{ comment.timestamp | date:'short' }}</span>\r\n+          <div *ngIf=\"isLoadingComments\" class=\"loading-indicator\">Loading comments...</div>\r\n+          <div *ngIf=\"!isLoadingComments\">\r\n+            <div class=\"comments-list\">\r\n+              <div class=\"comment-item\" *ngFor=\"let comment of task?.comments\">\r\n+                <div class=\"avatar-circle\">\r\n+                  {{ comment.username?.charAt(0).toUpperCase() || '?' }}\r\n+                </div>\r\n+                <div class=\"comment-body\">\r\n+                  <div class=\"comment-header\">\r\n+                    <span class=\"user\">{{ comment.username || 'Utilisateur inconnu' }}</span>\r\n+                    <span class=\"timestamp\">{{ comment.createdAt | date:'short' }}</span>\r\n+                  </div>\r\n+                  <p class=\"comment-content\">{{ comment.content }}</p>\r\n+                </div>\r\n               </div>\r\n-              <p class=\"comment-content\">{{ comment.content }}</p>\r\n+              <div *ngIf=\"(!task?.comments || task?.comments?.length === 0) && !isLoadingComments\" class=\"no-comments\">\r\n+                No comments yet. Be the first to comment!\r\n+              </div>\r\n             </div>\r\n-            <div *ngIf=\"!task?.comments || task?.comments?.length === 0\" class=\"no-comments\">\r\n-              No comments yet. Be the first to comment!\r\n-            </div>\r\n           </div>\r\n           <div class=\"add-comment-section\"> <!-- Changed class name -->\r\n             <textarea [(ngModel)]=\"newCommentText\" placeholder=\"Add a public comment...\"></textarea>\r\n             <button mat-raised-button color=\"primary\" (click)=\"addComment()\">Post Comment</button>\r\n"
                },
                {
                    "date": 1747021945202,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -134,13 +134,12 @@\n               <div *ngIf=\"(!task?.comments || task?.comments?.length === 0) && !isLoadingComments\" class=\"no-comments\">\r\n                 No comments yet. Be the first to comment!\r\n               </div>\r\n             </div>\r\n-          </div>\r\n-          <div class=\"add-comment-section\"> <!-- Changed class name -->\r\n-            <textarea [(ngModel)]=\"newCommentText\" placeholder=\"Add a public comment...\"></textarea>\r\n-            <button mat-raised-button color=\"primary\" (click)=\"addComment()\">Post Comment</button>\r\n-          </div>\r\n+          <div class=\"add-comment-section\">\r\n+              <textarea [(ngModel)]=\"newCommentText\" placeholder=\"Add a public comment...\"></textarea>\r\n+              <button mat-raised-button color=\"primary\" (click)=\"addComment()\">Post Comment</button>\r\n+            </div> </div>\r\n         </div>\r\n       </div>\r\n     </div>\r\n   </div>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1747024104082,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -124,9 +124,9 @@\n                   {{ comment.username?.charAt(0).toUpperCase() || '?' }}\r\n                 </div>\r\n                 <div class=\"comment-body\">\r\n                   <div class=\"comment-header\">\r\n-                    <span class=\"user\">{{ comment.username || 'Utilisateur inconnu' }}</span>\r\n+                    <span class=\"user\">{{ comment.username  }}</span>\r\n                     <span class=\"timestamp\">{{ comment.createdAt | date:'short' }}</span>\r\n                   </div>\r\n                   <p class=\"comment-content\">{{ comment.content }}</p>\r\n                 </div>\r\n@@ -137,9 +137,10 @@\n             </div>\r\n           <div class=\"add-comment-section\">\r\n               <textarea [(ngModel)]=\"newCommentText\" placeholder=\"Add a public comment...\"></textarea>\r\n               <button mat-raised-button color=\"primary\" (click)=\"addComment()\">Post Comment</button>\r\n-            </div> </div>\r\n+            </div>\r\n+           </div>\r\n         </div>\r\n       </div>\r\n     </div>\r\n   </div>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1747025182935,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,16 +35,40 @@\n         </div>\r\n   \r\n         <div class=\"task-section\">\r\n           <h3>Assignees</h3>\r\n-          <div class=\"subtasks-list\">\r\n-            <div class=\"subtask-item\" *ngFor=\"let subtask of subtasks\">\r\n-              <div class=\"subtask-info\">\r\n-                <i class=\"bi bi-check-circle\"></i>\r\n-                <span>{{ subtask.name }}</span>\r\n+          <div *ngIf=\"isLoadingSubtasks\" class=\"loading-indicator\">Loading subtasks...</div>\r\n+          <div *ngIf=\"!isLoadingSubtasks\">\r\n+            <div class=\"subtasks-list detailed-subtasks\">\r\n+              <div class=\"subtask-item\" *ngFor=\"let subtask of subtasks\">\r\n+                <div class=\"subtask-main-info\">\r\n+                  <span class=\"subtask-name\">{{ subtask.name }}</span>\r\n+                  <span class=\"assignee-name\" *ngIf=\"subtask.assignee\">Assigned to: {{ subtask.assignee.username || subtask.assignee }}</span>\r\n+                </div>\r\n+                <div class=\"subtask-details\">\r\n+                  <div class=\"subtask-field\">\r\n+                    <label for=\"subtask-status-{{subtask.id}}\">Status:</label>\r\n+                    <select id=\"subtask-status-{{subtask.id}}\" \r\n+                            class=\"subtask-select\"\r\n+                            [value]=\"subtask.status\"\r\n+                            (change)=\"onSubtaskFieldChange(subtask, 'status', $event)\">\r\n+                      <option *ngFor=\"let status of taskStatusOptions\" [value]=\"status\">{{ status }}</option>\r\n+                    </select>\r\n+                  </div>\r\n+                  <div class=\"subtask-field\">\r\n+                    <label for=\"subtask-priority-{{subtask.id}}\">Priority:</label>\r\n+                    <select id=\"subtask-priority-{{subtask.id}}\"\r\n+                            class=\"subtask-select\"\r\n+                            [value]=\"subtask.priority\"\r\n+                            (change)=\"onSubtaskFieldChange(subtask, 'priority', $event)\">\r\n+                      <option *ngFor=\"let priority of taskPriorityOptions\" [value]=\"priority\">{{ priority }}</option>\r\n+                    </select>\r\n+                  </div>\r\n+                </div>\r\n               </div>\r\n-              <div class=\"assignee\">\r\n-                <span class=\"assignee-name\">{{ subtask.assignee }}</span>\r\n+              <div *ngIf=\"!subtasks || subtasks.length === 0\" class=\"no-comments\">\r\n+                No subtasks assigned.\r\n+\r\n               </div>\r\n             </div>\r\n           </div>\r\n         </div>\r\n"
                },
                {
                    "date": 1747025200517,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -142,9 +142,10 @@\n           <h3>Comments</h3>\r\n           <div *ngIf=\"isLoadingComments\" class=\"loading-indicator\">Loading comments...</div>\r\n           <div *ngIf=\"!isLoadingComments\">\r\n             <div class=\"comments-list\">\r\n-              <div class=\"comment-item\" *ngFor=\"let comment of task?.comments\">\r\n+             <div class=\"comment-item\" *ngFor=\"let comment of task?.comments\" [class.editing]=\"editingCommentId === comment.id\">\r\n+               \r\n                 <div class=\"avatar-circle\">\r\n                   {{ comment.username?.charAt(0).toUpperCase() || '?' }}\r\n                 </div>\r\n                 <div class=\"comment-body\">\r\n"
                },
                {
                    "date": 1747025221022,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -148,12 +148,30 @@\n                 <div class=\"avatar-circle\">\r\n                   {{ comment.username?.charAt(0).toUpperCase() || '?' }}\r\n                 </div>\r\n                 <div class=\"comment-body\">\r\n-                  <div class=\"comment-header\">\r\n-                    <span class=\"user\">{{ comment.username  }}</span>\r\n-                    <span class=\"timestamp\">{{ comment.createdAt | date:'short' }}</span>\r\n+                  <div *ngIf=\"editingCommentId !== comment.id\">\r\n+                    <div class=\"comment-header\">\r\n+                      <span class=\"user\">{{ comment.username  }}</span>\r\n+                      <span class=\"timestamp\">{{ comment.createdAt | date:'short' }}</span>\r\n+                    </div>\r\n+                    <p class=\"comment-content\">{{ comment.content }}</p>\r\n                   </div>\r\n+                  <div *ngIf=\"editingCommentId === comment.id\" class=\"edit-comment-area\">\r\n+                    <textarea [(ngModel)]=\"editedCommentContent\" class=\"edit-comment-textarea\" rows=\"3\"></textarea>\r\n+                    <div class=\"edit-comment-actions\">\r\n+                      <button mat-stroked-button color=\"primary\" (click)=\"saveEditComment(comment)\">Save</button>\r\n+                      <button mat-stroked-button (click)=\"cancelEditComment()\">Cancel</button>\r\n+                    </div>\r\n+                  </div>\r\n+                </div>\r\n+                <div class=\"comment-actions\" *ngIf=\"isCurrentUserComment(comment) && editingCommentId !== comment.id\">\r\n+                  <button mat-icon-button (click)=\"startEditComment(comment)\" matTooltip=\"Edit comment\">\r\n+                    <i class=\"bi bi-pencil-square\"></i>\r\n+                  </button>\r\n+                  <button mat-icon-button (click)=\"deleteComment(comment.id)\" matTooltip=\"Delete comment\" color=\"warn\">\r\n+                    <i class=\"bi bi-trash3\"></i>\r\n+                  </button> </div>\r\n                   <p class=\"comment-content\">{{ comment.content }}</p>\r\n                 </div>\r\n               </div>\r\n               <div *ngIf=\"(!task?.comments || task?.comments?.length === 0) && !isLoadingComments\" class=\"no-comments\">\r\n"
                },
                {
                    "date": 1747025249112,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -170,10 +170,9 @@\n                   </button>\r\n                   <button mat-icon-button (click)=\"deleteComment(comment.id)\" matTooltip=\"Delete comment\" color=\"warn\">\r\n                     <i class=\"bi bi-trash3\"></i>\r\n                   </button> </div>\r\n-                  <p class=\"comment-content\">{{ comment.content }}</p>\r\n-                </div>\r\n+                 \r\n               </div>\r\n               <div *ngIf=\"(!task?.comments || task?.comments?.length === 0) && !isLoadingComments\" class=\"no-comments\">\r\n                 No comments yet. Be the first to comment!\r\n               </div>\r\n"
                },
                {
                    "date": 1747026818996,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -167,9 +167,9 @@\n                 <div class=\"comment-actions\" *ngIf=\"isCurrentUserComment(comment) && editingCommentId !== comment.id\">\r\n                   <button mat-icon-button (click)=\"startEditComment(comment)\" matTooltip=\"Edit comment\">\r\n                     <i class=\"bi bi-pencil-square\"></i>\r\n                   </button>\r\n-                  <button mat-icon-button (click)=\"deleteComment(comment.id)\" matTooltip=\"Delete comment\" color=\"warn\">\r\n+                  <button mat-icon-button (click)=\"deleteComment(comment)\" matTooltip=\"Delete comment\" color=\"warn\">\r\n                     <i class=\"bi bi-trash3\"></i>\r\n                   </button> </div>\r\n                  \r\n               </div>\r\n"
                },
                {
                    "date": 1747026908869,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -158,18 +158,18 @@\n                   </div>\r\n                   <div *ngIf=\"editingCommentId === comment.id\" class=\"edit-comment-area\">\r\n                     <textarea [(ngModel)]=\"editedCommentContent\" class=\"edit-comment-textarea\" rows=\"3\"></textarea>\r\n                     <div class=\"edit-comment-actions\">\r\n-                      <button mat-stroked-button color=\"primary\" (click)=\"saveEditComment(comment)\">Save</button>\r\n-                      <button mat-stroked-button (click)=\"cancelEditComment()\">Cancel</button>\r\n-                    </div>\r\n+                     <button mat-raised-button color=\"primary\" (click)=\"saveEditComment(comment)\">Save</button>\r\n+                      <button mat-button (click)=\"cancelEditComment()\">Cancel</button>\r\n+              </div>\r\n                   </div>\r\n                 </div>\r\n                 <div class=\"comment-actions\" *ngIf=\"isCurrentUserComment(comment) && editingCommentId !== comment.id\">\r\n                   <button mat-icon-button (click)=\"startEditComment(comment)\" matTooltip=\"Edit comment\">\r\n                     <i class=\"bi bi-pencil-square\"></i>\r\n                   </button>\r\n-                  <button mat-icon-button (click)=\"deleteComment(comment)\" matTooltip=\"Delete comment\" color=\"warn\">\r\n+                  <button mat-icon-button (click)=\"deleteComment(comment.id)\" matTooltip=\"Delete comment\" color=\"warn\">\r\n                     <i class=\"bi bi-trash3\"></i>\r\n                   </button> </div>\r\n                  \r\n               </div>\r\n"
                },
                {
                    "date": 1747026930992,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -167,8 +167,11 @@\n                 <div class=\"comment-actions\" *ngIf=\"isCurrentUserComment(comment) && editingCommentId !== comment.id\">\r\n                   <button mat-icon-button (click)=\"startEditComment(comment)\" matTooltip=\"Edit comment\">\r\n                     <i class=\"bi bi-pencil-square\"></i>\r\n                   </button>\r\n+                  <button mat-icon-button color=\"primary\" (click)=\"startEditComment(comment)\" matTooltip=\"Edit comment\">\r\n+                    <i class=\"bi bi-pencil-square\"></i>\r\n+                  </button>\r\n                   <button mat-icon-button (click)=\"deleteComment(comment.id)\" matTooltip=\"Delete comment\" color=\"warn\">\r\n                     <i class=\"bi bi-trash3\"></i>\r\n                   </button> </div>\r\n                  \r\n"
                },
                {
                    "date": 1747027131324,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -164,11 +164,9 @@\n               </div>\r\n                   </div>\r\n                 </div>\r\n                 <div class=\"comment-actions\" *ngIf=\"isCurrentUserComment(comment) && editingCommentId !== comment.id\">\r\n-                  <button mat-icon-button (click)=\"startEditComment(comment)\" matTooltip=\"Edit comment\">\r\n-                    <i class=\"bi bi-pencil-square\"></i>\r\n-                  </button>\r\n+                  \r\n                   <button mat-icon-button color=\"primary\" (click)=\"startEditComment(comment)\" matTooltip=\"Edit comment\">\r\n                     <i class=\"bi bi-pencil-square\"></i>\r\n                   </button>\r\n                   <button mat-icon-button (click)=\"deleteComment(comment.id)\" matTooltip=\"Delete comment\" color=\"warn\">\r\n"
                },
                {
                    "date": 1747027664593,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,32 +38,38 @@\n           <h3>Assignees</h3>\r\n           <div *ngIf=\"isLoadingSubtasks\" class=\"loading-indicator\">Loading subtasks...</div>\r\n           <div *ngIf=\"!isLoadingSubtasks\">\r\n             <div class=\"subtasks-list detailed-subtasks\">\r\n+              <div class=\"subtask-item-header\" *ngIf=\"subtasks.length > 0\">\r\n+                <span>Subtask Name</span>\r\n+                <span>Dates</span>\r\n+                <span>Priority</span>\r\n+                <span>Status</span>\r\n+              </div>\r\n               <div class=\"subtask-item\" *ngFor=\"let subtask of subtasks\">\r\n-                <div class=\"subtask-main-info\">\r\n-                  <span class=\"subtask-name\">{{ subtask.name }}</span>\r\n-                  <span class=\"assignee-name\" *ngIf=\"subtask.assignee\">Assigned to: {{ subtask.assignee.username || subtask.assignee }}</span>\r\n+                <span class=\"subtask-name\">{{ subtask.name }}</span>\r\n+                <div class=\"subtask-dates\">\r\n+                  <i class=\"bi bi-calendar-range\"></i>\r\n+                  <span>{{ subtask.startDate | date:'dd/MM/yy' }} - {{ subtask.endDate | date:'dd/MM/yy' }}</span>\r\n                 </div>\r\n-                <div class=\"subtask-details\">\r\n-                  <div class=\"subtask-field\">\r\n-                    <label for=\"subtask-status-{{subtask.id}}\">Status:</label>\r\n-                    <select id=\"subtask-status-{{subtask.id}}\" \r\n-                            class=\"subtask-select\"\r\n-                            [value]=\"subtask.status\"\r\n-                            (change)=\"onSubtaskFieldChange(subtask, 'status', $event)\">\r\n-                      <option *ngFor=\"let status of taskStatusOptions\" [value]=\"status\">{{ status }}</option>\r\n-                    </select>\r\n+                <div class=\"subtask-field priority-field\">\r\n+                  <select aria-label=\"Subtask priority\"\r\n+                          class=\"subtask-select priority-select\"\r\n+                          [value]=\"subtask.priority\"\r\n+                          (change)=\"onSubtaskFieldChange(subtask, 'priority', $event)\"\r\n+                          [ngClass]=\"'priority-' + subtask.priority?.toLowerCase()\">\r\n+                    <option *ngFor=\"let priority of taskPriorityOptions\" [value]=\"priority\">{{ priority }}</option>\r\n+                  </select>\r\n+                </div>\r\n+                <div class=\"subtask-field status-field\">\r\n+                  <select aria-label=\"Subtask status\"\r\n+                          class=\"subtask-select status-select\"\r\n+                          [value]=\"subtask.status\"\r\n+                          (change)=\"onSubtaskFieldChange(subtask, 'status', $event)\"\r\n+                          [ngClass]=\"'status-tag-' + subtask.status?.toLowerCase().replace('_', '-')\">\r\n+                    <option *ngFor=\"let status of taskStatusOptions\" [value]=\"status\">{{ status }}</option>\r\n+                  </select>\r\n                   </div>\r\n-                  <div class=\"subtask-field\">\r\n-                    <label for=\"subtask-priority-{{subtask.id}}\">Priority:</label>\r\n-                    <select id=\"subtask-priority-{{subtask.id}}\"\r\n-                            class=\"subtask-select\"\r\n-                            [value]=\"subtask.priority\"\r\n-                            (change)=\"onSubtaskFieldChange(subtask, 'priority', $event)\">\r\n-                      <option *ngFor=\"let priority of taskPriorityOptions\" [value]=\"priority\">{{ priority }}</option>\r\n-                    </select>\r\n-                  </div>\r\n                 </div>\r\n               </div>\r\n               <div *ngIf=\"!subtasks || subtasks.length === 0\" class=\"no-comments\">\r\n                 No subtasks assigned.\r\n"
                },
                {
                    "date": 1747027681095,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,38 +38,32 @@\n           <h3>Assignees</h3>\r\n           <div *ngIf=\"isLoadingSubtasks\" class=\"loading-indicator\">Loading subtasks...</div>\r\n           <div *ngIf=\"!isLoadingSubtasks\">\r\n             <div class=\"subtasks-list detailed-subtasks\">\r\n-              <div class=\"subtask-item-header\" *ngIf=\"subtasks.length > 0\">\r\n-                <span>Subtask Name</span>\r\n-                <span>Dates</span>\r\n-                <span>Priority</span>\r\n-                <span>Status</span>\r\n-              </div>\r\n               <div class=\"subtask-item\" *ngFor=\"let subtask of subtasks\">\r\n-                <span class=\"subtask-name\">{{ subtask.name }}</span>\r\n-                <div class=\"subtask-dates\">\r\n-                  <i class=\"bi bi-calendar-range\"></i>\r\n-                  <span>{{ subtask.startDate | date:'dd/MM/yy' }} - {{ subtask.endDate | date:'dd/MM/yy' }}</span>\r\n+                <div class=\"subtask-main-info\">\r\n+                  <span class=\"subtask-name\">{{ subtask.name }}</span>\r\n+                  <span class=\"assignee-name\" *ngIf=\"subtask.assignee\">Assigned to: {{ subtask.assignee.username || subtask.assignee }}</span>\r\n                 </div>\r\n-                <div class=\"subtask-field priority-field\">\r\n-                  <select aria-label=\"Subtask priority\"\r\n-                          class=\"subtask-select priority-select\"\r\n-                          [value]=\"subtask.priority\"\r\n-                          (change)=\"onSubtaskFieldChange(subtask, 'priority', $event)\"\r\n-                          [ngClass]=\"'priority-' + subtask.priority?.toLowerCase()\">\r\n-                    <option *ngFor=\"let priority of taskPriorityOptions\" [value]=\"priority\">{{ priority }}</option>\r\n-                  </select>\r\n-                </div>\r\n-                <div class=\"subtask-field status-field\">\r\n-                  <select aria-label=\"Subtask status\"\r\n-                          class=\"subtask-select status-select\"\r\n-                          [value]=\"subtask.status\"\r\n-                          (change)=\"onSubtaskFieldChange(subtask, 'status', $event)\"\r\n-                          [ngClass]=\"'status-tag-' + subtask.status?.toLowerCase().replace('_', '-')\">\r\n-                    <option *ngFor=\"let status of taskStatusOptions\" [value]=\"status\">{{ status }}</option>\r\n-                  </select>\r\n+                <div class=\"subtask-details\">\r\n+                  <div class=\"subtask-field\">\r\n+                    <label for=\"subtask-status-{{subtask.id}}\">Status:</label>\r\n+                    <select id=\"subtask-status-{{subtask.id}}\" \r\n+                            class=\"subtask-select\"\r\n+                            [value]=\"subtask.status\"\r\n+                            (change)=\"onSubtaskFieldChange(subtask, 'status', $event)\">\r\n+                      <option *ngFor=\"let status of taskStatusOptions\" [value]=\"status\">{{ status }}</option>\r\n+                    </select>\r\n                   </div>\r\n+                  <div class=\"subtask-field\">\r\n+                    <label for=\"subtask-priority-{{subtask.id}}\">Priority:</label>\r\n+                    <select id=\"subtask-priority-{{subtask.id}}\"\r\n+                            class=\"subtask-select\"\r\n+                            [value]=\"subtask.priority\"\r\n+                            (change)=\"onSubtaskFieldChange(subtask, 'priority', $event)\">\r\n+                      <option *ngFor=\"let priority of taskPriorityOptions\" [value]=\"priority\">{{ priority }}</option>\r\n+                    </select>\r\n+                  </div>\r\n                 </div>\r\n               </div>\r\n               <div *ngIf=\"!subtasks || subtasks.length === 0\" class=\"no-comments\">\r\n                 No subtasks assigned.\r\n"
                },
                {
                    "date": 1747027693915,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -164,9 +164,11 @@\n               </div>\r\n                   </div>\r\n                 </div>\r\n                 <div class=\"comment-actions\" *ngIf=\"isCurrentUserComment(comment) && editingCommentId !== comment.id\">\r\n-                  \r\n+                  <button mat-icon-button (click)=\"startEditComment(comment)\" matTooltip=\"Edit comment\">\r\n+                    <i class=\"bi bi-pencil-square\"></i>\r\n+                  </button>\r\n                   <button mat-icon-button color=\"primary\" (click)=\"startEditComment(comment)\" matTooltip=\"Edit comment\">\r\n                     <i class=\"bi bi-pencil-square\"></i>\r\n                   </button>\r\n                   <button mat-icon-button (click)=\"deleteComment(comment.id)\" matTooltip=\"Delete comment\" color=\"warn\">\r\n"
                },
                {
                    "date": 1747027940496,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,32 +38,38 @@\n           <h3>Assignees</h3>\r\n           <div *ngIf=\"isLoadingSubtasks\" class=\"loading-indicator\">Loading subtasks...</div>\r\n           <div *ngIf=\"!isLoadingSubtasks\">\r\n             <div class=\"subtasks-list detailed-subtasks\">\r\n+              <div class=\"subtask-item-header\" *ngIf=\"subtasks.length > 0\">\r\n+                <span>Subtask Name</span>\r\n+                <span>Dates</span>\r\n+                <span>Priority</span>\r\n+                <span>Status</span>\r\n+              </div>\r\n               <div class=\"subtask-item\" *ngFor=\"let subtask of subtasks\">\r\n-                <div class=\"subtask-main-info\">\r\n-                  <span class=\"subtask-name\">{{ subtask.name }}</span>\r\n-                  <span class=\"assignee-name\" *ngIf=\"subtask.assignee\">Assigned to: {{ subtask.assignee.username || subtask.assignee }}</span>\r\n+                <span class=\"subtask-name\">{{ subtask.name }}</span>\r\n+                <div class=\"subtask-dates\">\r\n+                  <i class=\"bi bi-calendar-range\"></i>\r\n+                  <span>{{ subtask.startDate | date:'dd/MM/yy' }} - {{ subtask.endDate | date:'dd/MM/yy' }}</span>\r\n                 </div>\r\n-                <div class=\"subtask-details\">\r\n-                  <div class=\"subtask-field\">\r\n-                    <label for=\"subtask-status-{{subtask.id}}\">Status:</label>\r\n-                    <select id=\"subtask-status-{{subtask.id}}\" \r\n-                            class=\"subtask-select\"\r\n-                            [value]=\"subtask.status\"\r\n-                            (change)=\"onSubtaskFieldChange(subtask, 'status', $event)\">\r\n-                      <option *ngFor=\"let status of taskStatusOptions\" [value]=\"status\">{{ status }}</option>\r\n-                    </select>\r\n+                <div class=\"subtask-field priority-field\">\r\n+                  <select aria-label=\"Subtask priority\"\r\n+                          class=\"subtask-select priority-select\"\r\n+                          [value]=\"subtask.priority\"\r\n+                          (change)=\"onSubtaskFieldChange(subtask, 'priority', $event)\"\r\n+                          [ngClass]=\"'priority-' + subtask.priority?.toLowerCase()\">\r\n+                    <option *ngFor=\"let priority of taskPriorityOptions\" [value]=\"priority\">{{ priority }}</option>\r\n+                  </select>\r\n+                </div>\r\n+                <div class=\"subtask-field status-field\">\r\n+                  <select aria-label=\"Subtask status\"\r\n+                          class=\"subtask-select status-select\"\r\n+                          [value]=\"subtask.status\"\r\n+                          (change)=\"onSubtaskFieldChange(subtask, 'status', $event)\"\r\n+                          [ngClass]=\"'status-tag-' + subtask.status?.toLowerCase().replace('_', '-')\">\r\n+                    <option *ngFor=\"let status of taskStatusOptions\" [value]=\"status\">{{ status }}</option>\r\n+                  </select>\r\n                   </div>\r\n-                  <div class=\"subtask-field\">\r\n-                    <label for=\"subtask-priority-{{subtask.id}}\">Priority:</label>\r\n-                    <select id=\"subtask-priority-{{subtask.id}}\"\r\n-                            class=\"subtask-select\"\r\n-                            [value]=\"subtask.priority\"\r\n-                            (change)=\"onSubtaskFieldChange(subtask, 'priority', $event)\">\r\n-                      <option *ngFor=\"let priority of taskPriorityOptions\" [value]=\"priority\">{{ priority }}</option>\r\n-                    </select>\r\n-                  </div>\r\n                 </div>\r\n               </div>\r\n               <div *ngIf=\"!subtasks || subtasks.length === 0\" class=\"no-comments\">\r\n                 No subtasks assigned.\r\n@@ -164,11 +170,9 @@\n               </div>\r\n                   </div>\r\n                 </div>\r\n                 <div class=\"comment-actions\" *ngIf=\"isCurrentUserComment(comment) && editingCommentId !== comment.id\">\r\n-                  <button mat-icon-button (click)=\"startEditComment(comment)\" matTooltip=\"Edit comment\">\r\n-                    <i class=\"bi bi-pencil-square\"></i>\r\n-                  </button>\r\n+                  \r\n                   <button mat-icon-button color=\"primary\" (click)=\"startEditComment(comment)\" matTooltip=\"Edit comment\">\r\n                     <i class=\"bi bi-pencil-square\"></i>\r\n                   </button>\r\n                   <button mat-icon-button (click)=\"deleteComment(comment.id)\" matTooltip=\"Delete comment\" color=\"warn\">\r\n@@ -187,5 +191,5 @@\n            </div>\r\n         </div>\r\n       </div>\r\n     </div>\r\n-  </div>\n\\ No newline at end of file\n+ \n\\ No newline at end of file\n"
                },
                {
                    "date": 1747028051161,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,38 +38,32 @@\n           <h3>Assignees</h3>\r\n           <div *ngIf=\"isLoadingSubtasks\" class=\"loading-indicator\">Loading subtasks...</div>\r\n           <div *ngIf=\"!isLoadingSubtasks\">\r\n             <div class=\"subtasks-list detailed-subtasks\">\r\n-              <div class=\"subtask-item-header\" *ngIf=\"subtasks.length > 0\">\r\n-                <span>Subtask Name</span>\r\n-                <span>Dates</span>\r\n-                <span>Priority</span>\r\n-                <span>Status</span>\r\n-              </div>\r\n               <div class=\"subtask-item\" *ngFor=\"let subtask of subtasks\">\r\n-                <span class=\"subtask-name\">{{ subtask.name }}</span>\r\n-                <div class=\"subtask-dates\">\r\n-                  <i class=\"bi bi-calendar-range\"></i>\r\n-                  <span>{{ subtask.startDate | date:'dd/MM/yy' }} - {{ subtask.endDate | date:'dd/MM/yy' }}</span>\r\n+                <div class=\"subtask-main-info\">\r\n+                  <span class=\"subtask-name\">{{ subtask.name }}</span>\r\n+                  <span class=\"assignee-name\" *ngIf=\"subtask.assignee\">Assigned to: {{ subtask.assignee.username || subtask.assignee }}</span>\r\n                 </div>\r\n-                <div class=\"subtask-field priority-field\">\r\n-                  <select aria-label=\"Subtask priority\"\r\n-                          class=\"subtask-select priority-select\"\r\n-                          [value]=\"subtask.priority\"\r\n-                          (change)=\"onSubtaskFieldChange(subtask, 'priority', $event)\"\r\n-                          [ngClass]=\"'priority-' + subtask.priority?.toLowerCase()\">\r\n-                    <option *ngFor=\"let priority of taskPriorityOptions\" [value]=\"priority\">{{ priority }}</option>\r\n-                  </select>\r\n-                </div>\r\n-                <div class=\"subtask-field status-field\">\r\n-                  <select aria-label=\"Subtask status\"\r\n-                          class=\"subtask-select status-select\"\r\n-                          [value]=\"subtask.status\"\r\n-                          (change)=\"onSubtaskFieldChange(subtask, 'status', $event)\"\r\n-                          [ngClass]=\"'status-tag-' + subtask.status?.toLowerCase().replace('_', '-')\">\r\n-                    <option *ngFor=\"let status of taskStatusOptions\" [value]=\"status\">{{ status }}</option>\r\n-                  </select>\r\n+                <div class=\"subtask-details\">\r\n+                  <div class=\"subtask-field\">\r\n+                    <label for=\"subtask-status-{{subtask.id}}\">Status:</label>\r\n+                    <select id=\"subtask-status-{{subtask.id}}\" \r\n+                            class=\"subtask-select\"\r\n+                            [value]=\"subtask.status\"\r\n+                            (change)=\"onSubtaskFieldChange(subtask, 'status', $event)\">\r\n+                      <option *ngFor=\"let status of taskStatusOptions\" [value]=\"status\">{{ status }}</option>\r\n+                    </select>\r\n                   </div>\r\n+                  <div class=\"subtask-field\">\r\n+                    <label for=\"subtask-priority-{{subtask.id}}\">Priority:</label>\r\n+                    <select id=\"subtask-priority-{{subtask.id}}\"\r\n+                            class=\"subtask-select\"\r\n+                            [value]=\"subtask.priority\"\r\n+                            (change)=\"onSubtaskFieldChange(subtask, 'priority', $event)\">\r\n+                      <option *ngFor=\"let priority of taskPriorityOptions\" [value]=\"priority\">{{ priority }}</option>\r\n+                    </select>\r\n+                  </div>\r\n                 </div>\r\n               </div>\r\n               <div *ngIf=\"!subtasks || subtasks.length === 0\" class=\"no-comments\">\r\n                 No subtasks assigned.\r\n@@ -191,5 +185,5 @@\n            </div>\r\n         </div>\r\n       </div>\r\n     </div>\r\n- \n\\ No newline at end of file\n+  </div>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1747028573400,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,9 +34,9 @@\n           </div>\r\n         </div>\r\n   \r\n         <div class=\"task-section\">\r\n-          <h3>Assignees</h3>\r\n+          <h3>Subtasks</h3>\r\n           <div *ngIf=\"isLoadingSubtasks\" class=\"loading-indicator\">Loading subtasks...</div>\r\n           <div *ngIf=\"!isLoadingSubtasks\">\r\n             <div class=\"subtasks-list detailed-subtasks\">\r\n               <div class=\"subtask-item\" *ngFor=\"let subtask of subtasks\">\r\n"
                },
                {
                    "date": 1747028593832,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,13 +38,22 @@\n           <h3>Subtasks</h3>\r\n           <div *ngIf=\"isLoadingSubtasks\" class=\"loading-indicator\">Loading subtasks...</div>\r\n           <div *ngIf=\"!isLoadingSubtasks\">\r\n             <div class=\"subtasks-list detailed-subtasks\">\r\n-              <div class=\"subtask-item\" *ngFor=\"let subtask of subtasks\">\r\n-                <div class=\"subtask-main-info\">\r\n-                  <span class=\"subtask-name\">{{ subtask.name }}</span>\r\n-                  <span class=\"assignee-name\" *ngIf=\"subtask.assignee\">Assigned to: {{ subtask.assignee.username || subtask.assignee }}</span>\r\n-                </div>\r\n+              <div class=\"subtask-item\" *ngFor=\"let subtask of subtasks\" [class.editing]=\"editingSubtaskId === subtask.id\">\r\n+                <!-- Display Mode -->\r\n+                <div class=\"subtask-info-display\" *ngIf=\"editingSubtaskId !== subtask.id\">\r\n+                  <span class=\"subtask-name\" [matTooltip]=\"subtask.name\">{{ subtask.name }}</span>\r\n+                  <span class=\"subtask-date\">{{ subtask.startDate | date:'dd/MM/yy' }} - {{ subtask.endDate | date:'dd/MM/yy' }}</span>\r\n+                  <span class=\"subtask-priority\" [ngClass]=\"subtask.priority?.toLowerCase()\">{{ subtask.priority }}</span>\r\n+                  <span class=\"subtask-status\" [ngClass]=\"subtask.status?.replace('_', '-').toLowerCase()\">{{ subtask.status }}</span>\r\n+                  <div class=\"subtask-actions\">\r\n+                    <button mat-icon-button (click)=\"startEditSubtask(subtask)\" matTooltip=\"Edit Subtask\">\r\n+                      <i class=\"bi bi-pencil\"></i>\r\n+                    </button>\r\n+                    <!-- Placeholder for delete or other actions -->\r\n+                  </div>\r\n+   </div>\r\n                 <div class=\"subtask-details\">\r\n                   <div class=\"subtask-field\">\r\n                     <label for=\"subtask-status-{{subtask.id}}\">Status:</label>\r\n                     <select id=\"subtask-status-{{subtask.id}}\" \r\n"
                },
                {
                    "date": 1747028612570,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -52,18 +52,21 @@\n                     </button>\r\n                     <!-- Placeholder for delete or other actions -->\r\n                   </div>\r\n    </div>\r\n-                <div class=\"subtask-details\">\r\n-                  <div class=\"subtask-field\">\r\n-                    <label for=\"subtask-status-{{subtask.id}}\">Status:</label>\r\n-                    <select id=\"subtask-status-{{subtask.id}}\" \r\n-                            class=\"subtask-select\"\r\n-                            [value]=\"subtask.status\"\r\n-                            (change)=\"onSubtaskFieldChange(subtask, 'status', $event)\">\r\n-                      <option *ngFor=\"let status of taskStatusOptions\" [value]=\"status\">{{ status }}</option>\r\n-                    </select>\r\n+               <!-- Edit Mode -->\r\n+                <div class=\"subtask-info-edit\" *ngIf=\"editingSubtaskId === subtask.id\">\r\n+                  <input type=\"text\" [(ngModel)]=\"editedSubtaskData.name\" placeholder=\"Subtask name\" class=\"form-control form-control-sm subtask-edit-name\">\r\n+                  <div class=\"subtask-edit-dates\">\r\n+                    <input type=\"date\" [(ngModel)]=\"editedSubtaskData.startDate\" class=\"form-control form-control-sm\">\r\n+                    <span>-</span>\r\n+                    <input type=\"date\" [(ngModel)]=\"editedSubtaskData.endDate\" class=\"form-control form-control-sm\">\r\n                   </div>\r\n+                  <div class=\"subtask-edit-selects\">\r\n+                    <select [(ngModel)]=\"editedSubtaskData.priority\" class=\"form-select form-select-sm\">\r\n+                      <option *ngFor=\"let p of taskPriorityOptions\" [value]=\"p\">{{p}}</option>\r\n+                            </select>\r\n+                  </div>\r\n                   <div class=\"subtask-field\">\r\n                     <label for=\"subtask-priority-{{subtask.id}}\">Priority:</label>\r\n                     <select id=\"subtask-priority-{{subtask.id}}\"\r\n                             class=\"subtask-select\"\r\n"
                },
                {
                    "date": 1747028628883,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -64,18 +64,12 @@\n                   <div class=\"subtask-edit-selects\">\r\n                     <select [(ngModel)]=\"editedSubtaskData.priority\" class=\"form-select form-select-sm\">\r\n                       <option *ngFor=\"let p of taskPriorityOptions\" [value]=\"p\">{{p}}</option>\r\n                             </select>\r\n+                  <select [(ngModel)]=\"editedSubtaskData.status\" class=\"form-select form-select-sm\">\r\n+                      <option *ngFor=\"let s of taskStatusOptions\" [value]=\"s\">{{s}}</option>\r\n+                         </select>\r\n                   </div>\r\n-                  <div class=\"subtask-field\">\r\n-                    <label for=\"subtask-priority-{{subtask.id}}\">Priority:</label>\r\n-                    <select id=\"subtask-priority-{{subtask.id}}\"\r\n-                            class=\"subtask-select\"\r\n-                            [value]=\"subtask.priority\"\r\n-                            (change)=\"onSubtaskFieldChange(subtask, 'priority', $event)\">\r\n-                      <option *ngFor=\"let priority of taskPriorityOptions\" [value]=\"priority\">{{ priority }}</option>\r\n-                    </select>\r\n-                  </div>\r\n                 </div>\r\n               </div>\r\n               <div *ngIf=\"!subtasks || subtasks.length === 0\" class=\"no-comments\">\r\n                 No subtasks assigned.\r\n"
                },
                {
                    "date": 1747028636273,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -68,8 +68,9 @@\n                   <select [(ngModel)]=\"editedSubtaskData.status\" class=\"form-select form-select-sm\">\r\n                       <option *ngFor=\"let s of taskStatusOptions\" [value]=\"s\">{{s}}</option>\r\n                          </select>\r\n                   </div>\r\n+                  \r\n                 </div>\r\n               </div>\r\n               <div *ngIf=\"!subtasks || subtasks.length === 0\" class=\"no-comments\">\r\n                 No subtasks assigned.\r\n"
                },
                {
                    "date": 1747028641812,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -68,9 +68,17 @@\n                   <select [(ngModel)]=\"editedSubtaskData.status\" class=\"form-select form-select-sm\">\r\n                       <option *ngFor=\"let s of taskStatusOptions\" [value]=\"s\">{{s}}</option>\r\n                          </select>\r\n                   </div>\r\n-                  \r\n+                  <div class=\"subtask-actions-edit\">\r\n+                    <button mat-icon-button color=\"primary\" (click)=\"saveSubtaskEdit()\" matTooltip=\"Save Changes\">\r\n+                      <i class=\"bi bi-check-lg\"></i>\r\n+                    </button>\r\n+                    <button mat-icon-button (click)=\"cancelSubtaskEdit()\" matTooltip=\"Cancel Edit\">\r\n+                      <i class=\"bi bi-x-lg\"></i>\r\n+                    </button>\r\n+                  </div>\r\n+\r\n                 </div>\r\n               </div>\r\n               <div *ngIf=\"!subtasks || subtasks.length === 0\" class=\"no-comments\">\r\n                 No subtasks assigned.\r\n"
                },
                {
                    "date": 1747028657512,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,9 +88,9 @@\n           </div>\r\n         </div>\r\n   \r\n         <div class=\"task-section\">\r\n-          <h3>Attachments</h3>\r\n+           <h3><i class=\"bi bi-paperclip\"></i> Attachments</h3>\r\n           <div class=\"attachments-list\">\r\n             <div class=\"attachment-item\" *ngFor=\"let attachment of task?.attachments\">\r\n               <i class=\"bi bi-paperclip\"></i>\r\n               <div class=\"attachment-info\">\r\n"
                },
                {
                    "date": 1747028675733,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -107,9 +107,10 @@\n   \r\n       <!-- Right Column -->\r\n       <div class=\"task-right-column\">\r\n         <div class=\"task-section\">\r\n-          <h3>Task Overview</h3>\r\n+           <h3><i class=\"bi bi-text-left\"></i> Task Overview</h3>\r\n+       \r\n           <p class=\"task-description\">{{ task?.description }}</p>\r\n         </div>\r\n   \r\n        \r\n"
                },
                {
                    "date": 1747028682055,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -107,9 +107,9 @@\n   \r\n       <!-- Right Column -->\r\n       <div class=\"task-right-column\">\r\n         <div class=\"task-section\">\r\n-           <h3><i class=\"bi bi-text-left\"></i> Task Overview</h3>\r\n+           <h3><i class=\"bi bi-text-left\"></i> Desc</h3>\r\n        \r\n           <p class=\"task-description\">{{ task?.description }}</p>\r\n         </div>\r\n   \r\n"
                },
                {
                    "date": 1747029460402,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -107,9 +107,9 @@\n   \r\n       <!-- Right Column -->\r\n       <div class=\"task-right-column\">\r\n         <div class=\"task-section\">\r\n-           <h3><i class=\"bi bi-text-left\"></i> Desc</h3>\r\n+           <h3><i class=\"bi bi-text-left\"></i> Description</h3>\r\n        \r\n           <p class=\"task-description\">{{ task?.description }}</p>\r\n         </div>\r\n   \r\n@@ -117,9 +117,9 @@\n   \r\n         \r\n   \r\n         <div class=\"task-section\">\r\n-          <h3>Activity</h3>\r\n+          <h3>His</h3>\r\n           <div *ngIf=\"isLoadingActivities\" class=\"loading-indicator\">Loading activities...</div>\r\n           <div *ngIf=\"!isLoadingActivities\">\r\n             <div class=\"activity-timeline\">\r\n               <div class=\"activity-item\" *ngFor=\"let activity of task?.activities\">\r\n"
                },
                {
                    "date": 1747029468098,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -117,9 +117,9 @@\n   \r\n         \r\n   \r\n         <div class=\"task-section\">\r\n-          <h3>His</h3>\r\n+          <h3>Historiques</h3>\r\n           <div *ngIf=\"isLoadingActivities\" class=\"loading-indicator\">Loading activities...</div>\r\n           <div *ngIf=\"!isLoadingActivities\">\r\n             <div class=\"activity-timeline\">\r\n               <div class=\"activity-item\" *ngFor=\"let activity of task?.activities\">\r\n"
                },
                {
                    "date": 1747029776528,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,12 +15,10 @@\n     </div>\r\n   \r\n     <div class=\"task-content\">\r\n       <!-- Left Column -->\r\n-      <div class=\"task-left-column\">\r\n-        \r\n+     <div class=\"task-column task-main-details-column\">\r\n        \r\n-  \r\n         <div class=\"task-section\">\r\n           \r\n           <div class=\"date-range\">\r\n             <div class=\"date-item\">\r\n"
                },
                {
                    "date": 1747029798078,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,9 +30,12 @@\n               <p>{{ task?.endDate | date:'mediumDate' }}</p>\r\n             </div>\r\n           </div>\r\n         </div>\r\n-  \r\n+  <div class=\"task-section\">\r\n+          <h3><i class=\"bi bi-text-left\"></i> Description</h3>\r\n+          <p class=\"task-description\">{{ task?.description }}</p>\r\n+        </div>\r\n         <div class=\"task-section\">\r\n           <h3>Subtasks</h3>\r\n           <div *ngIf=\"isLoadingSubtasks\" class=\"loading-indicator\">Loading subtasks...</div>\r\n           <div *ngIf=\"!isLoadingSubtasks\">\r\n"
                },
                {
                    "date": 1747029818093,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -105,20 +105,12 @@\n           </div>\r\n         </div>\r\n       </div>\r\n   \r\n-      <!-- Right Column -->\r\n-      <div class=\"task-right-column\">\r\n-        <div class=\"task-section\">\r\n-           <h3><i class=\"bi bi-text-left\"></i> Description</h3>\r\n-       \r\n-          <p class=\"task-description\">{{ task?.description }}</p>\r\n-        </div>\r\n+      <!-- Middle Column: Comments -->\r\n+      <div class=\"task-column task-comments-column\">\r\n+      \r\n   \r\n-       \r\n-  \r\n-        \r\n-  \r\n         <div class=\"task-section\">\r\n           <h3>Historiques</h3>\r\n           <div *ngIf=\"isLoadingActivities\" class=\"loading-indicator\">Loading activities...</div>\r\n           <div *ngIf=\"!isLoadingActivities\">\r\n"
                },
                {
                    "date": 1747029840669,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -145,10 +145,12 @@\n             </div>\r\n           </div>\r\n         </div>\r\n \r\n-        <!-- Comments Section -->\r\n-        <div class=\"task-section\">\r\n+        </div>\r\n+      <!-- Right Column: Activity History -->\r\n+      <div class=\"task-column task-activity-column\">\r\n+         <div class=\"task-section\">\r\n           <h3>Comments</h3>\r\n           <div *ngIf=\"isLoadingComments\" class=\"loading-indicator\">Loading comments...</div>\r\n           <div *ngIf=\"!isLoadingComments\">\r\n             <div class=\"comments-list\">\r\n"
                },
                {
                    "date": 1747030443462,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -43,12 +43,12 @@\n               <div class=\"subtask-item\" *ngFor=\"let subtask of subtasks\" [class.editing]=\"editingSubtaskId === subtask.id\">\r\n                 <!-- Display Mode -->\r\n                 <div class=\"subtask-info-display\" *ngIf=\"editingSubtaskId !== subtask.id\">\r\n                   <span class=\"subtask-name\" [matTooltip]=\"subtask.name\">{{ subtask.name }}</span>\r\n-                  <span class=\"subtask-date\">{{ subtask.startDate | date:'dd/MM/yy' }} - {{ subtask.endDate | date:'dd/MM/yy' }}</span>\r\n-                  <span class=\"subtask-priority\" [ngClass]=\"subtask.priority?.toLowerCase()\">{{ subtask.priority }}</span>\r\n-                  <span class=\"subtask-status\" [ngClass]=\"subtask.status?.replace('_', '-').toLowerCase()\">{{ subtask.status }}</span>\r\n-                  <div class=\"subtask-actions\">\r\n+                  <span class=\"subtask-dates\">{{ subtask.startDate | date:'dd/MM/yy' }} - {{ subtask.endDate | date:'dd/MM/yy' }}</span>\r\n+                  <span class=\"subtask-priority-badge\" [ngClass]=\"subtask.priority?.toLowerCase()\">{{ subtask.priority }}</span>\r\n+                  <span class=\"subtask-status-badge\" [ngClass]=\"subtask.status?.replace('_', '-').toLowerCase()\">{{ subtask.status }}</span>\r\n+                   <div class=\"subtask-actions\">\r\n                     <button mat-icon-button (click)=\"startEditSubtask(subtask)\" matTooltip=\"Edit Subtask\">\r\n                       <i class=\"bi bi-pencil\"></i>\r\n                     </button>\r\n                     <!-- Placeholder for delete or other actions -->\r\n"
                },
                {
                    "date": 1747030457509,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,10 +47,11 @@\n                   <span class=\"subtask-dates\">{{ subtask.startDate | date:'dd/MM/yy' }} - {{ subtask.endDate | date:'dd/MM/yy' }}</span>\r\n                   <span class=\"subtask-priority-badge\" [ngClass]=\"subtask.priority?.toLowerCase()\">{{ subtask.priority }}</span>\r\n                   <span class=\"subtask-status-badge\" [ngClass]=\"subtask.status?.replace('_', '-').toLowerCase()\">{{ subtask.status }}</span>\r\n                    <div class=\"subtask-actions\">\r\n-                    <button mat-icon-button (click)=\"startEditSubtask(subtask)\" matTooltip=\"Edit Subtask\">\r\n-                      <i class=\"bi bi-pencil\"></i>\r\n+                    <button mat-icon-button class=\"edit-btn-subtask\" (click)=\"startEditSubtask(subtask); $event.stopPropagation()\" matTooltip=\"Modifier la sous-tâche\">\r\n+                      <i class=\"bi bi-pencil icon\"></i>\r\n+                 \r\n                     </button>\r\n                     <!-- Placeholder for delete or other actions -->\r\n                   </div>\r\n    </div>\r\n"
                },
                {
                    "date": 1747030469577,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,9 +51,11 @@\n                     <button mat-icon-button class=\"edit-btn-subtask\" (click)=\"startEditSubtask(subtask); $event.stopPropagation()\" matTooltip=\"Modifier la sous-tâche\">\r\n                       <i class=\"bi bi-pencil icon\"></i>\r\n                  \r\n                     </button>\r\n-                    <!-- Placeholder for delete or other actions -->\r\n+                    <button mat-icon-button class=\"delete-btn-subtask\" (click)=\"deleteSubtask(subtask.id, subtask.name); $event.stopPropagation()\" matTooltip=\"Supprimer la sous-tâche\">\r\n+                      <i class=\"bi bi-trash icon\"></i>\r\n+                    </button>\r\n                   </div>\r\n    </div>\r\n                <!-- Edit Mode -->\r\n                 <div class=\"subtask-info-edit\" *ngIf=\"editingSubtaskId === subtask.id\">\r\n"
                },
                {
                    "date": 1747030485231,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,10 +58,10 @@\n                   </div>\r\n    </div>\r\n                <!-- Edit Mode -->\r\n                 <div class=\"subtask-info-edit\" *ngIf=\"editingSubtaskId === subtask.id\">\r\n-                  <input type=\"text\" [(ngModel)]=\"editedSubtaskData.name\" placeholder=\"Subtask name\" class=\"form-control form-control-sm subtask-edit-name\">\r\n-                  <div class=\"subtask-edit-dates\">\r\n+                 <input type=\"text\" [(ngModel)]=\"editedSubtaskData.name\" placeholder=\"Nom de la sous-tâche\" class=\"form-control form-control-sm subtask-edit-name\">\r\n+                   <div class=\"subtask-edit-dates\">\r\n                     <input type=\"date\" [(ngModel)]=\"editedSubtaskData.startDate\" class=\"form-control form-control-sm\">\r\n                     <span>-</span>\r\n                     <input type=\"date\" [(ngModel)]=\"editedSubtaskData.endDate\" class=\"form-control form-control-sm\">\r\n                   </div>\r\n"
                },
                {
                    "date": 1747030498082,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -65,10 +65,10 @@\n                     <span>-</span>\r\n                     <input type=\"date\" [(ngModel)]=\"editedSubtaskData.endDate\" class=\"form-control form-control-sm\">\r\n                   </div>\r\n                   <div class=\"subtask-edit-selects\">\r\n-                    <select [(ngModel)]=\"editedSubtaskData.priority\" class=\"form-select form-select-sm\">\r\n-                      <option *ngFor=\"let p of taskPriorityOptions\" [value]=\"p\">{{p}}</option>\r\n+                   <select [(ngModel)]=\"editedSubtaskData.priority\" class=\"form-select form-select-sm subtask-edit-priority\">\r\n+                       <option *ngFor=\"let p of taskPriorityOptions\" [value]=\"p\">{{p}}</option>\r\n                             </select>\r\n                   <select [(ngModel)]=\"editedSubtaskData.status\" class=\"form-select form-select-sm\">\r\n                       <option *ngFor=\"let s of taskStatusOptions\" [value]=\"s\">{{s}}</option>\r\n                          </select>\r\n"
                },
                {
                    "date": 1747030512577,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -67,11 +67,11 @@\n                   </div>\r\n                   <div class=\"subtask-edit-selects\">\r\n                    <select [(ngModel)]=\"editedSubtaskData.priority\" class=\"form-select form-select-sm subtask-edit-priority\">\r\n                        <option *ngFor=\"let p of taskPriorityOptions\" [value]=\"p\">{{p}}</option>\r\n-                            </select>\r\n-                  <select [(ngModel)]=\"editedSubtaskData.status\" class=\"form-select form-select-sm\">\r\n-                      <option *ngFor=\"let s of taskStatusOptions\" [value]=\"s\">{{s}}</option>\r\n+                              </select>\r\n+                    <select [(ngModel)]=\"editedSubtaskData.status\" class=\"form-select form-select-sm subtask-edit-status\">\r\n+                              <option *ngFor=\"let s of taskStatusOptions\" [value]=\"s\">{{s}}</option>\r\n                          </select>\r\n                   </div>\r\n                   <div class=\"subtask-actions-edit\">\r\n                     <button mat-icon-button color=\"primary\" (click)=\"saveSubtaskEdit()\" matTooltip=\"Save Changes\">\r\n"
                },
                {
                    "date": 1747030540893,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -73,10 +73,11 @@\n                               <option *ngFor=\"let s of taskStatusOptions\" [value]=\"s\">{{s}}</option>\r\n                          </select>\r\n                   </div>\r\n                   <div class=\"subtask-actions-edit\">\r\n-                    <button mat-icon-button color=\"primary\" (click)=\"saveSubtaskEdit()\" matTooltip=\"Save Changes\">\r\n-                      <i class=\"bi bi-check-lg\"></i>\r\n+                     <button mat-icon-button class=\"save-btn-subtask\" (click)=\"saveSubtaskEdit()\" matTooltip=\"Enregistrer\">\r\n+                      <i class=\"bi bi-check-lg icon\"></i>\r\n+                  \r\n                     </button>\r\n                     <button mat-icon-button (click)=\"cancelSubtaskEdit()\" matTooltip=\"Cancel Edit\">\r\n                       <i class=\"bi bi-x-lg\"></i>\r\n                     </button>\r\n"
                },
                {
                    "date": 1747030554397,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -77,11 +77,11 @@\n                      <button mat-icon-button class=\"save-btn-subtask\" (click)=\"saveSubtaskEdit()\" matTooltip=\"Enregistrer\">\r\n                       <i class=\"bi bi-check-lg icon\"></i>\r\n                   \r\n                     </button>\r\n-                    <button mat-icon-button (click)=\"cancelSubtaskEdit()\" matTooltip=\"Cancel Edit\">\r\n-                      <i class=\"bi bi-x-lg\"></i>\r\n-                    </button>\r\n+                    <button mat-icon-button class=\"cancel-btn-subtask\" (click)=\"cancelSubtaskEdit()\" matTooltip=\"Annuler\">\r\n+                      <i class=\"bi bi-x-lg icon\"></i>\r\n+                   </button>\r\n                   </div>\r\n \r\n                 </div>\r\n               </div>\r\n"
                },
                {
                    "date": 1747030563519,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -85,9 +85,10 @@\n \r\n                 </div>\r\n               </div>\r\n               <div *ngIf=\"!subtasks || subtasks.length === 0\" class=\"no-comments\">\r\n-                No subtasks assigned.\r\n+              \r\n+                Aucune sous-tâche assignée.\r\n \r\n               </div>\r\n             </div>\r\n           </div>\r\n"
                },
                {
                    "date": 1747031276537,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -111,48 +111,9 @@\n         </div>\r\n       </div>\r\n   \r\n       <!-- Middle Column: Comments -->\r\n-      <div class=\"task-column task-comments-column\">\r\n       \r\n-  \r\n-        <div class=\"task-section\">\r\n-          <h3>Historiques</h3>\r\n-          <div *ngIf=\"isLoadingActivities\" class=\"loading-indicator\">Loading activities...</div>\r\n-          <div *ngIf=\"!isLoadingActivities\">\r\n-            <div class=\"activity-timeline\">\r\n-              <div class=\"activity-item\" *ngFor=\"let activity of task?.activities\">\r\n-                <div class=\"activity-icon\"\r\n-                     [class.comment-icon]=\"activity.action === 'COMMENT'\"\r\n-                     [class.update-icon]=\"activity.action === 'UPDATE'\"\r\n-                     [class.delete-icon]=\"activity.action === 'DELETE'\"\r\n-                     [class.create-icon]=\"activity.action === 'CREATE'\">\r\n-                  <i *ngIf=\"activity.action === 'COMMENT'\" class=\"bi bi-chat-left-text\"></i>\r\n-                  <i *ngIf=\"activity.action === 'UPDATE'\" class=\"bi bi-pencil-square\"></i>\r\n-                  <i *ngIf=\"activity.action === 'DELETE'\" class=\"bi bi-trash3\"></i>\r\n-                  <i *ngIf=\"activity.action === 'CREATE'\" class=\"bi bi-plus-circle\"></i>\r\n-                  <!-- Fallback icon for other actions -->\r\n-                  <i *ngIf=\"!['COMMENT', 'UPDATE', 'DELETE', 'CREATE'].includes(activity.action)\" class=\"bi bi-bell\"></i>\r\n-                </div>\r\n-                <div class=\"activity-content-wrapper\">\r\n-                  <div class=\"activity-main-info\">\r\n-                    <span class=\"user\" *ngIf=\"activity.username\">{{ activity.username }}</span>\r\n-                    <span class=\"user\" *ngIf=\"!activity.username\">Système</span> <!-- Fallback for system actions -->\r\n-                    <span class=\"action-description\">{{ generateActivityDescription(activity) }}</span>\r\n-                  </div>\r\n-                  <div class=\"activity-meta\">\r\n-                    <span class=\"timestamp\">{{ activity.createdAt | date:'short' }}</span>\r\n-                  </div>\r\n-                </div>\r\n-              </div>\r\n-              <div *ngIf=\"(!task?.activities || task?.activities?.length === 0) && !isLoadingActivities\" class=\"no-comments\">\r\n-                No activities yet.\r\n-              </div>\r\n-            </div>\r\n-          </div>\r\n-        </div>\r\n-\r\n-        </div>\r\n       <!-- Right Column: Activity History -->\r\n       <div class=\"task-column task-activity-column\">\r\n          <div class=\"task-section\">\r\n           <h3>Comments</h3>\r\n"
                },
                {
                    "date": 1747031318037,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -111,9 +111,48 @@\n         </div>\r\n       </div>\r\n   \r\n       <!-- Middle Column: Comments -->\r\n+      <div class=\"task-column task-comments-column\">\r\n       \r\n+  \r\n+        <div class=\"task-section\">\r\n+          <h3>Historiques</h3>\r\n+          <div *ngIf=\"isLoadingActivities\" class=\"loading-indicator\">Loading activities...</div>\r\n+          <div *ngIf=\"!isLoadingActivities\">\r\n+            <div class=\"activity-timeline\">\r\n+              <div class=\"activity-item\" *ngFor=\"let activity of task?.activities\">\r\n+                <div class=\"activity-icon\"\r\n+                     [class.comment-icon]=\"activity.action === 'COMMENT'\"\r\n+                     [class.update-icon]=\"activity.action === 'UPDATE'\"\r\n+                     [class.delete-icon]=\"activity.action === 'DELETE'\"\r\n+                     [class.create-icon]=\"activity.action === 'CREATE'\">\r\n+                  <i *ngIf=\"activity.action === 'COMMENT'\" class=\"bi bi-chat-left-text\"></i>\r\n+                  <i *ngIf=\"activity.action === 'UPDATE'\" class=\"bi bi-pencil-square\"></i>\r\n+                  <i *ngIf=\"activity.action === 'DELETE'\" class=\"bi bi-trash3\"></i>\r\n+                  <i *ngIf=\"activity.action === 'CREATE'\" class=\"bi bi-plus-circle\"></i>\r\n+                  <!-- Fallback icon for other actions -->\r\n+                  <i *ngIf=\"!['COMMENT', 'UPDATE', 'DELETE', 'CREATE'].includes(activity.action)\" class=\"bi bi-bell\"></i>\r\n+                </div>\r\n+                <div class=\"activity-content-wrapper\">\r\n+                  <div class=\"activity-main-info\">\r\n+                    <span class=\"user\" *ngIf=\"activity.username\">{{ activity.username }}</span>\r\n+                    <span class=\"user\" *ngIf=\"!activity.username\">Système</span> <!-- Fallback for system actions -->\r\n+                    <span class=\"action-description\">{{ generateActivityDescription(activity) }}</span>\r\n+                  </div>\r\n+                  <div class=\"activity-meta\">\r\n+                    <span class=\"timestamp\">{{ activity.createdAt | date:'short' }}</span>\r\n+                  </div>\r\n+                </div>\r\n+              </div>\r\n+              <div *ngIf=\"(!task?.activities || task?.activities?.length === 0) && !isLoadingActivities\" class=\"no-comments\">\r\n+                No activities yet.\r\n+              </div>\r\n+            </div>\r\n+          </div>\r\n+        </div>\r\n+\r\n+        </div>\r\n       <!-- Right Column: Activity History -->\r\n       <div class=\"task-column task-activity-column\">\r\n          <div class=\"task-section\">\r\n           <h3>Comments</h3>\r\n"
                },
                {
                    "date": 1747031357454,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -108,8 +108,9 @@\n               </button>\r\n             </div>\r\n           </div>\r\n         </div>\r\n+        \r\n       </div>\r\n   \r\n       <!-- Middle Column: Comments -->\r\n       <div class=\"task-column task-comments-column\">\r\n"
                },
                {
                    "date": 1747031367307,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -108,15 +108,8 @@\n               </button>\r\n             </div>\r\n           </div>\r\n         </div>\r\n-        \r\n-      </div>\r\n-  \r\n-      <!-- Middle Column: Comments -->\r\n-      <div class=\"task-column task-comments-column\">\r\n-      \r\n-  \r\n         <div class=\"task-section\">\r\n           <h3>Historiques</h3>\r\n           <div *ngIf=\"isLoadingActivities\" class=\"loading-indicator\">Loading activities...</div>\r\n           <div *ngIf=\"!isLoadingActivities\">\r\n@@ -150,10 +143,12 @@\n               </div>\r\n             </div>\r\n           </div>\r\n         </div>\r\n-\r\n-        </div>\r\n+      </div>\r\n+  \r\n+      <!-- Middle Column: Comments -->\r\n+     \r\n       <!-- Right Column: Activity History -->\r\n       <div class=\"task-column task-activity-column\">\r\n          <div class=\"task-section\">\r\n           <h3>Comments</h3>\r\n"
                },
                {
                    "date": 1747135842010,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -129,9 +129,9 @@\n                 </div>\r\n                 <div class=\"activity-content-wrapper\">\r\n                   <div class=\"activity-main-info\">\r\n                     <span class=\"user\" *ngIf=\"activity.username\">{{ activity.username }}</span>\r\n-                    <span class=\"user\" *ngIf=\"!activity.username\">Système</span> <!-- Fallback for system actions -->\r\n+                    <span class=\"user\" *ngIf=\"!activity.username\">getusernameById</span> <!-- Fallback for system actions -->\r\n                     <span class=\"action-description\">{{ generateActivityDescription(activity) }}</span>\r\n                   </div>\r\n                   <div class=\"activity-meta\">\r\n                     <span class=\"timestamp\">{{ activity.createdAt | date:'short' }}</span>\r\n"
                },
                {
                    "date": 1747135848691,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -129,9 +129,9 @@\n                 </div>\r\n                 <div class=\"activity-content-wrapper\">\r\n                   <div class=\"activity-main-info\">\r\n                     <span class=\"user\" *ngIf=\"activity.username\">{{ activity.username }}</span>\r\n-                    <span class=\"user\" *ngIf=\"!activity.username\">getusernameById</span> <!-- Fallback for system actions -->\r\n+                    <span class=\"user\" *ngIf=\"!activity.username\">getusernameById(activity.userId)</span> <!-- Fallback for system actions -->\r\n                     <span class=\"action-description\">{{ generateActivityDescription(activity) }}</span>\r\n                   </div>\r\n                   <div class=\"activity-meta\">\r\n                     <span class=\"timestamp\">{{ activity.createdAt | date:'short' }}</span>\r\n"
                },
                {
                    "date": 1747152060597,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -129,9 +129,9 @@\n                 </div>\r\n                 <div class=\"activity-content-wrapper\">\r\n                   <div class=\"activity-main-info\">\r\n                     <span class=\"user\" *ngIf=\"activity.username\">{{ activity.username }}</span>\r\n-                    <span class=\"user\" *ngIf=\"!activity.username\">getusernameById(activity.userId)</span> <!-- Fallback for system actions -->\r\n+                    <span class=\"user\" *ngIf=\"!activity.username\">{{getusernameById(activity.userId)}}</span> <!-- Fallback for system actions -->\r\n                     <span class=\"action-description\">{{ generateActivityDescription(activity) }}</span>\r\n                   </div>\r\n                   <div class=\"activity-meta\">\r\n                     <span class=\"timestamp\">{{ activity.createdAt | date:'short' }}</span>\r\n"
                },
                {
                    "date": 1747152142239,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -128,9 +128,9 @@\n                   <i *ngIf=\"!['COMMENT', 'UPDATE', 'DELETE', 'CREATE'].includes(activity.action)\" class=\"bi bi-bell\"></i>\r\n                 </div>\r\n                 <div class=\"activity-content-wrapper\">\r\n                   <div class=\"activity-main-info\">\r\n-                    <span class=\"user\" *ngIf=\"activity.username\">{{ activity.username }}</span>\r\n+                    <span class=\"user\" *ngIf=\"activity.username\">{{getusernameById(activity.userId)}}</span>\r\n                     <span class=\"user\" *ngIf=\"!activity.username\">{{getusernameById(activity.userId)}}</span> <!-- Fallback for system actions -->\r\n                     <span class=\"action-description\">{{ generateActivityDescription(activity) }}</span>\r\n                   </div>\r\n                   <div class=\"activity-meta\">\r\n"
                },
                {
                    "date": 1747152159533,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -128,9 +128,9 @@\n                   <i *ngIf=\"!['COMMENT', 'UPDATE', 'DELETE', 'CREATE'].includes(activity.action)\" class=\"bi bi-bell\"></i>\r\n                 </div>\r\n                 <div class=\"activity-content-wrapper\">\r\n                   <div class=\"activity-main-info\">\r\n-                    <span class=\"user\" *ngIf=\"activity.username\">{{getusernameById(activity.userId)}}</span>\r\n+                    <span class=\"user\" >{{getusernameById(activity.userId)}}</span>\r\n                     <span class=\"user\" *ngIf=\"!activity.username\">{{getusernameById(activity.userId)}}</span> <!-- Fallback for system actions -->\r\n                     <span class=\"action-description\">{{ generateActivityDescription(activity) }}</span>\r\n                   </div>\r\n                   <div class=\"activity-meta\">\r\n"
                },
                {
                    "date": 1747152218580,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -128,10 +128,12 @@\n                   <i *ngIf=\"!['COMMENT', 'UPDATE', 'DELETE', 'CREATE'].includes(activity.action)\" class=\"bi bi-bell\"></i>\r\n                 </div>\r\n                 <div class=\"activity-content-wrapper\">\r\n                   <div class=\"activity-main-info\">\r\n-                    <span class=\"user\" >{{getusernameById(activity.userId)}}</span>\r\n-                    <span class=\"user\" *ngIf=\"!activity.username\">{{getusernameById(activity.userId)}}</span> <!-- Fallback for system actions -->\r\n+                    <span class=\"user\" >{{getusernameById(activity.\r\n+idUser\r\n+)}}</span>\r\n+                     <!-- Fallback for system actions -->\r\n                     <span class=\"action-description\">{{ generateActivityDescription(activity) }}</span>\r\n                   </div>\r\n                   <div class=\"activity-meta\">\r\n                     <span class=\"timestamp\">{{ activity.createdAt | date:'short' }}</span>\r\n"
                },
                {
                    "date": 1747152562031,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -128,12 +128,10 @@\n                   <i *ngIf=\"!['COMMENT', 'UPDATE', 'DELETE', 'CREATE'].includes(activity.action)\" class=\"bi bi-bell\"></i>\r\n                 </div>\r\n                 <div class=\"activity-content-wrapper\">\r\n                   <div class=\"activity-main-info\">\r\n-                    <span class=\"user\" >{{getusernameById(activity.\r\n-idUser\r\n-)}}</span>\r\n-                     <!-- Fallback for system actions -->\r\n+                    <span class=\"user\" >{{getusernameById(activity.userId)}}</span>\r\n+                    <span class=\"user\" *ngIf=\"!activity.username\">{{getusernameById(activity.userId)}}</span> <!-- Fallback for system actions -->\r\n                     <span class=\"action-description\">{{ generateActivityDescription(activity) }}</span>\r\n                   </div>\r\n                   <div class=\"activity-meta\">\r\n                     <span class=\"timestamp\">{{ activity.createdAt | date:'short' }}</span>\r\n"
                },
                {
                    "date": 1747152609915,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -128,11 +128,9 @@\n                   <i *ngIf=\"!['COMMENT', 'UPDATE', 'DELETE', 'CREATE'].includes(activity.action)\" class=\"bi bi-bell\"></i>\r\n                 </div>\r\n                 <div class=\"activity-content-wrapper\">\r\n                   <div class=\"activity-main-info\">\r\n-                    <span class=\"user\" >{{getusernameById(activity.userId)}}</span>\r\n-                    <span class=\"user\" *ngIf=\"!activity.username\">{{getusernameById(activity.userId)}}</span> <!-- Fallback for system actions -->\r\n-                    <span class=\"action-description\">{{ generateActivityDescription(activity) }}</span>\r\n+                    <span class=\"user\" >{{ activity.username || (activity.idUser ? 'Loading user...' : 'System Action') }}</span>  <span class=\"action-description\">{{ generateActivityDescription(activity) }}</span>\r\n                   </div>\r\n                   <div class=\"activity-meta\">\r\n                     <span class=\"timestamp\">{{ activity.createdAt | date:'short' }}</span>\r\n                   </div>\r\n"
                },
                {
                    "date": 1747614470639,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -94,19 +94,53 @@\n           </div>\r\n         </div>\r\n   \r\n         <div class=\"task-section\">\r\n-           <h3><i class=\"bi bi-paperclip\"></i> Attachments</h3>\r\n-          <div class=\"attachments-list\">\r\n-            <div class=\"attachment-item\" *ngFor=\"let attachment of task?.attachments\">\r\n-              <i class=\"bi bi-paperclip\"></i>\r\n-              <div class=\"attachment-info\">\r\n-                <strong>{{ attachment.name }}</strong>\r\n-                <small>{{ attachment.description }}</small>\r\n+           <h3><i class=\"bi bi-folder2-open\"></i> Documents</h3>\r\n+          <div *ngIf=\"isLoadingDocuments\" class=\"loading-indicator\">Loading documents...</div>\r\n+          <div *ngIf=\"!isLoadingDocuments\">\r\n+            <div class=\"documents-list\">\r\n+              <div class=\"document-item\" *ngFor=\"let doc of task?.documents\">\r\n+                <div class=\"document-icon\">\r\n+                  <i *ngIf=\"doc.mediaType === 'IMAGE'\" class=\"bi bi-file-earmark-image\"></i>\r\n+                  <i *ngIf=\"doc.mediaType === 'VIDEO'\" class=\"bi bi-file-earmark-play\"></i>\r\n+                  <i *ngIf=\"doc.mediaType === 'DOCUMENT' || (doc.mediaType !== 'IMAGE' && doc.mediaType !== 'VIDEO')\" class=\"bi bi-file-earmark-text\"></i>\r\n+                </div>\r\n+                <div class=\"document-info\">\r\n+                  <strong class=\"document-filename\" (click)=\"downloadDocument(doc)\" matTooltip=\"Download {{doc.filename}}\">{{ doc.filename }}</strong>\r\n+                  <small class=\"document-description\" *ngIf=\"doc.description\">{{ doc.description }}</small>\r\n+                  <small class=\"document-meta\">\r\n+                    Size: {{ doc.size | number }} bytes | Uploaded: {{ doc.uploadDate | date:'shortDate' }} by {{ doc.uploaderUsername || doc.uploadedBy }}\r\n+                  </small>\r\n+                </div>\r\n+                <div class=\"document-actions\">\r\n+                  <button mat-icon-button (click)=\"downloadDocument(doc)\" matTooltip=\"Download document\">\r\n+                    <i class=\"bi bi-download\"></i>\r\n+                  </button>\r\n+                  <!-- Add condition for delete, e.g., based on user role or if user is uploader -->\r\n+                  <button mat-icon-button color=\"warn\" (click)=\"deleteDocument(doc.id)\" matTooltip=\"Delete document\">\r\n+                    <i class=\"bi bi-trash3\"></i>\r\n+                  </button>\r\n+                </div>\r\n               </div>\r\n-              <button mat-icon-button>\r\n-                <i class=\"bi bi-download\"></i>\r\n+              <div *ngIf=\"(!task?.documents || task?.documents?.length === 0) && !isLoadingDocuments\" class=\"no-comments\">\r\n+                No documents attached to this task yet.\r\n+              </div>\r\n+            </div>\r\n+          </div>\r\n+\r\n+          <!-- Upload Document Section -->\r\n+          <div class=\"upload-document-section task-section\">\r\n+            <h4>Upload New Document</h4>\r\n+            <div class=\"upload-form\">\r\n+              <input id=\"fileUploadInput\" type=\"file\" (change)=\"onFileSelected($event)\" class=\"form-control form-control-sm mb-2\">\r\n+              <textarea [(ngModel)]=\"fileDescription\" placeholder=\"Optional: Document description...\" class=\"form-control form-control-sm mb-2\" rows=\"2\"></textarea>\r\n+              <button mat-raised-button color=\"primary\" (click)=\"uploadDocument()\" [disabled]=\"!selectedFile\">\r\n+                <i class=\"bi bi-upload\"></i> Upload File\r\n               </button>\r\n+              <div *ngIf=\"selectedFile\" class=\"selected-file-info mt-2\">\r\n+                Selected: {{ selectedFile.name }} ({{ selectedFile.size | number }} bytes)\r\n+              </div>\r\n             </div>\r\n           </div>\r\n         </div>\r\n         <div class=\"task-section\">\r\n"
                },
                {
                    "date": 1748219585631,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -229,5 +229,5 @@\n            </div>\r\n         </div>\r\n       </div>\r\n     </div>\r\n-  </div>\n\\ No newline at end of file\n+  </div>\r\n"
                },
                {
                    "date": 1748221437929,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,55 +41,56 @@\n           <div *ngIf=\"!isLoadingSubtasks\">\r\n             <div class=\"subtasks-list detailed-subtasks\">\r\n               <div class=\"subtask-item\" *ngFor=\"let subtask of subtasks\" [class.editing]=\"editingSubtaskId === subtask.id\">\r\n                 <!-- Display Mode -->\r\n-                <div class=\"subtask-info-display\" *ngIf=\"editingSubtaskId !== subtask.id\">\r\n-                  <span class=\"subtask-name\" [matTooltip]=\"subtask.name\">{{ subtask.name }}</span>\r\n-                  <span class=\"subtask-dates\">{{ subtask.startDate | date:'dd/MM/yy' }} - {{ subtask.endDate | date:'dd/MM/yy' }}</span>\r\n-                  <span class=\"subtask-priority-badge\" [ngClass]=\"subtask.priority?.toLowerCase()\">{{ subtask.priority }}</span>\r\n-                  <span class=\"subtask-status-badge\" [ngClass]=\"subtask.status?.replace('_', '-').toLowerCase()\">{{ subtask.status }}</span>\r\n-                   <div class=\"subtask-actions\">\r\n-                    <button mat-icon-button class=\"edit-btn-subtask\" (click)=\"startEditSubtask(subtask); $event.stopPropagation()\" matTooltip=\"Modifier la sous-tâche\">\r\n-                      <i class=\"bi bi-pencil icon\"></i>\r\n-                 \r\n-                    </button>\r\n-                    <button mat-icon-button class=\"delete-btn-subtask\" (click)=\"deleteSubtask(subtask.id, subtask.name); $event.stopPropagation()\" matTooltip=\"Supprimer la sous-tâche\">\r\n-                      <i class=\"bi bi-trash icon\"></i>\r\n-                    </button>\r\n+                <ng-container *ngIf=\"editingSubtaskId !== subtask.id\">\r\n+                  <div class=\"subtask-info-display\">\r\n+                    <span class=\"subtask-name\" [matTooltip]=\"subtask.name\">{{ subtask.name }}</span>\r\n+                    <span class=\"subtask-dates\">{{ subtask.startDate | date:'dd/MM/yy' }} - {{ subtask.endDate | date:'dd/MM/yy' }}</span>\r\n+                    <span class=\"subtask-priority-badge\" [ngClass]=\"subtask.priority?.toLowerCase()\">{{ subtask.priority }}</span>\r\n+                    <span class=\"subtask-status-badge\" [ngClass]=\"subtask.status?.replace('_', '-').toLowerCase()\">{{ subtask.status }}</span>\r\n+                    <div class=\"subtask-actions\">\r\n+                      <button mat-icon-button class=\"edit-btn-subtask\" (click)=\"startEditSubtask(subtask); $event.stopPropagation()\" matTooltip=\"Modifier la sous-tâche\">\r\n+                        <i class=\"bi bi-pencil icon\"></i>\r\n+                      </button>\r\n+                      <button mat-icon-button class=\"delete-btn-subtask\" (click)=\"deleteSubtask(subtask.id, subtask.name); $event.stopPropagation()\" matTooltip=\"Supprimer la sous-tâche\">\r\n+                        <i class=\"bi bi-trash icon\"></i>\r\n+                      </button>\r\n+                    </div>\r\n                   </div>\r\n-   </div>\r\n+                </ng-container>\r\n+\r\n                <!-- Edit Mode -->\r\n-                <div class=\"subtask-info-edit\" *ngIf=\"editingSubtaskId === subtask.id\">\r\n-                 <input type=\"text\" [(ngModel)]=\"editedSubtaskData.name\" placeholder=\"Nom de la sous-tâche\" class=\"form-control form-control-sm subtask-edit-name\">\r\n-                   <div class=\"subtask-edit-dates\">\r\n-                    <input type=\"date\" [(ngModel)]=\"editedSubtaskData.startDate\" class=\"form-control form-control-sm\">\r\n-                    <span>-</span>\r\n-                    <input type=\"date\" [(ngModel)]=\"editedSubtaskData.endDate\" class=\"form-control form-control-sm\">\r\n+                <ng-container *ngIf=\"editingSubtaskId === subtask.id\">\r\n+                  <div class=\"subtask-info-edit\">\r\n+                    <input type=\"text\" [(ngModel)]=\"editedSubtaskData.name\" placeholder=\"Nom de la sous-tâche\" class=\"form-control form-control-sm subtask-edit-name\">\r\n+                    <div class=\"subtask-edit-dates\">\r\n+                      <input type=\"date\" [(ngModel)]=\"editedSubtaskData.startDate\" class=\"form-control form-control-sm\">\r\n+                      <span>-</span>\r\n+                      <input type=\"date\" [(ngModel)]=\"editedSubtaskData.endDate\" class=\"form-control form-control-sm\">\r\n+                    </div>\r\n+                    <div class=\"subtask-edit-selects\">\r\n+                      <select [(ngModel)]=\"editedSubtaskData.priority\" class=\"form-select form-select-sm subtask-edit-priority\">\r\n+                          <option *ngFor=\"let p of taskPriorityOptions\" [value]=\"p\">{{p}}</option>\r\n+                      </select>\r\n+                      <select [(ngModel)]=\"editedSubtaskData.status\" class=\"form-select form-select-sm subtask-edit-status\">\r\n+                          <option *ngFor=\"let s of taskStatusOptions\" [value]=\"s\">{{s}}</option>\r\n+                      </select>\r\n+                    </div>\r\n+                    <!-- Actions were previously nested here, now moved out -->\r\n                   </div>\r\n-                  <div class=\"subtask-edit-selects\">\r\n-                   <select [(ngModel)]=\"editedSubtaskData.priority\" class=\"form-select form-select-sm subtask-edit-priority\">\r\n-                       <option *ngFor=\"let p of taskPriorityOptions\" [value]=\"p\">{{p}}</option>\r\n-                              </select>\r\n-                    <select [(ngModel)]=\"editedSubtaskData.status\" class=\"form-select form-select-sm subtask-edit-status\">\r\n-                              <option *ngFor=\"let s of taskStatusOptions\" [value]=\"s\">{{s}}</option>\r\n-                         </select>\r\n-                  </div>\r\n                   <div class=\"subtask-actions-edit\">\r\n-                     <button mat-icon-button class=\"save-btn-subtask\" (click)=\"saveSubtaskEdit()\" matTooltip=\"Enregistrer\">\r\n+                    <button mat-icon-button class=\"save-btn-subtask\" (click)=\"saveSubtaskEdit()\" matTooltip=\"Enregistrer\">\r\n                       <i class=\"bi bi-check-lg icon\"></i>\r\n-                  \r\n                     </button>\r\n                     <button mat-icon-button class=\"cancel-btn-subtask\" (click)=\"cancelSubtaskEdit()\" matTooltip=\"Annuler\">\r\n                       <i class=\"bi bi-x-lg icon\"></i>\r\n-                   </button>\r\n+                    </button>\r\n                   </div>\r\n-\r\n-                </div>\r\n+                </ng-container>\r\n               </div>\r\n               <div *ngIf=\"!subtasks || subtasks.length === 0\" class=\"no-comments\">\r\n-              \r\n                 Aucune sous-tâche assignée.\r\n-\r\n               </div>\r\n             </div>\r\n           </div>\r\n         </div>\r\n"
                },
                {
                    "date": 1748221743158,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -60,15 +60,17 @@\n                 </ng-container>\r\n \r\n                <!-- Edit Mode -->\r\n                 <ng-container *ngIf=\"editingSubtaskId === subtask.id\">\r\n-                  <div class=\"subtask-info-edit\">\r\n-                    <input type=\"text\" [(ngModel)]=\"editedSubtaskData.name\" placeholder=\"Nom de la sous-tâche\" class=\"form-control form-control-sm subtask-edit-name\">\r\n-                    <div class=\"subtask-edit-dates\">\r\n-                      <input type=\"date\" [(ngModel)]=\"editedSubtaskData.startDate\" class=\"form-control form-control-sm\">\r\n-                      <span>-</span>\r\n-                      <input type=\"date\" [(ngModel)]=\"editedSubtaskData.endDate\" class=\"form-control form-control-sm\">\r\n-                    </div>\r\n+                 <div class=\"subtask-info-edit\"> <!-- Ce div sera maintenant display:flex; flex-direction: column -->\r\n+                    <div class=\"subtask-edit-row subtask-edit-row-top\"> <!-- Première ligne -->\r\n+                      <input type=\"text\" [(ngModel)]=\"editedSubtaskData.name\" placeholder=\"Nom de la sous-tâche\" class=\"form-control form-control-sm subtask-edit-name\">\r\n+                      <div class=\"subtask-edit-dates\">\r\n+                        <input type=\"date\" [(ngModel)]=\"editedSubtaskData.startDate\" class=\"form-control form-control-sm\">\r\n+                        <span>-</span>\r\n+                        <input type=\"date\" [(ngModel)]=\"editedSubtaskData.endDate\" class=\"form-control form-control-sm\">\r\n+                      </div>\r\n+   </div>\r\n                     <div class=\"subtask-edit-selects\">\r\n                       <select [(ngModel)]=\"editedSubtaskData.priority\" class=\"form-select form-select-sm subtask-edit-priority\">\r\n                           <option *ngFor=\"let p of taskPriorityOptions\" [value]=\"p\">{{p}}</option>\r\n                       </select>\r\n"
                },
                {
                    "date": 1748221755514,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -69,10 +69,11 @@\n                         <span>-</span>\r\n                         <input type=\"date\" [(ngModel)]=\"editedSubtaskData.endDate\" class=\"form-control form-control-sm\">\r\n                       </div>\r\n    </div>\r\n-                    <div class=\"subtask-edit-selects\">\r\n-                      <select [(ngModel)]=\"editedSubtaskData.priority\" class=\"form-select form-select-sm subtask-edit-priority\">\r\n+                    <div class=\"subtask-edit-row subtask-edit-row-bottom\"> <!-- Deuxième ligne -->\r\n+                      <div class=\"subtask-edit-selects\">\r\n+                        <select [(ngModel)]=\"editedSubtaskData.priority\" class=\"form-select form-select-sm subtask-edit-priority\">\r\n                           <option *ngFor=\"let p of taskPriorityOptions\" [value]=\"p\">{{p}}</option>\r\n                       </select>\r\n                       <select [(ngModel)]=\"editedSubtaskData.status\" class=\"form-select form-select-sm subtask-edit-status\">\r\n                           <option *ngFor=\"let s of taskStatusOptions\" [value]=\"s\">{{s}}</option>\r\n"
                },
                {
                    "date": 1748221769028,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -73,12 +73,12 @@\n                     <div class=\"subtask-edit-row subtask-edit-row-bottom\"> <!-- Deuxième ligne -->\r\n                       <div class=\"subtask-edit-selects\">\r\n                         <select [(ngModel)]=\"editedSubtaskData.priority\" class=\"form-select form-select-sm subtask-edit-priority\">\r\n                           <option *ngFor=\"let p of taskPriorityOptions\" [value]=\"p\">{{p}}</option>\r\n+                     </select>\r\n+                        <select [(ngModel)]=\"editedSubtaskData.status\" class=\"form-select form-select-sm subtask-edit-status\">\r\n+                             <option *ngFor=\"let s of taskStatusOptions\" [value]=\"s\">{{s}}</option>\r\n                       </select>\r\n-                      <select [(ngModel)]=\"editedSubtaskData.status\" class=\"form-select form-select-sm subtask-edit-status\">\r\n-                          <option *ngFor=\"let s of taskStatusOptions\" [value]=\"s\">{{s}}</option>\r\n-                      </select>\r\n                     </div>\r\n                     <!-- Actions were previously nested here, now moved out -->\r\n                   </div>\r\n                   <div class=\"subtask-actions-edit\">\r\n"
                },
                {
                    "date": 1748221838556,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -60,36 +60,36 @@\n                 </ng-container>\r\n \r\n                <!-- Edit Mode -->\r\n                 <ng-container *ngIf=\"editingSubtaskId === subtask.id\">\r\n-                 <div class=\"subtask-info-edit\"> <!-- Ce div sera maintenant display:flex; flex-direction: column -->\r\n+                  <div class=\"subtask-info-edit\"> <!-- Ce div sera maintenant display:flex; flex-direction: column -->\r\n                     <div class=\"subtask-edit-row subtask-edit-row-top\"> <!-- Première ligne -->\r\n                       <input type=\"text\" [(ngModel)]=\"editedSubtaskData.name\" placeholder=\"Nom de la sous-tâche\" class=\"form-control form-control-sm subtask-edit-name\">\r\n                       <div class=\"subtask-edit-dates\">\r\n                         <input type=\"date\" [(ngModel)]=\"editedSubtaskData.startDate\" class=\"form-control form-control-sm\">\r\n                         <span>-</span>\r\n                         <input type=\"date\" [(ngModel)]=\"editedSubtaskData.endDate\" class=\"form-control form-control-sm\">\r\n                       </div>\r\n-   </div>\r\n+                    </div>\r\n                     <div class=\"subtask-edit-row subtask-edit-row-bottom\"> <!-- Deuxième ligne -->\r\n                       <div class=\"subtask-edit-selects\">\r\n                         <select [(ngModel)]=\"editedSubtaskData.priority\" class=\"form-select form-select-sm subtask-edit-priority\">\r\n                           <option *ngFor=\"let p of taskPriorityOptions\" [value]=\"p\">{{p}}</option>\r\n-                     </select>\r\n+                        </select>\r\n                         <select [(ngModel)]=\"editedSubtaskData.status\" class=\"form-select form-select-sm subtask-edit-status\">\r\n-                             <option *ngFor=\"let s of taskStatusOptions\" [value]=\"s\">{{s}}</option>\r\n-                      </select>\r\n+                          <option *ngFor=\"let s of taskStatusOptions\" [value]=\"s\">{{s}}</option>\r\n+                        </select>\r\n+                      </div>\r\n+                      <div class=\"subtask-actions-edit\">\r\n+                        <button mat-icon-button class=\"save-btn-subtask\" (click)=\"saveSubtaskEdit()\" matTooltip=\"Enregistrer\">\r\n+                          <i class=\"bi bi-check-lg icon\"></i>\r\n+                        </button>\r\n+                        <button mat-icon-button class=\"cancel-btn-subtask\" (click)=\"cancelSubtaskEdit()\" matTooltip=\"Annuler\">\r\n+                          <i class=\"bi bi-x-lg icon\"></i>\r\n+                        </button>\r\n+                      </div>\r\n                     </div>\r\n-                    <!-- Actions were previously nested here, now moved out -->\r\n                   </div>\r\n-                  <div class=\"subtask-actions-edit\">\r\n-                    <button mat-icon-button class=\"save-btn-subtask\" (click)=\"saveSubtaskEdit()\" matTooltip=\"Enregistrer\">\r\n-                      <i class=\"bi bi-check-lg icon\"></i>\r\n-                    </button>\r\n-                    <button mat-icon-button class=\"cancel-btn-subtask\" (click)=\"cancelSubtaskEdit()\" matTooltip=\"Annuler\">\r\n-                      <i class=\"bi bi-x-lg icon\"></i>\r\n-                    </button>\r\n-                  </div>\r\n                 </ng-container>\r\n               </div>\r\n               <div *ngIf=\"!subtasks || subtasks.length === 0\" class=\"no-comments\">\r\n                 Aucune sous-tâche assignée.\r\n"
                },
                {
                    "date": 1748222510093,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,9 +35,14 @@\n           <h3><i class=\"bi bi-text-left\"></i> Description</h3>\r\n           <p class=\"task-description\">{{ task?.description }}</p>\r\n         </div>\r\n         <div class=\"task-section\">\r\n-          <h3>Subtasks</h3>\r\n+          <div class=\"subtasks-header\">\r\n+            <h3>Subtasks</h3>\r\n+            <button mat-icon-button class=\"add-subtask-btn\" (click)=\"toggleAddSubtaskForm()\" [matTooltip]=\"isAddingSubtask ? 'Annuler l\\'ajout' : 'Ajouter une sous-tâche'\">\r\n+              <i class=\"bi\" [ngClass]=\"isAddingSubtask ? 'bi-x-circle' : 'bi-plus-circle-dotted'\"></i>\r\n+            </button>\r\n+          </div>\r\n           <div *ngIf=\"isLoadingSubtasks\" class=\"loading-indicator\">Loading subtasks...</div>\r\n           <div *ngIf=\"!isLoadingSubtasks\">\r\n             <div class=\"subtasks-list detailed-subtasks\">\r\n               <div class=\"subtask-item\" *ngFor=\"let subtask of subtasks\" [class.editing]=\"editingSubtaskId === subtask.id\">\r\n"
                },
                {
                    "date": 1748222521264,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,8 +44,10 @@\n           </div>\r\n           <div *ngIf=\"isLoadingSubtasks\" class=\"loading-indicator\">Loading subtasks...</div>\r\n           <div *ngIf=\"!isLoadingSubtasks\">\r\n             <div class=\"subtasks-list detailed-subtasks\">\r\n+\r\n+              \r\n               <div class=\"subtask-item\" *ngFor=\"let subtask of subtasks\" [class.editing]=\"editingSubtaskId === subtask.id\">\r\n                 <!-- Display Mode -->\r\n                 <ng-container *ngIf=\"editingSubtaskId !== subtask.id\">\r\n                   <div class=\"subtask-info-display\">\r\n"
                },
                {
                    "date": 1748222537109,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,10 +44,42 @@\n           </div>\r\n           <div *ngIf=\"isLoadingSubtasks\" class=\"loading-indicator\">Loading subtasks...</div>\r\n           <div *ngIf=\"!isLoadingSubtasks\">\r\n             <div class=\"subtasks-list detailed-subtasks\">\r\n+<!-- Formulaire d'ajout de sous-tâche -->\r\n+              <div class=\"subtask-item add-new-subtask-form\" *ngIf=\"isAddingSubtask\">\r\n+                <div class=\"subtask-info-edit\"> <!-- Réutilise la classe pour la structure en colonne -->\r\n+                  <div class=\"subtask-edit-row subtask-edit-row-top\"> <!-- Première ligne -->\r\n+                    <input type=\"text\" [(ngModel)]=\"newSubtaskData.name\" placeholder=\"Nom de la nouvelle sous-tâche\" class=\"form-control form-control-sm subtask-edit-name\">\r\n+                    <div class=\"subtask-edit-dates\">\r\n+                      <input type=\"date\" [(ngModel)]=\"newSubtaskData.startDate\" class=\"form-control form-control-sm\">\r\n+                      <span>-</span>\r\n+                      <input type=\"date\" [(ngModel)]=\"newSubtaskData.endDate\" class=\"form-control form-control-sm\">\r\n+                    </div>\r\n+                  </div>\r\n+                  <div class=\"subtask-edit-row subtask-edit-row-bottom\"> <!-- Deuxième ligne -->\r\n+                    <div class=\"subtask-edit-selects\">\r\n+                      <select [(ngModel)]=\"newSubtaskData.priority\" class=\"form-select form-select-sm subtask-edit-priority\">\r\n+                        <option *ngFor=\"let p of taskPriorityOptions\" [value]=\"p\">{{p}}</option>\r\n+                      </select>\r\n+                      <select [(ngModel)]=\"newSubtaskData.status\" class=\"form-select form-select-sm subtask-edit-status\">\r\n+                        <option *ngFor=\"let s of taskStatusOptions\" [value]=\"s\">{{s}}</option>\r\n+                      </select>\r\n+                    </div>\r\n+                    <div class=\"subtask-actions-edit\">\r\n+                      <button mat-icon-button class=\"save-btn-subtask\" (click)=\"saveNewSubtask()\" matTooltip=\"Enregistrer la nouvelle sous-tâche\">\r\n+                        <i class=\"bi bi-check-lg icon\"></i>\r\n+                      </button>\r\n+                      <button mat-icon-button class=\"cancel-btn-subtask\" (click)=\"toggleAddSubtaskForm()\" matTooltip=\"Annuler l'ajout\">\r\n+                        <i class=\"bi bi-x-lg icon\"></i>\r\n+                      </button>\r\n+                    </div>\r\n+                  </div>\r\n+                </div>\r\n+              </div>\r\n+              <!-- Liste des sous-tâches existantes -->\r\n+           \r\n \r\n-              \r\n               <div class=\"subtask-item\" *ngFor=\"let subtask of subtasks\" [class.editing]=\"editingSubtaskId === subtask.id\">\r\n                 <!-- Display Mode -->\r\n                 <ng-container *ngIf=\"editingSubtaskId !== subtask.id\">\r\n                   <div class=\"subtask-info-display\">\r\n"
                },
                {
                    "date": 1748248823172,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -129,10 +129,10 @@\n                     </div>\r\n                   </div>\r\n                 </ng-container>\r\n               </div>\r\n-              <div *ngIf=\"!subtasks || subtasks.length === 0\" class=\"no-comments\">\r\n-                Aucune sous-tâche assignée.\r\n+               <div *ngIf=\"!subtasks || subtasks.length === 0\" class=\"no-subtasks\">\r\n+               Aucune sous-tâche assignée.\r\n               </div>\r\n             </div>\r\n           </div>\r\n         </div>\r\n"
                },
                {
                    "date": 1748292012270,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -81,21 +81,27 @@\n \r\n               <div class=\"subtask-item\" *ngFor=\"let subtask of subtasks\" [class.editing]=\"editingSubtaskId === subtask.id\">\r\n                 <!-- Display Mode -->\r\n                 <ng-container *ngIf=\"editingSubtaskId !== subtask.id\">\r\n-                  <div class=\"subtask-info-display\">\r\n-                    <span class=\"subtask-name\" [matTooltip]=\"subtask.name\">{{ subtask.name }}</span>\r\n-                    <span class=\"subtask-dates\">{{ subtask.startDate | date:'dd/MM/yy' }} - {{ subtask.endDate | date:'dd/MM/yy' }}</span>\r\n-                    <span class=\"subtask-priority-badge\" [ngClass]=\"subtask.priority?.toLowerCase()\">{{ subtask.priority }}</span>\r\n-                    <span class=\"subtask-status-badge\" [ngClass]=\"subtask.status?.replace('_', '-').toLowerCase()\">{{ subtask.status }}</span>\r\n-                    <div class=\"subtask-actions\">\r\n-                      <button mat-icon-button class=\"edit-btn-subtask\" (click)=\"startEditSubtask(subtask); $event.stopPropagation()\" matTooltip=\"Modifier la sous-tâche\">\r\n-                        <i class=\"bi bi-pencil icon\"></i>\r\n-                      </button>\r\n-                      <button mat-icon-button class=\"delete-btn-subtask\" (click)=\"deleteSubtask(subtask.id, subtask.name); $event.stopPropagation()\" matTooltip=\"Supprimer la sous-tâche\">\r\n-                        <i class=\"bi bi-trash icon\"></i>\r\n-                      </button>\r\n+                 <div class=\"subtask-info-display\"> <!-- Container principal pour les deux lignes -->\r\n+                    <div class=\"subtask-display-row subtask-display-row-top\"> <!-- Première ligne -->\r\n+                      <span class=\"subtask-name\" [matTooltip]=\"subtask.name\">{{ subtask.name }}</span>\r\n+                      <span class=\"subtask-dates\">{{ subtask.startDate | date:'dd/MM/yy' }} - {{ subtask.endDate | date:'dd/MM/yy' }}</span>\r\n                     </div>\r\n+                    <div class=\"subtask-display-row subtask-display-row-bottom\"> <!-- Deuxième ligne -->\r\n+                      <div class=\"subtask-attributes\">\r\n+                        <span class=\"subtask-priority-badge\" [ngClass]=\"subtask.priority?.toLowerCase()\">{{ subtask.priority }}</span>\r\n+                        <span class=\"subtask-status-badge\" [ngClass]=\"subtask.status?.replace('_', '-').toLowerCase()\">{{ subtask.status }}</span>\r\n+                      </div>\r\n+                      <div class=\"subtask-actions\">\r\n+                        <button mat-icon-button class=\"edit-btn-subtask\" (click)=\"startEditSubtask(subtask); $event.stopPropagation()\" matTooltip=\"Modifier la sous-tâche\">\r\n+                          <i class=\"bi bi-pencil icon\"></i>\r\n+                        </button>\r\n+                        <button mat-icon-button class=\"delete-btn-subtask\" (click)=\"deleteSubtask(subtask.id, subtask.name); $event.stopPropagation()\" matTooltip=\"Supprimer la sous-tâche\">\r\n+                          <i class=\"bi bi-trash icon\"></i>\r\n+                        </button>\r\n+                      </div>\r\n+                    </div>\r\n                   </div>\r\n                 </ng-container>\r\n \r\n                <!-- Edit Mode -->\r\n"
                },
                {
                    "date": 1748297350757,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -143,9 +143,32 @@\n           </div>\r\n         </div>\r\n   \r\n         <div class=\"task-section\">\r\n-           <h3><i class=\"bi bi-folder2-open\"></i> Documents</h3>\r\n+            <div class=\"documents-header\">\r\n+            <h3><i class=\"bi bi-folder2-open\"></i> Documents</h3>\r\n+            <button mat-icon-button class=\"add-document-btn\" (click)=\"toggleAddDocumentForm()\" [matTooltip]=\"isAddingDocument ? 'Annuler l\\'ajout de document' : 'Ajouter un document'\">\r\n+              <i class=\"bi\" [ngClass]=\"isAddingDocument ? 'bi-x-circle' : 'bi-plus-circle-dotted'\"></i>\r\n+            </button>\r\n+          </div>\r\n+\r\n+          <!-- Upload Document Section - Conditionnellement affiché -->\r\n+          <div class=\"upload-document-section\" *ngIf=\"isAddingDocument\">\r\n+            <h4>Téléverser un nouveau document</h4>\r\n+            <div class=\"upload-form\">\r\n+              <input id=\"fileUploadInput\" type=\"file\" (change)=\"onFileSelected($event)\" class=\"form-control form-control-sm mb-2\">\r\n+              <textarea [(ngModel)]=\"fileDescription\" placeholder=\"Description du document (optionnel)...\" class=\"form-control form-control-sm mb-2\" rows=\"2\"></textarea>\r\n+              <button mat-raised-button color=\"primary\" (click)=\"uploadDocument()\" [disabled]=\"!selectedFile || isUploading\">\r\n+                <i class=\"bi bi-upload\"></i> {{ isUploading ? 'Téléversement (' + (uploadProgress !== null ? uploadProgress + '%' : '') + ')...' : 'Téléverser le fichier' }}\r\n+              </button>\r\n+              <div *ngIf=\"isUploading && uploadProgress !== null\" class=\"progress mt-2\" style=\"height: 10px;\">\r\n+                <div class=\"progress-bar\" role=\"progressbar\" [style.width.%]=\"uploadProgress\" aria-valuenow=\"uploadProgress\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\r\n+              </div>\r\n+              <div *ngIf=\"selectedFile && !isUploading\" class=\"selected-file-info mt-2\">\r\n+                Sélectionné : {{ selectedFile.name }} ({{ selectedFile.size | number }} octets)\r\n+              </div>\r\n+            </div>\r\n+          </div>\r\n           <div *ngIf=\"isLoadingDocuments\" class=\"loading-indicator\">Loading documents...</div>\r\n           <div *ngIf=\"!isLoadingDocuments\">\r\n             <div class=\"documents-list\">\r\n               <div class=\"document-item\" *ngFor=\"let doc of task?.documents\">\r\n"
                },
                {
                    "date": 1748297360372,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -199,22 +199,9 @@\n               </div>\r\n             </div>\r\n           </div>\r\n \r\n-          <!-- Upload Document Section -->\r\n-          <div class=\"upload-document-section task-section\">\r\n-            <h4>Upload New Document</h4>\r\n-            <div class=\"upload-form\">\r\n-              <input id=\"fileUploadInput\" type=\"file\" (change)=\"onFileSelected($event)\" class=\"form-control form-control-sm mb-2\">\r\n-              <textarea [(ngModel)]=\"fileDescription\" placeholder=\"Optional: Document description...\" class=\"form-control form-control-sm mb-2\" rows=\"2\"></textarea>\r\n-              <button mat-raised-button color=\"primary\" (click)=\"uploadDocument()\" [disabled]=\"!selectedFile\">\r\n-                <i class=\"bi bi-upload\"></i> Upload File\r\n-              </button>\r\n-              <div *ngIf=\"selectedFile\" class=\"selected-file-info mt-2\">\r\n-                Selected: {{ selectedFile.name }} ({{ selectedFile.size | number }} bytes)\r\n-              </div>\r\n-            </div>\r\n-          </div>\r\n+          \r\n         </div>\r\n         <div class=\"task-section\">\r\n           <h3>Historiques</h3>\r\n           <div *ngIf=\"isLoadingActivities\" class=\"loading-indicator\">Loading activities...</div>\r\n"
                },
                {
                    "date": 1748297644642,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,26 +17,10 @@\n     <div class=\"task-content\">\r\n       <!-- Left Column -->\r\n      <div class=\"task-column task-main-details-column\">\r\n        \r\n+        \r\n         <div class=\"task-section\">\r\n-          \r\n-          <div class=\"date-range\">\r\n-            <div class=\"date-item\">\r\n-              <label>Start Date</label>\r\n-              <p>{{ task?.startDate | date:'mediumDate' }}</p>\r\n-            </div>\r\n-            <div class=\"date-item\">\r\n-              <label>End Date</label>\r\n-              <p>{{ task?.endDate | date:'mediumDate' }}</p>\r\n-            </div>\r\n-          </div>\r\n-        </div>\r\n-  <div class=\"task-section\">\r\n-          <h3><i class=\"bi bi-text-left\"></i> Description</h3>\r\n-          <p class=\"task-description\">{{ task?.description }}</p>\r\n-        </div>\r\n-        <div class=\"task-section\">\r\n           <div class=\"subtasks-header\">\r\n             <h3>Subtasks</h3>\r\n             <button mat-icon-button class=\"add-subtask-btn\" (click)=\"toggleAddSubtaskForm()\" [matTooltip]=\"isAddingSubtask ? 'Annuler l\\'ajout' : 'Ajouter une sous-tâche'\">\r\n               <i class=\"bi\" [ngClass]=\"isAddingSubtask ? 'bi-x-circle' : 'bi-plus-circle-dotted'\"></i>\r\n"
                },
                {
                    "date": 1748297679994,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -224,8 +224,9 @@\n       <!-- Middle Column: Comments -->\r\n      \r\n       <!-- Right Column: Activity History -->\r\n       <div class=\"task-column task-activity-column\">\r\n+        \r\n          <div class=\"task-section\">\r\n           <h3>Comments</h3>\r\n           <div *ngIf=\"isLoadingComments\" class=\"loading-indicator\">Loading comments...</div>\r\n           <div *ngIf=\"!isLoadingComments\">\r\n"
                },
                {
                    "date": 1748298159230,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -223,10 +223,30 @@\n   \r\n       <!-- Middle Column: Comments -->\r\n      \r\n       <!-- Right Column: Activity History -->\r\n-      <div class=\"task-column task-activity-column\">\r\n-        \r\n+       <div class=\"task-column task-activity-column\">        \r\n+        <div class=\"task-section\">\r\n+          <h3><i class=\"bi bi-text-left\"></i> Description</h3>\r\n+          <p class=\"task-description\">{{ task?.description }}</p>\r\n+        </div>\r\n+        <div class=\"task-section\">\r\n+          \r\n+          <div class=\"date-range\">\r\n+            <div class=\"date-item\">\r\n+              <label>Start Date</label>\r\n+              <p>{{ task?.startDate | date:'mediumDate' }}</p>\r\n+            </div>\r\n+            <div class=\"date-item\">\r\n+              <label>End Date</label>\r\n+              <p>{{ task?.endDate | date:'mediumDate' }}</p>\r\n+            </div>\r\n+          </div>\r\n+        </div>\r\n+  <div class=\"task-section\">\r\n+          <h3><i class=\"bi bi-text-left\"></i> Description</h3>\r\n+          <p class=\"task-description\">{{ task?.description }}</p>\r\n+        </div>\r\n          <div class=\"task-section\">\r\n           <h3>Comments</h3>\r\n           <div *ngIf=\"isLoadingComments\" class=\"loading-indicator\">Loading comments...</div>\r\n           <div *ngIf=\"!isLoadingComments\">\r\n"
                },
                {
                    "date": 1748298167517,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -224,13 +224,10 @@\n       <!-- Middle Column: Comments -->\r\n      \r\n       <!-- Right Column: Activity History -->\r\n        <div class=\"task-column task-activity-column\">        \r\n+       \r\n         <div class=\"task-section\">\r\n-          <h3><i class=\"bi bi-text-left\"></i> Description</h3>\r\n-          <p class=\"task-description\">{{ task?.description }}</p>\r\n-        </div>\r\n-        <div class=\"task-section\">\r\n           \r\n           <div class=\"date-range\">\r\n             <div class=\"date-item\">\r\n               <label>Start Date</label>\r\n"
                },
                {
                    "date": 1749048021466,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -156,12 +156,14 @@\n           <div *ngIf=\"!isLoadingDocuments\">\r\n             <div class=\"documents-list\">\r\n               <div class=\"document-item\" *ngFor=\"let doc of task?.documents\">\r\n                 <div class=\"document-icon\">\r\n-                  <i *ngIf=\"doc.mediaType === 'IMAGE'\" class=\"bi bi-file-earmark-image\"></i>\r\n-                  <i *ngIf=\"doc.mediaType === 'VIDEO'\" class=\"bi bi-file-earmark-play\"></i>\r\n-                  <i *ngIf=\"doc.mediaType === 'DOCUMENT' || (doc.mediaType !== 'IMAGE' && doc.mediaType !== 'VIDEO')\" class=\"bi bi-file-earmark-text\"></i>\r\n-                </div>\r\n+                  <i [ngClass]=\"{\r\n+        'bi-file-earmark-image': doc.mediaType === 'IMAGE',\r\n+        'bi-file-earmark-play': doc.mediaType === 'VIDEO',\r\n+        'bi-file-earmark-pdf': doc.contentType === 'application/pdf',\r\n+        'bi-file-earmark-text': doc.mediaType !== 'IMAGE' && doc.mediaType !== 'VIDEO'\r\n+      }\" class=\"bi\"></i> </div>\r\n                 <div class=\"document-info\">\r\n                   <strong class=\"document-filename\" (click)=\"downloadDocument(doc)\" matTooltip=\"Download {{doc.filename}}\">{{ doc.filename }}</strong>\r\n                   <small class=\"document-description\" *ngIf=\"doc.description\">{{ doc.description }}</small>\r\n                   <small class=\"document-meta\">\r\n"
                },
                {
                    "date": 1749048033858,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -157,12 +157,12 @@\n             <div class=\"documents-list\">\r\n               <div class=\"document-item\" *ngFor=\"let doc of task?.documents\">\r\n                 <div class=\"document-icon\">\r\n                   <i [ngClass]=\"{\r\n-        'bi-file-earmark-image': doc.mediaType === 'IMAGE',\r\n-        'bi-file-earmark-play': doc.mediaType === 'VIDEO',\r\n-        'bi-file-earmark-pdf': doc.contentType === 'application/pdf',\r\n-        'bi-file-earmark-text': doc.mediaType !== 'IMAGE' && doc.mediaType !== 'VIDEO'\r\n+                        'bi-file-earmark-image': doc.mediaType === 'IMAGE',\r\n+                        'bi-file-earmark-play': doc.mediaType === 'VIDEO',\r\n+                        'bi-file-earmark-pdf': doc.contentType === 'application/pdf',\r\n+                        'bi-file-earmark-text': doc.mediaType !== 'IMAGE' && doc.mediaType !== 'VIDEO'\r\n       }\" class=\"bi\"></i> </div>\r\n                 <div class=\"document-info\">\r\n                   <strong class=\"document-filename\" (click)=\"downloadDocument(doc)\" matTooltip=\"Download {{doc.filename}}\">{{ doc.filename }}</strong>\r\n                   <small class=\"document-description\" *ngIf=\"doc.description\">{{ doc.description }}</small>\r\n"
                },
                {
                    "date": 1749048061748,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -163,9 +163,9 @@\n                         'bi-file-earmark-pdf': doc.contentType === 'application/pdf',\r\n                         'bi-file-earmark-text': doc.mediaType !== 'IMAGE' && doc.mediaType !== 'VIDEO'\r\n       }\" class=\"bi\"></i> </div>\r\n                 <div class=\"document-info\">\r\n-                  <strong class=\"document-filename\" (click)=\"downloadDocument(doc)\" matTooltip=\"Download {{doc.filename}}\">{{ doc.filename }}</strong>\r\n+                  <strong class=\"document-filename\" (click)=\"downloadDocument(doc)\" matTooltip=\"Télécharger {{doc.filename}}\">{{ doc.filename }}</strong>\r\n                   <small class=\"document-description\" *ngIf=\"doc.description\">{{ doc.description }}</small>\r\n                   <small class=\"document-meta\">\r\n                     Size: {{ doc.size | number }} bytes | Uploaded: {{ doc.uploadDate | date:'shortDate' }} by {{ doc.uploaderUsername || doc.uploadedBy }}\r\n                   </small>\r\n"
                },
                {
                    "date": 1749048103171,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -166,9 +166,11 @@\n                 <div class=\"document-info\">\r\n                   <strong class=\"document-filename\" (click)=\"downloadDocument(doc)\" matTooltip=\"Télécharger {{doc.filename}}\">{{ doc.filename }}</strong>\r\n                   <small class=\"document-description\" *ngIf=\"doc.description\">{{ doc.description }}</small>\r\n                   <small class=\"document-meta\">\r\n-                    Size: {{ doc.size | number }} bytes | Uploaded: {{ doc.uploadDate | date:'shortDate' }} by {{ doc.uploaderUsername || doc.uploadedBy }}\r\n+                    Taille: {{ doc.size | fileSize }} | \r\n+        Ajouté le: {{ doc.uploadDate | date:'dd/MM/yyyy' }} | \r\n+        Par: {{ doc.uploaderUsername || doc.uploadedBy }}\r\n                   </small>\r\n                 </div>\r\n                 <div class=\"document-actions\">\r\n                   <button mat-icon-button (click)=\"downloadDocument(doc)\" matTooltip=\"Download document\">\r\n"
                },
                {
                    "date": 1749048110023,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -167,9 +167,9 @@\n                   <strong class=\"document-filename\" (click)=\"downloadDocument(doc)\" matTooltip=\"Télécharger {{doc.filename}}\">{{ doc.filename }}</strong>\r\n                   <small class=\"document-description\" *ngIf=\"doc.description\">{{ doc.description }}</small>\r\n                   <small class=\"document-meta\">\r\n                     Taille: {{ doc.size | fileSize }} | \r\n-        Ajouté le: {{ doc.uploadDate | date:'dd/MM/yyyy' }} | \r\n+                    Ajouté le: {{ doc.uploadDate | date:'dd/MM/yyyy' }} | \r\n         Par: {{ doc.uploaderUsername || doc.uploadedBy }}\r\n                   </small>\r\n                 </div>\r\n                 <div class=\"document-actions\">\r\n"
                },
                {
                    "date": 1749048127160,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -166,11 +166,11 @@\n                 <div class=\"document-info\">\r\n                   <strong class=\"document-filename\" (click)=\"downloadDocument(doc)\" matTooltip=\"Télécharger {{doc.filename}}\">{{ doc.filename }}</strong>\r\n                   <small class=\"document-description\" *ngIf=\"doc.description\">{{ doc.description }}</small>\r\n                   <small class=\"document-meta\">\r\n-                    Taille: {{ doc.size | fileSize }} | \r\n+                    Taille: {{ doc.size | NUMBER }} | \r\n                     Ajouté le: {{ doc.uploadDate | date:'dd/MM/yyyy' }} | \r\n-        Par: {{ doc.uploaderUsername || doc.uploadedBy }}\r\n+                    Par: {{ doc.uploaderUsername || doc.uploadedBy }}\r\n                   </small>\r\n                 </div>\r\n                 <div class=\"document-actions\">\r\n                   <button mat-icon-button (click)=\"downloadDocument(doc)\" matTooltip=\"Download document\">\r\n"
                },
                {
                    "date": 1749048132283,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -166,9 +166,9 @@\n                 <div class=\"document-info\">\r\n                   <strong class=\"document-filename\" (click)=\"downloadDocument(doc)\" matTooltip=\"Télécharger {{doc.filename}}\">{{ doc.filename }}</strong>\r\n                   <small class=\"document-description\" *ngIf=\"doc.description\">{{ doc.description }}</small>\r\n                   <small class=\"document-meta\">\r\n-                    Taille: {{ doc.size | NUMBER }} | \r\n+                    Taille: {{ doc.size | numb }} | \r\n                     Ajouté le: {{ doc.uploadDate | date:'dd/MM/yyyy' }} | \r\n                     Par: {{ doc.uploaderUsername || doc.uploadedBy }}\r\n                   </small>\r\n                 </div>\r\n"
                },
                {
                    "date": 1749048162141,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -166,15 +166,15 @@\n                 <div class=\"document-info\">\r\n                   <strong class=\"document-filename\" (click)=\"downloadDocument(doc)\" matTooltip=\"Télécharger {{doc.filename}}\">{{ doc.filename }}</strong>\r\n                   <small class=\"document-description\" *ngIf=\"doc.description\">{{ doc.description }}</small>\r\n                   <small class=\"document-meta\">\r\n-                    Taille: {{ doc.size | numb }} | \r\n+                    Taille: {{ doc.size | number }} | \r\n                     Ajouté le: {{ doc.uploadDate | date:'dd/MM/yyyy' }} | \r\n                     Par: {{ doc.uploaderUsername || doc.uploadedBy }}\r\n                   </small>\r\n                 </div>\r\n                 <div class=\"document-actions\">\r\n-                  <button mat-icon-button (click)=\"downloadDocument(doc)\" matTooltip=\"Download document\">\r\n+                  <button mat-icon-button (click)=\"downloadDocument(doc)\" matTooltip=\"Télécharger\">\r\n                     <i class=\"bi bi-download\"></i>\r\n                   </button>\r\n                   <!-- Add condition for delete, e.g., based on user role or if user is uploader -->\r\n                   <button mat-icon-button color=\"warn\" (click)=\"deleteDocument(doc.id)\" matTooltip=\"Delete document\">\r\n"
                },
                {
                    "date": 1749048188898,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -176,9 +176,9 @@\n                   <button mat-icon-button (click)=\"downloadDocument(doc)\" matTooltip=\"Télécharger\">\r\n                     <i class=\"bi bi-download\"></i>\r\n                   </button>\r\n                   <!-- Add condition for delete, e.g., based on user role or if user is uploader -->\r\n-                  <button mat-icon-button color=\"warn\" (click)=\"deleteDocument(doc.id)\" matTooltip=\"Delete document\">\r\n+                  <button mat-icon-button color=\"warn\" (click)=\"deleteDocument(doc.id)\" matTooltip=\"Supprimer\">\r\n                     <i class=\"bi bi-trash3\"></i>\r\n                   </button>\r\n                 </div>\r\n               </div>\r\n"
                },
                {
                    "date": 1749048208271,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -182,9 +182,9 @@\n                   </button>\r\n                 </div>\r\n               </div>\r\n               <div *ngIf=\"(!task?.documents || task?.documents?.length === 0) && !isLoadingDocuments\" class=\"no-comments\">\r\n-                No documents attached to this task yet.\r\n+                Aucun document attaché à cette tâche.\r\n               </div>\r\n             </div>\r\n           </div>\r\n \r\n"
                },
                {
                    "date": 1749048226032,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -166,9 +166,9 @@\n                 <div class=\"document-info\">\r\n                   <strong class=\"document-filename\" (click)=\"downloadDocument(doc)\" matTooltip=\"Télécharger {{doc.filename}}\">{{ doc.filename }}</strong>\r\n                   <small class=\"document-description\" *ngIf=\"doc.description\">{{ doc.description }}</small>\r\n                   <small class=\"document-meta\">\r\n-                    Taille: {{ doc.size | number }} | \r\n+                    Taille: {{ doc.size | fileSize  }} | \r\n                     Ajouté le: {{ doc.uploadDate | date:'dd/MM/yyyy' }} | \r\n                     Par: {{ doc.uploaderUsername || doc.uploadedBy }}\r\n                   </small>\r\n                 </div>\r\n"
                },
                {
                    "date": 1749300649268,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -126,71 +126,90 @@\n             </div>\r\n           </div>\r\n         </div>\r\n   \r\n-        <div class=\"task-section\">\r\n-            <div class=\"documents-header\">\r\n-            <h3><i class=\"bi bi-folder2-open\"></i> Documents</h3>\r\n-            <button mat-icon-button class=\"add-document-btn\" (click)=\"toggleAddDocumentForm()\" [matTooltip]=\"isAddingDocument ? 'Annuler l\\'ajout de document' : 'Ajouter un document'\">\r\n-              <i class=\"bi\" [ngClass]=\"isAddingDocument ? 'bi-x-circle' : 'bi-plus-circle-dotted'\"></i>\r\n-            </button>\r\n-          </div>\r\n+       <div class=\"task-section\">\r\n+  <div class=\"documents-header\">\r\n+    <h3><i class=\"bi bi-folder2-open\"></i> Documents</h3>\r\n+    <button mat-icon-button class=\"add-document-btn\" (click)=\"toggleAddDocumentForm()\" \r\n+            [matTooltip]=\"isAddingDocument ? 'Annuler' : 'Ajouter un document'\">\r\n+      <i class=\"bi\" [ngClass]=\"isAddingDocument ? 'bi-x-circle' : 'bi-plus-circle-dotted'\"></i>\r\n+    </button>\r\n+  </div>\r\n \r\n-          <!-- Upload Document Section - Conditionnellement affiché -->\r\n-          <div class=\"upload-document-section\" *ngIf=\"isAddingDocument\">\r\n-            <h4>Téléverser un nouveau document</h4>\r\n-            <div class=\"upload-form\">\r\n-              <input id=\"fileUploadInput\" type=\"file\" (change)=\"onFileSelected($event)\" class=\"form-control form-control-sm mb-2\">\r\n-              <textarea [(ngModel)]=\"fileDescription\" placeholder=\"Description du document (optionnel)...\" class=\"form-control form-control-sm mb-2\" rows=\"2\"></textarea>\r\n-              <button mat-raised-button color=\"primary\" (click)=\"uploadDocument()\" [disabled]=\"!selectedFile || isUploading\">\r\n-                <i class=\"bi bi-upload\"></i> {{ isUploading ? 'Téléversement (' + (uploadProgress !== null ? uploadProgress + '%' : '') + ')...' : 'Téléverser le fichier' }}\r\n-              </button>\r\n-              <div *ngIf=\"isUploading && uploadProgress !== null\" class=\"progress mt-2\" style=\"height: 10px;\">\r\n-                <div class=\"progress-bar\" role=\"progressbar\" [style.width.%]=\"uploadProgress\" aria-valuenow=\"uploadProgress\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\r\n-              </div>\r\n-              <div *ngIf=\"selectedFile && !isUploading\" class=\"selected-file-info mt-2\">\r\n-                Sélectionné : {{ selectedFile.name }} ({{ selectedFile.size | number }} octets)\r\n-              </div>\r\n-            </div>\r\n-          </div>\r\n-          <div *ngIf=\"isLoadingDocuments\" class=\"loading-indicator\">Loading documents...</div>\r\n-          <div *ngIf=\"!isLoadingDocuments\">\r\n-            <div class=\"documents-list\">\r\n-              <div class=\"document-item\" *ngFor=\"let doc of task?.documents\">\r\n-                <div class=\"document-icon\">\r\n-                  <i [ngClass]=\"{\r\n-                        'bi-file-earmark-image': doc.mediaType === 'IMAGE',\r\n-                        'bi-file-earmark-play': doc.mediaType === 'VIDEO',\r\n-                        'bi-file-earmark-pdf': doc.contentType === 'application/pdf',\r\n-                        'bi-file-earmark-text': doc.mediaType !== 'IMAGE' && doc.mediaType !== 'VIDEO'\r\n-      }\" class=\"bi\"></i> </div>\r\n-                <div class=\"document-info\">\r\n-                  <strong class=\"document-filename\" (click)=\"downloadDocument(doc)\" matTooltip=\"Télécharger {{doc.filename}}\">{{ doc.filename }}</strong>\r\n-                  <small class=\"document-description\" *ngIf=\"doc.description\">{{ doc.description }}</small>\r\n-                  <small class=\"document-meta\">\r\n-                    Taille: {{ doc.size | fileSize  }} | \r\n-                    Ajouté le: {{ doc.uploadDate | date:'dd/MM/yyyy' }} | \r\n-                    Par: {{ doc.uploaderUsername || doc.uploadedBy }}\r\n-                  </small>\r\n-                </div>\r\n-                <div class=\"document-actions\">\r\n-                  <button mat-icon-button (click)=\"downloadDocument(doc)\" matTooltip=\"Télécharger\">\r\n-                    <i class=\"bi bi-download\"></i>\r\n-                  </button>\r\n-                  <!-- Add condition for delete, e.g., based on user role or if user is uploader -->\r\n-                  <button mat-icon-button color=\"warn\" (click)=\"deleteDocument(doc.id)\" matTooltip=\"Supprimer\">\r\n-                    <i class=\"bi bi-trash3\"></i>\r\n-                  </button>\r\n-                </div>\r\n-              </div>\r\n-              <div *ngIf=\"(!task?.documents || task?.documents?.length === 0) && !isLoadingDocuments\" class=\"no-comments\">\r\n-                Aucun document attaché à cette tâche.\r\n-              </div>\r\n-            </div>\r\n-          </div>\r\n+  <!-- Formulaire d'upload -->\r\n+  <div class=\"upload-document-section\" *ngIf=\"isAddingDocument\">\r\n+    <h4>Ajouter un document</h4>\r\n+    <div class=\"upload-form\">\r\n+      <input id=\"fileUploadInput\" type=\"file\" (change)=\"onFileSelected($event)\" \r\n+             class=\"form-control form-control-sm mb-2\" accept=\"*/*\">\r\n+      \r\n+      <textarea [(ngModel)]=\"fileDescription\" placeholder=\"Description (optionnelle)...\"\r\n+                class=\"form-control form-control-sm mb-2\" rows=\"2\"></textarea>\r\n+      \r\n+      <button mat-raised-button color=\"primary\" (click)=\"uploadDocument()\" \r\n+              [disabled]=\"!selectedFile || isUploading\">\r\n+        <i class=\"bi bi-upload\"></i> \r\n+        {{ isUploading ? 'Envoi en cours...' + (uploadProgress ? ' (' + uploadProgress + '%)' : '') : 'Envoyer' }}\r\n+      </button>\r\n+      \r\n+      <div *ngIf=\"isUploading\" class=\"progress mt-2\">\r\n+        <div class=\"progress-bar\" role=\"progressbar\" \r\n+             [style.width.%]=\"uploadProgress || 0\"></div>\r\n+      </div>\r\n+      \r\n+      <div *ngIf=\"selectedFile\" class=\"selected-file-info mt-2\">\r\n+        Fichier sélectionné: {{ selectedFile.name }} ({{ selectedFile.size | fileSize }})\r\n+      </div>\r\n+    </div>\r\n+  </div>\r\n \r\n-          \r\n+  <!-- Liste des documents -->\r\n+  <div *ngIf=\"isLoadingDocuments\" class=\"loading-indicator\">\r\n+    <mat-spinner diameter=\"30\"></mat-spinner>\r\n+  </div>\r\n+\r\n+  <div *ngIf=\"!isLoadingDocuments\">\r\n+    <div class=\"documents-list\">\r\n+      <div class=\"document-item\" *ngFor=\"let doc of task?.documents\">\r\n+        <div class=\"document-icon\">\r\n+          <i [ngClass]=\"{\r\n+            'bi-file-earmark-image': doc.mediaType === 'IMAGE',\r\n+            'bi-file-earmark-play': doc.mediaType === 'VIDEO',\r\n+            'bi-file-earmark-pdf': doc.contentType === 'application/pdf',\r\n+            'bi-file-earmark-text': doc.mediaType === 'DOCUMENT' || doc.mediaType === 'TEXT',\r\n+            'bi-file-earmark': !['IMAGE', 'VIDEO', 'DOCUMENT', 'TEXT'].includes(doc.mediaType)\r\n+          }\"></i>\r\n         </div>\r\n+        \r\n+        <div class=\"document-info\">\r\n+          <a href=\"javascript:void(0)\" (click)=\"downloadDocument(doc)\" class=\"document-filename\">\r\n+            {{ doc.filename }}\r\n+          </a>\r\n+          <small class=\"document-description\" *ngIf=\"doc.description\">{{ doc.description }}</small>\r\n+          <small class=\"document-meta\">\r\n+            {{ doc.size | fileSize }} | \r\n+            {{ doc.uploadDate | date:'dd/MM/yyyy' }} | \r\n+            {{ doc.uploaderUsername || doc.uploadedBy }}\r\n+          </small>\r\n+        </div>\r\n+        \r\n+        <div class=\"document-actions\">\r\n+          <button mat-icon-button (click)=\"downloadDocument(doc)\" matTooltip=\"Télécharger\">\r\n+            <i class=\"bi bi-download\"></i>\r\n+          </button>\r\n+          <button mat-icon-button color=\"warn\" (click)=\"deleteDocument(doc.id)\" matTooltip=\"Supprimer\">\r\n+            <i class=\"bi bi-trash3\"></i>\r\n+          </button>\r\n+        </div>\r\n+      </div>\r\n+      \r\n+      <div *ngIf=\"!task?.documents?.length\" class=\"no-documents\">\r\n+        Aucun document attaché à cette tâche.\r\n+      </div>\r\n+    </div>\r\n+  </div>\r\n+</div>\r\n         <div class=\"task-section\">\r\n           <h3>Historiques</h3>\r\n           <div *ngIf=\"isLoadingActivities\" class=\"loading-indicator\">Loading activities...</div>\r\n           <div *ngIf=\"!isLoadingActivities\">\r\n"
                }
            ],
            "date": 1744726774081,
            "name": "Commit-0",
            "content": "<div class=\"modal-header\">\r\n    <h4 class=\"modal-title\">{{ task?.name }}</h4>\r\n    <button type=\"button\" class=\"close\" (click)=\"activeModal.dismiss()\">\r\n      <span>&times;</span>\r\n    </button>\r\n  </div>\r\n  \r\n  <div class=\"modal-body\">\r\n    <div class=\"row\">\r\n      <div class=\"col-md-8\">\r\n        <!-- Section Description -->\r\n        <div class=\"card mb-3\">\r\n          <div class=\"card-header\">\r\n            <h5>Description</h5>\r\n          </div>\r\n          <div class=\"card-body\">\r\n            <p>{{ task?.description || 'Aucune description' }}</p>\r\n          </div>\r\n        </div>\r\n  \r\n        <!-- Section Sous-tâches -->\r\n        <div class=\"card mb-3\" *ngIf=\"task?.subTasks?.length\">\r\n          <div class=\"card-header\">\r\n            <h5>Sous-tâches</h5>\r\n          </div>\r\n          <div class=\"card-body\">\r\n            <ul class=\"list-group\">\r\n              <li class=\"list-group-item\" *ngFor=\"let subTask of task.subTasks\">\r\n                <div class=\"d-flex justify-content-between align-items-center\">\r\n                  <span>{{ subTask.name }}</span>\r\n                  <span class=\"badge\" [ngClass]=\"{\r\n                    'badge-primary': subTask.status === 'PENDING',\r\n                    'badge-warning': subTask.status === 'IN_PROGRESS',\r\n                    'badge-success': subTask.status === 'COMPLETED'\r\n                  }\">\r\n                    {{ subTask.status }}\r\n                  </span>\r\n                </div>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n  \r\n        <!-- Section Commentaires -->\r\n        <div class=\"card mb-3\">\r\n          <div class=\"card-header\">\r\n            <h5>Commentaires</h5>\r\n          </div>\r\n          <div class=\"card-body\">\r\n            <div class=\"comment-list\">\r\n              <div class=\"comment-item mb-3\" *ngFor=\"let comment of comments\">\r\n                <div class=\"d-flex\">\r\n                  <img [src]=\"comment.user.avatar\" class=\"rounded-circle mr-3\" width=\"40\" height=\"40\">\r\n                  <div>\r\n                    <strong>{{ comment.user.name }}</strong>\r\n                    <small class=\"text-muted ml-2\">{{ comment.date | date:'short' }}</small>\r\n                    <p>{{ comment.text }}</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"comment-form\">\r\n              <textarea class=\"form-control mb-2\" [(ngModel)]=\"newComment\" placeholder=\"Ajouter un commentaire...\"></textarea>\r\n              <button class=\"btn btn-primary\" (click)=\"addComment()\">Envoyer</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  \r\n      <div class=\"col-md-4\">\r\n        <!-- Section Métadonnées -->\r\n        <div class=\"card mb-3\">\r\n          <div class=\"card-header\">\r\n            <h5>Détails</h5>\r\n          </div>\r\n          <div class=\"card-body\">\r\n            <ul class=\"list-group list-group-flush\">\r\n              <li class=\"list-group-item\">\r\n                <strong>Phase:</strong> {{ phaseName }}\r\n              </li>\r\n              <li class=\"list-group-item\">\r\n                <strong>Statut:</strong>\r\n                <select class=\"form-control mt-1\" [(ngModel)]=\"task.status\" (change)=\"updateStatus()\">\r\n                  <option value=\"PENDING\">À faire</option>\r\n                  <option value=\"IN_PROGRESS\">En cours</option>\r\n                  <option value=\"COMPLETED\">Terminé</option>\r\n                </select>\r\n              </li>\r\n              <li class=\"list-group-item\">\r\n                <strong>Priorité:</strong>\r\n                <select class=\"form-control mt-1\" [(ngModel)]=\"task.priority\" (change)=\"updatePriority()\">\r\n                  <option value=\"HIGH\">Haute</option>\r\n                  <option value=\"MEDIUM\">Moyenne</option>\r\n                  <option value=\"LOW\">Basse</option>\r\n                </select>\r\n              </li>\r\n              <li class=\"list-group-item\">\r\n                <strong>Date de début:</strong> {{ task.startDate | date:'mediumDate' }}\r\n              </li>\r\n              <li class=\"list-group-item\">\r\n                <strong>Date de fin:</strong> {{ task.endDate | date:'mediumDate' }}\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n  \r\n        <!-- Section Documents -->\r\n        <div class=\"card mb-3\">\r\n          <div class=\"card-header\">\r\n            <h5>Documents</h5>\r\n          </div>\r\n          <div class=\"card-body\">\r\n            <div class=\"media-gallery\">\r\n              <div class=\"media-item\" *ngFor=\"let media of mediaFiles\">\r\n                <img *ngIf=\"media.type === 'image'\" [src]=\"media.url\" class=\"img-thumbnail\">\r\n                <video *ngIf=\"media.type === 'video'\" controls class=\"img-thumbnail\">\r\n                  <source [src]=\"media.url\" type=\"video/mp4\">\r\n                </video>\r\n                <div class=\"media-actions\">\r\n                  <button class=\"btn btn-sm btn-danger\" (click)=\"deleteMedia(media)\">\r\n                    <i class=\"bi bi-trash\"></i>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"upload-section mt-3\">\r\n              <input type=\"file\" #fileInput (change)=\"handleFileInput($event)\" multiple style=\"display: none\">\r\n              <button class=\"btn btn-secondary btn-block\" (click)=\"fileInput.click()\">\r\n                <i class=\"bi bi-upload\"></i> Ajouter des fichiers\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n  \r\n        <!-- Section Historique -->\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">\r\n            <h5>Historique</h5>\r\n          </div>\r\n          <div class=\"card-body\">\r\n            <ul class=\"timeline\">\r\n              <li *ngFor=\"let history of taskHistory\">\r\n                <div class=\"timeline-item\">\r\n                  <span class=\"time\">{{ history.date | date:'short' }}</span>\r\n                  <h6 class=\"timeline-header\">{{ history.user.name }}</h6>\r\n                  <div class=\"timeline-body\">\r\n                    {{ history.action }}\r\n                  </div>\r\n                </div>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  \r\n  <div class=\"modal-footer\">\r\n    <button type=\"button\" class=\"btn btn-secondary\" (click)=\"activeModal.dismiss()\">Fermer</button>\r\n    <button type=\"button\" class=\"btn btn-primary\" (click)=\"saveChanges()\">Enregistrer</button>\r\n  </div>"
        }
    ]
}
{
    "sourceFile": "src/app/super-admin/agences/agences.component.html",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 60,
            "patches": [
                {
                    "date": 1744021062768,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1744024477044,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,9 +16,9 @@\n         </div>\r\n   \r\n         <!-- Add Agency Button -->\r\n         <button mat-button class=\"add-agency\" (click)=\"addAgency()\">\r\n-          <i class=\"bi bi-plus\"></i> Nouvelle Agence\r\n+            <mat-icon>add</mat-icon> Nouvelle Agence\r\n         </button>\r\n       </div>\r\n   \r\n       <!-- Agency Table -->\r\n"
                },
                {
                    "date": 1744024632418,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,54 +1,76 @@\n <div class=\"agence-container\">\r\n     <app-header [title]=\"'Liste des Agences'\"></app-header>\r\n   \r\n     <div class=\"container\">\r\n-      <!-- Row 1: Search Bar, Current Date, and Add Button -->\r\n+      <!-- Header avec recherche, date et bouton -->\r\n       <div class=\"agence-header\">\r\n-        <!-- Search Bar -->\r\n+        <!-- Barre de recherche -->\r\n         <div class=\"input-container\">\r\n           <i class=\"bi bi-search icon\"></i>\r\n           <input type=\"text\" placeholder=\"Rechercher une agence...\" [(ngModel)]=\"searchQuery\" (input)=\"filterAgencies()\" />\r\n         </div>\r\n   \r\n-        <!-- Date -->\r\n+        <!-- Date actuelle -->\r\n         <div class=\"current-date\">\r\n           {{ currentDate | date: 'dd/MM/yyyy' }}\r\n         </div>\r\n   \r\n-        <!-- Add Agency Button -->\r\n-        <button mat-button class=\"add-agency\" (click)=\"addAgency()\">\r\n-            <mat-icon>add</mat-icon> Nouvelle Agence\r\n+        <!-- Bouton Ajouter -->\r\n+        <button mat-raised-button color=\"primary\" class=\"add-agency\" (click)=\"openAddDialog()\">\r\n+          <i class=\"bi bi-plus\"></i> Nouvelle Agence\r\n         </button>\r\n       </div>\r\n   \r\n-      <!-- Agency Table -->\r\n+      <!-- Tableau des agences -->\r\n       <div class=\"agence-display\">\r\n-        <div class=\"agence-table\">\r\n-          <table>\r\n-            <thead>\r\n-              <tr>\r\n-                <th>Nom</th>\r\n-                <th>Adresse</th>\r\n-                <th>Email</th>\r\n-                <th>Téléphone</th>\r\n-                <th>Date de Création</th>\r\n-                <th>Actions</th>\r\n-              </tr>\r\n-            </thead>\r\n-            <tbody>\r\n-              <tr *ngFor=\"let agency of filteredAgencies; let i = index\" [class.even]=\"i % 2 === 0\" [class.odd]=\"i % 2 !== 0\">\r\n-                <td>{{ agency.name }}</td>\r\n-                <td>{{ agency.address }}</td>\r\n-                <td>{{ agency.email }}</td>\r\n-                <td>{{ agency.phone }}</td>\r\n-                <td>{{ agency.createdAt | date:'dd/MM/yyyy' }}</td>\r\n-                <td class=\"actions\">\r\n-                  <button class=\"edit-btn\" (click)=\"editAgency(agency)\"><i class=\"bi bi-pencil\"></i></button>\r\n-                  <button class=\"delete-btn\" (click)=\"deleteAgency(agency)\"><i class=\"bi bi-trash\"></i></button>\r\n-                </td>\r\n-              </tr>\r\n-            </tbody>\r\n+        <div class=\"agence-table mat-elevation-z8\">\r\n+          <table mat-table [dataSource]=\"filteredAgencies\">\r\n+            <!-- Colonne Nom -->\r\n+            <ng-container matColumnDef=\"name\">\r\n+              <th mat-header-cell *matHeaderCellDef>Nom</th>\r\n+              <td mat-cell *matCellDef=\"let agency\">{{ agency.name }}</td>\r\n+            </ng-container>\r\n+  \r\n+            <!-- Colonne Adresse -->\r\n+            <ng-container matColumnDef=\"address\">\r\n+              <th mat-header-cell *matHeaderCellDef>Adresse</th>\r\n+              <td mat-cell *matCellDef=\"let agency\">{{ agency.address }}</td>\r\n+            </ng-container>\r\n+  \r\n+            <!-- Colonne Email -->\r\n+            <ng-container matColumnDef=\"email\">\r\n+              <th mat-header-cell *matHeaderCellDef>Email</th>\r\n+              <td mat-cell *matCellDef=\"let agency\">{{ agency.email }}</td>\r\n+            </ng-container>\r\n+  \r\n+            <!-- Colonne Téléphone -->\r\n+            <ng-container matColumnDef=\"phone\">\r\n+              <th mat-header-cell *matHeaderCellDef>Téléphone</th>\r\n+              <td mat-cell *matCellDef=\"let agency\">{{ agency.phone }}</td>\r\n+            </ng-container>\r\n+  \r\n+            <!-- Colonne Date de création -->\r\n+            <ng-container matColumnDef=\"createdAt\">\r\n+              <th mat-header-cell *matHeaderCellDef>Date de Création</th>\r\n+              <td mat-cell *matCellDef=\"let agency\">{{ agency.createdAt | date:'dd/MM/yyyy' }}</td>\r\n+            </ng-container>\r\n+  \r\n+            <!-- Colonne Actions -->\r\n+            <ng-container matColumnDef=\"actions\">\r\n+              <th mat-header-cell *matHeaderCellDef>Actions</th>\r\n+              <td mat-cell *matCellDef=\"let agency\">\r\n+                <button mat-icon-button color=\"primary\" (click)=\"openEditDialog(agency); $event.stopPropagation()\">\r\n+                  <mat-icon>edit</mat-icon>\r\n+                </button>\r\n+                <button mat-icon-button color=\"warn\" (click)=\"deleteAgency(agency); $event.stopPropagation()\">\r\n+                  <mat-icon>delete</mat-icon>\r\n+                </button>\r\n+              </td>\r\n+            </ng-container>\r\n+  \r\n+            <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n+            <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n           </table>\r\n         </div>\r\n       </div>\r\n     </div>\r\n"
                },
                {
                    "date": 1744024641207,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,76 +1,54 @@\n <div class=\"agence-container\">\r\n     <app-header [title]=\"'Liste des Agences'\"></app-header>\r\n   \r\n     <div class=\"container\">\r\n-      <!-- Header avec recherche, date et bouton -->\r\n+      <!-- Row 1: Search Bar, Current Date, and Add Button -->\r\n       <div class=\"agence-header\">\r\n-        <!-- Barre de recherche -->\r\n+        <!-- Search Bar -->\r\n         <div class=\"input-container\">\r\n           <i class=\"bi bi-search icon\"></i>\r\n           <input type=\"text\" placeholder=\"Rechercher une agence...\" [(ngModel)]=\"searchQuery\" (input)=\"filterAgencies()\" />\r\n         </div>\r\n   \r\n-        <!-- Date actuelle -->\r\n+        <!-- Date -->\r\n         <div class=\"current-date\">\r\n           {{ currentDate | date: 'dd/MM/yyyy' }}\r\n         </div>\r\n   \r\n-        <!-- Bouton Ajouter -->\r\n-        <button mat-raised-button color=\"primary\" class=\"add-agency\" (click)=\"openAddDialog()\">\r\n+        <!-- Add Agency Button -->\r\n+        <button mat-button class=\"add-agency\" (click)=\"addAgency()\">\r\n           <i class=\"bi bi-plus\"></i> Nouvelle Agence\r\n         </button>\r\n       </div>\r\n   \r\n-      <!-- Tableau des agences -->\r\n+      <!-- Agency Table -->\r\n       <div class=\"agence-display\">\r\n-        <div class=\"agence-table mat-elevation-z8\">\r\n-          <table mat-table [dataSource]=\"filteredAgencies\">\r\n-            <!-- Colonne Nom -->\r\n-            <ng-container matColumnDef=\"name\">\r\n-              <th mat-header-cell *matHeaderCellDef>Nom</th>\r\n-              <td mat-cell *matCellDef=\"let agency\">{{ agency.name }}</td>\r\n-            </ng-container>\r\n-  \r\n-            <!-- Colonne Adresse -->\r\n-            <ng-container matColumnDef=\"address\">\r\n-              <th mat-header-cell *matHeaderCellDef>Adresse</th>\r\n-              <td mat-cell *matCellDef=\"let agency\">{{ agency.address }}</td>\r\n-            </ng-container>\r\n-  \r\n-            <!-- Colonne Email -->\r\n-            <ng-container matColumnDef=\"email\">\r\n-              <th mat-header-cell *matHeaderCellDef>Email</th>\r\n-              <td mat-cell *matCellDef=\"let agency\">{{ agency.email }}</td>\r\n-            </ng-container>\r\n-  \r\n-            <!-- Colonne Téléphone -->\r\n-            <ng-container matColumnDef=\"phone\">\r\n-              <th mat-header-cell *matHeaderCellDef>Téléphone</th>\r\n-              <td mat-cell *matCellDef=\"let agency\">{{ agency.phone }}</td>\r\n-            </ng-container>\r\n-  \r\n-            <!-- Colonne Date de création -->\r\n-            <ng-container matColumnDef=\"createdAt\">\r\n-              <th mat-header-cell *matHeaderCellDef>Date de Création</th>\r\n-              <td mat-cell *matCellDef=\"let agency\">{{ agency.createdAt | date:'dd/MM/yyyy' }}</td>\r\n-            </ng-container>\r\n-  \r\n-            <!-- Colonne Actions -->\r\n-            <ng-container matColumnDef=\"actions\">\r\n-              <th mat-header-cell *matHeaderCellDef>Actions</th>\r\n-              <td mat-cell *matCellDef=\"let agency\">\r\n-                <button mat-icon-button color=\"primary\" (click)=\"openEditDialog(agency); $event.stopPropagation()\">\r\n-                  <mat-icon>edit</mat-icon>\r\n-                </button>\r\n-                <button mat-icon-button color=\"warn\" (click)=\"deleteAgency(agency); $event.stopPropagation()\">\r\n-                  <mat-icon>delete</mat-icon>\r\n-                </button>\r\n-              </td>\r\n-            </ng-container>\r\n-  \r\n-            <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\r\n-            <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\r\n+        <div class=\"agence-table\">\r\n+          <table>\r\n+            <thead>\r\n+              <tr>\r\n+                <th>Nom</th>\r\n+                <th>Adresse</th>\r\n+                <th>Email</th>\r\n+                <th>Téléphone</th>\r\n+                <th>Date de Création</th>\r\n+                <th>Actions</th>\r\n+              </tr>\r\n+            </thead>\r\n+            <tbody>\r\n+              <tr *ngFor=\"let agency of filteredAgencies; let i = index\" [class.even]=\"i % 2 === 0\" [class.odd]=\"i % 2 !== 0\">\r\n+                <td>{{ agency.name }}</td>\r\n+                <td>{{ agency.address }}</td>\r\n+                <td>{{ agency.email }}</td>\r\n+                <td>{{ agency.phone }}</td>\r\n+                <td>{{ agency.createdAt | date:'dd/MM/yyyy' }}</td>\r\n+                <td class=\"actions\">\r\n+                  <button class=\"edit-btn\" (click)=\"editAgency(agency)\"><i class=\"bi bi-pencil\"></i></button>\r\n+                  <button class=\"delete-btn\" (click)=\"deleteAgency(agency)\"><i class=\"bi bi-trash\"></i></button>\r\n+                </td>\r\n+              </tr>\r\n+            </tbody>\r\n           </table>\r\n         </div>\r\n       </div>\r\n     </div>\r\n"
                },
                {
                    "date": 1744030392433,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,9 +35,12 @@\n                 <th>Actions</th>\r\n               </tr>\r\n             </thead>\r\n             <tbody>\r\n-              <tr *ngFor=\"let agency of filteredAgencies; let i = index\" [class.even]=\"i % 2 === 0\" [class.odd]=\"i % 2 !== 0\">\r\n+                <tr *ngFor=\"let agency of filteredAgencies; let i = index\" \r\n+                [class.even]=\"i % 2 === 0\" \r\n+                [class.odd]=\"i % 2 !== 0\"\r\n+                (click)=\"showAgencyDetails(agency)\">\r\n                 <td>{{ agency.name }}</td>\r\n                 <td>{{ agency.address }}</td>\r\n                 <td>{{ agency.email }}</td>\r\n                 <td>{{ agency.phone }}</td>\r\n"
                },
                {
                    "date": 1744031252228,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,11 +45,15 @@\n                 <td>{{ agency.email }}</td>\r\n                 <td>{{ agency.phone }}</td>\r\n                 <td>{{ agency.createdAt | date:'dd/MM/yyyy' }}</td>\r\n                 <td class=\"actions\">\r\n-                  <button class=\"edit-btn\" (click)=\"editAgency(agency)\"><i class=\"bi bi-pencil\"></i></button>\r\n-                  <button class=\"delete-btn\" (click)=\"deleteAgency(agency)\"><i class=\"bi bi-trash\"></i></button>\r\n-                </td>\r\n+                    <button class=\"edit-btn\" (click)=\"editAgency(agency); $event.stopPropagation()\">\r\n+                      <i class=\"bi bi-pencil\"></i>\r\n+                    </button>\r\n+                    <button class=\"delete-btn\" (click)=\"deleteAgency(agency); $event.stopPropagation()\">\r\n+                      <i class=\"bi bi-trash\"></i>\r\n+                    </button>\r\n+                  </td>\r\n               </tr>\r\n             </tbody>\r\n           </table>\r\n         </div>\r\n"
                },
                {
                    "date": 1744031714763,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -48,9 +48,9 @@\n                 <td class=\"actions\">\r\n                     <button class=\"edit-btn\" (click)=\"editAgency(agency); $event.stopPropagation()\">\r\n                       <i class=\"bi bi-pencil\"></i>\r\n                     </button>\r\n-                    <button class=\"delete-btn\" (click)=\"deleteAgency(agency); $event.stopPropagation()\">\r\n+                    <button class=\"delete-btn\" (click)=\"deleteAgency(agency, $event)\">; $event.stopPropagation()\">\r\n                       <i class=\"bi bi-trash\"></i>\r\n                     </button>\r\n                   </td>\r\n               </tr>\r\n"
                },
                {
                    "date": 1744032401355,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,9 +38,9 @@\n             <tbody>\r\n                 <tr *ngFor=\"let agency of filteredAgencies; let i = index\" \r\n                 [class.even]=\"i % 2 === 0\" \r\n                 [class.odd]=\"i % 2 !== 0\"\r\n-                (click)=\"showAgencyDetails(agency)\">\r\n+                [routerLink]=\"['/agences', agency._id]\">\r\n                 <td>{{ agency.name }}</td>\r\n                 <td>{{ agency.address }}</td>\r\n                 <td>{{ agency.email }}</td>\r\n                 <td>{{ agency.phone }}</td>\r\n@@ -48,9 +48,9 @@\n                 <td class=\"actions\">\r\n                     <button class=\"edit-btn\" (click)=\"editAgency(agency); $event.stopPropagation()\">\r\n                       <i class=\"bi bi-pencil\"></i>\r\n                     </button>\r\n-                    <button class=\"delete-btn\" (click)=\"deleteAgency(agency, $event)\">; $event.stopPropagation()\">\r\n+                    <button class=\"delete-btn\" (click)=\"deleteAgency(agency, $event); $event.stopPropagation()\">\r\n                       <i class=\"bi bi-trash\"></i>\r\n                     </button>\r\n                   </td>\r\n               </tr>\r\n"
                },
                {
                    "date": 1744033132077,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,9 +38,9 @@\n             <tbody>\r\n                 <tr *ngFor=\"let agency of filteredAgencies; let i = index\" \r\n                 [class.even]=\"i % 2 === 0\" \r\n                 [class.odd]=\"i % 2 !== 0\"\r\n-                [routerLink]=\"['/agences', agency._id]\">\r\n+                (click)=\"showAgencyDetails(agency)\">\r\n                 <td>{{ agency.name }}</td>\r\n                 <td>{{ agency.address }}</td>\r\n                 <td>{{ agency.email }}</td>\r\n                 <td>{{ agency.phone }}</td>\r\n"
                },
                {
                    "date": 1745063808414,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n           {{ currentDate | date: 'dd/MM/yyyy' }}\r\n         </div>\r\n   \r\n         <!-- Add Agency Button -->\r\n-        <button mat-button class=\"add-agency\" (click)=\"addAgency()\">\r\n+        <button mat-button class=\"add-agency \" (click)=\"addAgency()\">\r\n           <i class=\"bi bi-plus\"></i> Nouvelle Agence\r\n         </button>\r\n       </div>\r\n   \r\n"
                },
                {
                    "date": 1745063814941,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n           {{ currentDate | date: 'dd/MM/yyyy' }}\r\n         </div>\r\n   \r\n         <!-- Add Agency Button -->\r\n-        <button mat-button class=\"add-agency \" (click)=\"addAgency()\">\r\n+        <button class=\"add-agency btn btn-primary\" (click)=\"addAgency()\">\r\n           <i class=\"bi bi-plus\"></i> Nouvelle Agence\r\n         </button>\r\n       </div>\r\n   \r\n"
                },
                {
                    "date": 1745360341193,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -48,9 +48,9 @@\n                 <td class=\"actions\">\r\n                     <button class=\"edit-btn\" (click)=\"editAgency(agency); $event.stopPropagation()\">\r\n                       <i class=\"bi bi-pencil\"></i>\r\n                     </button>\r\n-                    <button class=\"delete-btn\" (click)=\"deleteAgency(agency, $event); $event.stopPropagation()\">\r\n+                    <button class=\"delete-btn\" (click)=\"deleteAgence(agence.id, agence.name)\">\r\n                       <i class=\"bi bi-trash\"></i>\r\n                     </button>\r\n                   </td>\r\n               </tr>\r\n"
                },
                {
                    "date": 1745360346636,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -48,9 +48,9 @@\n                 <td class=\"actions\">\r\n                     <button class=\"edit-btn\" (click)=\"editAgency(agency); $event.stopPropagation()\">\r\n                       <i class=\"bi bi-pencil\"></i>\r\n                     </button>\r\n-                    <button class=\"delete-btn\" (click)=\"deleteAgence(agence.id, agence.name)\">\r\n+                    <button class=\"delete-btn\" (click)=\"deleteAgence(agency.id, agence.name)\">\r\n                       <i class=\"bi bi-trash\"></i>\r\n                     </button>\r\n                   </td>\r\n               </tr>\r\n"
                },
                {
                    "date": 1745360423452,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -48,9 +48,9 @@\n                 <td class=\"actions\">\r\n                     <button class=\"edit-btn\" (click)=\"editAgency(agency); $event.stopPropagation()\">\r\n                       <i class=\"bi bi-pencil\"></i>\r\n                     </button>\r\n-                    <button class=\"delete-btn\" (click)=\"deleteAgence(agency.id, agence.name)\">\r\n+                    <button class=\"delete-btn\" (click)=\"deleteAgency(agency, $event); $event.stopPropagation()\">\r\n                       <i class=\"bi bi-trash\"></i>\r\n                     </button>\r\n                   </td>\r\n               </tr>\r\n"
                },
                {
                    "date": 1745360430123,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -48,9 +48,9 @@\n                 <td class=\"actions\">\r\n                     <button class=\"edit-btn\" (click)=\"editAgency(agency); $event.stopPropagation()\">\r\n                       <i class=\"bi bi-pencil\"></i>\r\n                     </button>\r\n-                    <button class=\"delete-btn\" (click)=\"deleteAgency(agency, $event); $event.stopPropagation()\">\r\n+                    <button class=\"delete-btn\" (click)=\"deleteAgence(agency.id, agency.name)\" $event.stopPropagation()\">\r\n                       <i class=\"bi bi-trash\"></i>\r\n                     </button>\r\n                   </td>\r\n               </tr>\r\n"
                },
                {
                    "date": 1745360468597,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -48,9 +48,9 @@\n                 <td class=\"actions\">\r\n                     <button class=\"edit-btn\" (click)=\"editAgency(agency); $event.stopPropagation()\">\r\n                       <i class=\"bi bi-pencil\"></i>\r\n                     </button>\r\n-                    <button class=\"delete-btn\" (click)=\"deleteAgence(agency.id, agency.name)\" $event.stopPropagation()\">\r\n+                    <button class=\"delete-btn\" (click)=\"deleteAgence(agency.id, agency.name); $event.stopPropagation()\">\r\n                       <i class=\"bi bi-trash\"></i>\r\n                     </button>\r\n                   </td>\r\n               </tr>\r\n"
                },
                {
                    "date": 1745360504379,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,62 +1,93 @@\n <div class=\"agence-container\">\r\n-    <app-header [title]=\"'Liste des Agences'\"></app-header>\r\n-  \r\n-    <div class=\"container\">\r\n-      <!-- Row 1: Search Bar, Current Date, and Add Button -->\r\n-      <div class=\"agence-header\">\r\n-        <!-- Search Bar -->\r\n-        <div class=\"input-container\">\r\n-          <i class=\"bi bi-search icon\"></i>\r\n-          <input type=\"text\" placeholder=\"Rechercher une agence...\" [(ngModel)]=\"searchQuery\" (input)=\"filterAgencies()\" />\r\n-        </div>\r\n-  \r\n-        <!-- Date -->\r\n-        <div class=\"current-date\">\r\n-          {{ currentDate | date: 'dd/MM/yyyy' }}\r\n-        </div>\r\n-  \r\n-        <!-- Add Agency Button -->\r\n-        <button class=\"add-agency btn btn-primary\" (click)=\"addAgency()\">\r\n-          <i class=\"bi bi-plus\"></i> Nouvelle Agence\r\n-        </button>\r\n+  <app-header [title]=\"'Liste des Agences'\"></app-header>\r\n+\r\n+  <div class=\"container\">\r\n+    <!-- Row 1: Search Bar, Current Date, and Add Button -->\r\n+    <div class=\"agence-header\">\r\n+      <!-- Search Bar -->\r\n+      <div class=\"input-container\">\r\n+        <i class=\"bi bi-search icon\"></i>\r\n+        <!-- Added aria-label for accessibility -->\r\n+        <input\r\n+          type=\"text\"\r\n+          placeholder=\"Rechercher une agence...\"\r\n+          [(ngModel)]=\"searchQuery\"\r\n+          (input)=\"filterAgencies()\"\r\n+          aria-label=\"Rechercher une agence\"\r\n+        />\r\n       </div>\r\n-  \r\n-      <!-- Agency Table -->\r\n-      <div class=\"agence-display\">\r\n-        <div class=\"agence-table\">\r\n-          <table>\r\n-            <thead>\r\n-              <tr>\r\n-                <th>Nom</th>\r\n-                <th>Adresse</th>\r\n-                <th>Email</th>\r\n-                <th>Téléphone</th>\r\n-                <th>Date de Création</th>\r\n-                <th>Actions</th>\r\n-              </tr>\r\n-            </thead>\r\n-            <tbody>\r\n-                <tr *ngFor=\"let agency of filteredAgencies; let i = index\" \r\n-                [class.even]=\"i % 2 === 0\" \r\n+\r\n+      <!-- Date -->\r\n+      <div class=\"current-date\">\r\n+        {{ currentDate | date: 'dd/MM/yyyy' }}\r\n+      </div>\r\n+\r\n\\ No newline at end of file\n+      <!-- Add Agency Button -->\r\n+      <button class=\"add-agency btn btn-primary\" (click)=\"addAgency()\">\r\n+        <i class=\"bi bi-plus\"></i> Nouvelle Agence\r\n+      </button>\r\n+    </div>\r\n+\r\n+    <!-- Agency Table -->\r\n+    <div class=\"agence-display\">\r\n+      <div class=\"agence-table\">\r\n+        <table>\r\n+          <thead>\r\n+            <tr>\r\n+              <th>Nom</th>\r\n+              <th>Adresse</th>\r\n+              <th>Email</th>\r\n+              <th>Téléphone</th>\r\n+              <th>Date de Création</th>\r\n+              <th>Actions</th>\r\n+            </tr>\r\n+          </thead>\r\n+          <tbody>\r\n+            <!-- Loop through agencies -->\r\n+            <tr *ngFor=\"let agency of filteredAgencies; let i = index\"\r\n+                [class.even]=\"i % 2 === 0\"\r\n                 [class.odd]=\"i % 2 !== 0\"\r\n-                (click)=\"showAgencyDetails(agency)\">\r\n-                <td>{{ agency.name }}</td>\r\n-                <td>{{ agency.address }}</td>\r\n-                <td>{{ agency.email }}</td>\r\n-                <td>{{ agency.phone }}</td>\r\n-                <td>{{ agency.createdAt | date:'dd/MM/yyyy' }}</td>\r\n-                <td class=\"actions\">\r\n-                    <button class=\"edit-btn\" (click)=\"editAgency(agency); $event.stopPropagation()\">\r\n-                      <i class=\"bi bi-pencil\"></i>\r\n-                    </button>\r\n-                    <button class=\"delete-btn\" (click)=\"deleteAgence(agency.id, agency.name); $event.stopPropagation()\">\r\n-                      <i class=\"bi bi-trash\"></i>\r\n-                    </button>\r\n-                  </td>\r\n-              </tr>\r\n-            </tbody>\r\n-          </table>\r\n-        </div>\r\n+                (click)=\"showAgencyDetails(agency)\"\r\n+                tabindex=\"0\" <!-- Make row focusable -->\r\n+                role=\"button\" <!-- Indicate it's clickable -->\r\n+                (keydown.enter)=\"showAgencyDetails(agency)\" <!-- Allow activation with Enter key -->\r\n+                [attr.aria-label]=\"'Voir les détails pour ' + agency.name\"> <!-- Describe row action -->\r\n+\r\n+              <td>{{ agency.name }}</td>\r\n+              <td>{{ agency.address }}</td>\r\n+              <td>{{ agency.email }}</td>\r\n+              <td>{{ agency.phone }}</td>\r\n+              <td>{{ agency.createdAt | date:'dd/MM/yyyy' }}</td>\r\n+              <td class=\"actions\">\r\n+                <!-- Edit Button: Added aria-label and prevented row click -->\r\n+                <button\r\n+                  class=\"edit-btn\"\r\n+                  (click)=\"editAgency(agency); $event.stopPropagation()\"\r\n+                  [attr.aria-label]=\"'Modifier l\\'agence ' + agency.name\"\r\n+                  title=\"Modifier\"> <!-- Title for tooltip -->\r\n+                  <i class=\"bi bi-pencil\"></i>\r\n+                </button>\r\n+                <!-- Delete Button: Added aria-label and prevented row click -->\r\n+                <button\r\n+                  class=\"delete-btn\"\r\n+                  (click)=\"deleteAgence(agency.id, agency.name); $event.stopPropagation()\"\r\n+                  [attr.aria-label]=\"'Supprimer l\\'agence ' + agency.name\"\r\n+                  title=\"Supprimer\"> <!-- Title for tooltip -->\r\n+                  <i class=\"bi bi-trash\"></i>\r\n+                </button>\r\n+              </td>\r\n+            </tr>\r\n+\r\n+            <!-- Row to display when no agencies are found -->\r\n+            <tr *ngIf=\"!filteredAgencies || filteredAgencies.length === 0\">\r\n+              <!-- Use colspan to span across all columns -->\r\n+              <td [attr.colspan]=\"6\" class=\"text-center no-data-message\">\r\n+                Aucune agence trouvée.\r\n+              </td>\r\n+            </tr>\r\n+          </tbody>\r\n+        </table>\r\n       </div>\r\n     </div>\r\n-  </div>\n+  </div>\r\n+</div>\r\n"
                },
                {
                    "date": 1745360515290,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -89,5 +89,6 @@\n         </table>\r\n       </div>\r\n     </div>\r\n   </div>\r\n-</div>\n\\ No newline at end of file\n+</div>\r\n+<!-- ... reste du template ... -->\n\\ No newline at end of file\n"
                },
                {
                    "date": 1745360573411,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,94 +1,66 @@\n <div class=\"agence-container\">\r\n-  <app-header [title]=\"'Liste des Agences'\"></app-header>\r\n-\r\n-  <div class=\"container\">\r\n-    <!-- Row 1: Search Bar, Current Date, and Add Button -->\r\n-    <div class=\"agence-header\">\r\n-      <!-- Search Bar -->\r\n-      <div class=\"input-container\">\r\n-        <i class=\"bi bi-search icon\"></i>\r\n-        <!-- Added aria-label for accessibility -->\r\n-        <input\r\n-          type=\"text\"\r\n-          placeholder=\"Rechercher une agence...\"\r\n-          [(ngModel)]=\"searchQuery\"\r\n-          (input)=\"filterAgencies()\"\r\n-          aria-label=\"Rechercher une agence\"\r\n-        />\r\n+    <app-header [title]=\"'Liste des Agences'\"></app-header>\r\n+  \r\n+    <div class=\"container\">\r\n+      <!-- Row 1: Search Bar, Current Date, and Add Button -->\r\n+      <div class=\"agence-header\">\r\n+        <!-- Search Bar -->\r\n+        <div class=\"input-container\">\r\n+          <i class=\"bi bi-search icon\"></i>\r\n+          <input type=\"text\" placeholder=\"Rechercher une agence...\" [(ngModel)]=\"searchQuery\" (input)=\"filterAgencies()\" />\r\n+        </div>\r\n+  \r\n+        <!-- Date -->\r\n+        <div class=\"current-date\">\r\n+          {{ currentDate | date: 'dd/MM/yyyy' }}\r\n+        </div>\r\n+  \r\n+        <!-- Add Agency Button -->\r\n+        <button class=\"add-agency btn btn-primary\" (click)=\"addAgency()\">\r\n+          <i class=\"bi bi-plus\"></i> Nouvelle Agence\r\n+        </button>\r\n       </div>\r\n-\r\n-      <!-- Date -->\r\n-      <div class=\"current-date\">\r\n-        {{ currentDate | date: 'dd/MM/yyyy' }}\r\n-      </div>\r\n-\r\n-      <!-- Add Agency Button -->\r\n-      <button class=\"add-agency btn btn-primary\" (click)=\"addAgency()\">\r\n-        <i class=\"bi bi-plus\"></i> Nouvelle Agence\r\n-      </button>\r\n-    </div>\r\n-\r\n-    <!-- Agency Table -->\r\n-    <div class=\"agence-display\">\r\n-      <div class=\"agence-table\">\r\n-        <table>\r\n-          <thead>\r\n-            <tr>\r\n-              <th>Nom</th>\r\n-              <th>Adresse</th>\r\n-              <th>Email</th>\r\n-              <th>Téléphone</th>\r\n-              <th>Date de Création</th>\r\n-              <th>Actions</th>\r\n-            </tr>\r\n-          </thead>\r\n-          <tbody>\r\n-            <!-- Loop through agencies -->\r\n-            <tr *ngFor=\"let agency of filteredAgencies; let i = index\"\r\n-                [class.even]=\"i % 2 === 0\"\r\n+  \r\n+      <!-- Agency Table -->\r\n+      <div class=\"agence-display\">\r\n+        <div class=\"agence-table\">\r\n+          <table>\r\n+            <thead>\r\n+              <tr>\r\n+                <th>Nom</th>\r\n+                <th>Adresse</th>\r\n+                <th>Email</th>\r\n+                <th>Téléphone</th>\r\n+                <th>Date de Création</th>\r\n+                <th>Actions</th>\r\n+              </tr>\r\n+            </thead>\r\n+            <tbody>\r\n+                <tr *ngFor=\"let agency of filteredAgencies; let i = index\" \r\n+                [class.even]=\"i % 2 === 0\" \r\n                 [class.odd]=\"i % 2 !== 0\"\r\n-                (click)=\"showAgencyDetails(agency)\"\r\n-                tabindex=\"0\" <!-- Make row focusable -->\r\n-                role=\"button\" <!-- Indicate it's clickable -->\r\n-                (keydown.enter)=\"showAgencyDetails(agency)\" <!-- Allow activation with Enter key -->\r\n-                [attr.aria-label]=\"'Voir les détails pour ' + agency.name\"> <!-- Describe row action -->\r\n-\r\n-              <td>{{ agency.name }}</td>\r\n\\ No newline at end of file\n-              <td>{{ agency.address }}</td>\r\n-              <td>{{ agency.email }}</td>\r\n-              <td>{{ agency.phone }}</td>\r\n-              <td>{{ agency.createdAt | date:'dd/MM/yyyy' }}</td>\r\n-              <td class=\"actions\">\r\n-                <!-- Edit Button: Added aria-label and prevented row click -->\r\n-                <button\r\n-                  class=\"edit-btn\"\r\n-                  (click)=\"editAgency(agency); $event.stopPropagation()\"\r\n-                  [attr.aria-label]=\"'Modifier l\\'agence ' + agency.name\"\r\n-                  title=\"Modifier\"> <!-- Title for tooltip -->\r\n-                  <i class=\"bi bi-pencil\"></i>\r\n-                </button>\r\n-                <!-- Delete Button: Added aria-label and prevented row click -->\r\n-                <button\r\n-                  class=\"delete-btn\"\r\n-                  (click)=\"deleteAgence(agency.id, agency.name); $event.stopPropagation()\"\r\n-                  [attr.aria-label]=\"'Supprimer l\\'agence ' + agency.name\"\r\n-                  title=\"Supprimer\"> <!-- Title for tooltip -->\r\n-                  <i class=\"bi bi-trash\"></i>\r\n-                </button>\r\n-              </td>\r\n-            </tr>\r\n-\r\n-            <!-- Row to display when no agencies are found -->\r\n-            <tr *ngIf=\"!filteredAgencies || filteredAgencies.length === 0\">\r\n-              <!-- Use colspan to span across all columns -->\r\n-              <td [attr.colspan]=\"6\" class=\"text-center no-data-message\">\r\n-                Aucune agence trouvée.\r\n-              </td>\r\n-            </tr>\r\n-          </tbody>\r\n-        </table>\r\n+                (click)=\"showAgencyDetails(agency)\">\r\n+                <td>{{ agency.name }}</td>\r\n+                <td>{{ agency.address }}</td>\r\n+                <td>{{ agency.email }}</td>\r\n+                <td>{{ agency.phone }}</td>\r\n+                <td>{{ agency.createdAt | date:'dd/MM/yyyy' }}</td>\r\n+                <td class=\"actions\">\r\n+                    <button class=\"edit-btn\" (click)=\"editAgency(agency); $event.stopPropagation()\">\r\n+                      <i class=\"bi bi-pencil\"></i>\r\n+                    </button>\r\n+                    <button\r\n+                    class=\"delete-btn\"\r\n+                    (click)=\"deleteAgence(agency.id, agency.name); $event.stopPropagation()\"\r\n+                    [attr.aria-label]=\"'Supprimer l\\'agence ' + agency.name\"\r\n+                    title=\"Supprimer\"> <!-- Title for tooltip -->\r\n+                    <i class=\"bi bi-trash\"></i>\r\n+                  </button>\r\n+                  </td>\r\n+              </tr>\r\n+            </tbody>\r\n+          </table>\r\n+        </div>\r\n       </div>\r\n     </div>\r\n-  </div>\r\n-</div>\r\n-<!-- ... reste du template ... -->\n+  </div>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1745360797455,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -50,13 +50,14 @@\n                       <i class=\"bi bi-pencil\"></i>\r\n                     </button>\r\n                     <button\r\n                     class=\"delete-btn\"\r\n-                    (click)=\"deleteAgence(agency.id, agency.name); $event.stopPropagation()\"\r\n+                    (click)=\"deleteAgence(agency._id, agency.name); $event.stopPropagation()\" <!-- Vérifie agency._id ou agency.id selon ta structure -->\r\n                     [attr.aria-label]=\"'Supprimer l\\'agence ' + agency.name\"\r\n-                    title=\"Supprimer\"> <!-- Title for tooltip -->\r\n+                    title=\"Supprimer\">\r\n                     <i class=\"bi bi-trash\"></i>\r\n                   </button>\r\n+\r\n                   </td>\r\n               </tr>\r\n             </tbody>\r\n           </table>\r\n"
                },
                {
                    "date": 1745360818187,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -50,14 +50,13 @@\n                       <i class=\"bi bi-pencil\"></i>\r\n                     </button>\r\n                     <button\r\n                     class=\"delete-btn\"\r\n-                    (click)=\"deleteAgence(agency._id, agency.name); $event.stopPropagation()\" <!-- Vérifie agency._id ou agency.id selon ta structure -->\r\n+                    (click)=\"deleteAgence(agency.id, agency.name); $event.stopPropagation()\"\r\n                     [attr.aria-label]=\"'Supprimer l\\'agence ' + agency.name\"\r\n-                    title=\"Supprimer\">\r\n+                    title=\"Supprimer\"> <!-- Title for tooltip -->\r\n                     <i class=\"bi bi-trash\"></i>\r\n                   </button>\r\n-\r\n                   </td>\r\n               </tr>\r\n             </tbody>\r\n           </table>\r\n"
                },
                {
                    "date": 1745360837091,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,10 +51,9 @@\n                     </button>\r\n                     <button\r\n                     class=\"delete-btn\"\r\n                     (click)=\"deleteAgence(agency.id, agency.name); $event.stopPropagation()\"\r\n-                    [attr.aria-label]=\"'Supprimer l\\'agence ' + agency.name\"\r\n-                    title=\"Supprimer\"> <!-- Title for tooltip -->\r\n+                   > <!-- Title for tooltip -->\r\n                     <i class=\"bi bi-trash\"></i>\r\n                   </button>\r\n                   </td>\r\n               </tr>\r\n"
                },
                {
                    "date": 1745361039037,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -48,14 +48,10 @@\n                 <td class=\"actions\">\r\n                     <button class=\"edit-btn\" (click)=\"editAgency(agency); $event.stopPropagation()\">\r\n                       <i class=\"bi bi-pencil\"></i>\r\n                     </button>\r\n-                    <button\r\n-                    class=\"delete-btn\"\r\n-                    (click)=\"deleteAgence(agency.id, agency.name); $event.stopPropagation()\"\r\n-                   > <!-- Title for tooltip -->\r\n-                    <i class=\"bi bi-trash\"></i>\r\n-                  </button>\r\n+                    <button class=\"delete-btn\" (click)=\"confirmDelete(agency.id, agency.name); $event.stopPropagation()\">\r\n+                      <i class=\"bi bi-trash\"></i>\r\n                   </td>\r\n               </tr>\r\n             </tbody>\r\n           </table>\r\n"
                },
                {
                    "date": 1745361045084,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -50,8 +50,9 @@\n                       <i class=\"bi bi-pencil\"></i>\r\n                     </button>\r\n                     <button class=\"delete-btn\" (click)=\"confirmDelete(agency.id, agency.name); $event.stopPropagation()\">\r\n                       <i class=\"bi bi-trash\"></i>\r\n+                    </button>\r\n                   </td>\r\n               </tr>\r\n             </tbody>\r\n           </table>\r\n"
                },
                {
                    "date": 1745361648347,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -48,9 +48,9 @@\n                 <td class=\"actions\">\r\n                     <button class=\"edit-btn\" (click)=\"editAgency(agency); $event.stopPropagation()\">\r\n                       <i class=\"bi bi-pencil\"></i>\r\n                     </button>\r\n-                    <button class=\"delete-btn\" (click)=\"confirmDelete(agency.id, agency.name); $event.stopPropagation()\">\r\n+                    <button class=\"delete-btn\" (click)=\"de(agency.id, agency.name); $event.stopPropagation()\">\r\n                       <i class=\"bi bi-trash\"></i>\r\n                     </button>\r\n                   </td>\r\n               </tr>\r\n"
                },
                {
                    "date": 1745361653771,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,62 @@\n+<div class=\"agence-container\">\r\n+    <app-header [title]=\"'Liste des Agences'\"></app-header>\r\n+  \r\n+    <div class=\"container\">\r\n+      <!-- Row 1: Search Bar, Current Date, and Add Button -->\r\n+      <div class=\"agence-header\">\r\n+        <!-- Search Bar -->\r\n+        <div class=\"input-container\">\r\n+          <i class=\"bi bi-search icon\"></i>\r\n+          <input type=\"text\" placeholder=\"Rechercher une agence...\" [(ngModel)]=\"searchQuery\" (input)=\"filterAgencies()\" />\r\n+        </div>\r\n+  \r\n+        <!-- Date -->\r\n+        <div class=\"current-date\">\r\n+          {{ currentDate | date: 'dd/MM/yyyy' }}\r\n+        </div>\r\n+  \r\n+        <!-- Add Agency Button -->\r\n+        <button class=\"add-agency btn btn-primary\" (click)=\"addAgency()\">\r\n+          <i class=\"bi bi-plus\"></i> Nouvelle Agence\r\n+        </button>\r\n+      </div>\r\n+  \r\n+      <!-- Agency Table -->\r\n+      <div class=\"agence-display\">\r\n+        <div class=\"agence-table\">\r\n+          <table>\r\n+            <thead>\r\n+              <tr>\r\n+                <th>Nom</th>\r\n+                <th>Adresse</th>\r\n+                <th>Email</th>\r\n+                <th>Téléphone</th>\r\n+                <th>Date de Création</th>\r\n+                <th>Actions</th>\r\n+              </tr>\r\n+            </thead>\r\n+            <tbody>\r\n+                <tr *ngFor=\"let agency of filteredAgencies; let i = index\" \r\n+                [class.even]=\"i % 2 === 0\" \r\n+                [class.odd]=\"i % 2 !== 0\"\r\n+                (click)=\"showAgencyDetails(agency)\">\r\n+                <td>{{ agency.name }}</td>\r\n+                <td>{{ agency.address }}</td>\r\n+                <td>{{ agency.email }}</td>\r\n+                <td>{{ agency.phone }}</td>\r\n+                <td>{{ agency.createdAt | date:'dd/MM/yyyy' }}</td>\r\n+                <td class=\"actions\">\r\n+                    <button class=\"edit-btn\" (click)=\"editAgency(agency); $event.stopPropagation()\">\r\n+                      <i class=\"bi bi-pencil\"></i>\r\n+                    </button>\r\n+                    <button class=\"delete-btn\" (click)=\"deleteAgence(agency.id, agency.name); $event.stopPropagation()\">\r\n+                      <i class=\"bi bi-trash\"></i>\r\n+                    </button>\r\n+                  </td>\r\n+              </tr>\r\n+            </tbody>\r\n+          </table>\r\n+        </div>\r\n+      </div>\r\n+    </div>\r\n+  </div>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1745516785486,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,12 +35,15 @@\n                 <th>Actions</th>\r\n               </tr>\r\n             </thead>\r\n             <tbody>\r\n-                <tr *ngFor=\"let agency of filteredAgencies; let i = index\" \r\n-                [class.even]=\"i % 2 === 0\" \r\n-                [class.odd]=\"i % 2 !== 0\"\r\n-                (click)=\"showAgencyDetails(agency)\">\r\n+              <tr *ngFor=\"let agency of filteredAgencies; let i = index\"\r\n+              [class.even]=\"i % 2 === 0\"\r\n+              [class.odd]=\"i % 2 !== 0\"\r\n+              (click)=\"triggerShowAgencyDetails(agency)\"\r\n+              class=\"agency-row\"\r\n+              <!-- **** MODIFICATION ICI **** -->\r\n+              [class.active-row]=\"activeModalRef?.componentInstance?.agency?.name === agency.name\">\r\n                 <td>{{ agency.name }}</td>\r\n                 <td>{{ agency.address }}</td>\r\n                 <td>{{ agency.email }}</td>\r\n                 <td>{{ agency.phone }}</td>\r\n@@ -58,67 +61,5 @@\n           </table>\r\n         </div>\r\n       </div>\r\n     </div>\r\n-  </div>\n-<div class=\"agence-container\">\r\n-    <app-header [title]=\"'Liste des Agences'\"></app-header>\r\n-  \r\n-    <div class=\"container\">\r\n-      <!-- Row 1: Search Bar, Current Date, and Add Button -->\r\n-      <div class=\"agence-header\">\r\n-        <!-- Search Bar -->\r\n-        <div class=\"input-container\">\r\n-          <i class=\"bi bi-search icon\"></i>\r\n-          <input type=\"text\" placeholder=\"Rechercher une agence...\" [(ngModel)]=\"searchQuery\" (input)=\"filterAgencies()\" />\r\n-        </div>\r\n-  \r\n-        <!-- Date -->\r\n-        <div class=\"current-date\">\r\n-          {{ currentDate | date: 'dd/MM/yyyy' }}\r\n-        </div>\r\n-  \r\n-        <!-- Add Agency Button -->\r\n-        <button class=\"add-agency btn btn-primary\" (click)=\"addAgency()\">\r\n-          <i class=\"bi bi-plus\"></i> Nouvelle Agence\r\n-        </button>\r\n-      </div>\r\n-  \r\n-      <!-- Agency Table -->\r\n-      <div class=\"agence-display\">\r\n-        <div class=\"agence-table\">\r\n-          <table>\r\n-            <thead>\r\n-              <tr>\r\n-                <th>Nom</th>\r\n-                <th>Adresse</th>\r\n-                <th>Email</th>\r\n-                <th>Téléphone</th>\r\n-                <th>Date de Création</th>\r\n-                <th>Actions</th>\r\n-              </tr>\r\n-            </thead>\r\n-            <tbody>\r\n-                <tr *ngFor=\"let agency of filteredAgencies; let i = index\" \r\n-                [class.even]=\"i % 2 === 0\" \r\n-                [class.odd]=\"i % 2 !== 0\"\r\n-                (click)=\"showAgencyDetails(agency)\">\r\n-                <td>{{ agency.name }}</td>\r\n-                <td>{{ agency.address }}</td>\r\n-                <td>{{ agency.email }}</td>\r\n-                <td>{{ agency.phone }}</td>\r\n-                <td>{{ agency.createdAt | date:'dd/MM/yyyy' }}</td>\r\n-                <td class=\"actions\">\r\n-                    <button class=\"edit-btn\" (click)=\"editAgency(agency); $event.stopPropagation()\">\r\n-                      <i class=\"bi bi-pencil\"></i>\r\n-                    </button>\r\n-                    <button class=\"delete-btn\" (click)=\"de(agency.id, agency.name); $event.stopPropagation()\">\r\n-                      <i class=\"bi bi-trash\"></i>\r\n-                    </button>\r\n-                  </td>\r\n-              </tr>\r\n-            </tbody>\r\n-          </table>\r\n-        </div>\r\n-      </div>\r\n-    </div>\r\n   </div>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1745516793581,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,15 +35,15 @@\n                 <th>Actions</th>\r\n               </tr>\r\n             </thead>\r\n             <tbody>\r\n-              <tr *ngFor=\"let agency of filteredAgencies; let i = index\"\r\n-              [class.even]=\"i % 2 === 0\"\r\n-              [class.odd]=\"i % 2 !== 0\"\r\n-              (click)=\"triggerShowAgencyDetails(agency)\"\r\n-              class=\"agency-row\"\r\n-              <!-- **** MODIFICATION ICI **** -->\r\n-              [class.active-row]=\"activeModalRef?.componentInstance?.agency?.name === agency.name\">\r\n+                <tr *ngFor=\"let agency of filteredAgencies; let i = index\"\r\n+                  [class.even]=\"i % 2 === 0\"\r\n+                  [class.odd]=\"i % 2 !== 0\"\r\n+                  (click)=\"triggerShowAgencyDetails(agency)\"\r\n+                  class=\"agency-row\"\r\n+                  <!-- **** MODIFICATION ICI **** -->\r\n+                  [class.active-row]=\"activeModalRef?.componentInstance?.agency?.name === agency.name\">\r\n                 <td>{{ agency.name }}</td>\r\n                 <td>{{ agency.address }}</td>\r\n                 <td>{{ agency.email }}</td>\r\n                 <td>{{ agency.phone }}</td>\r\n"
                },
                {
                    "date": 1745516805024,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,15 +35,15 @@\n                 <th>Actions</th>\r\n               </tr>\r\n             </thead>\r\n             <tbody>\r\n-                <tr *ngFor=\"let agency of filteredAgencies; let i = index\"\r\n-                  [class.even]=\"i % 2 === 0\"\r\n-                  [class.odd]=\"i % 2 !== 0\"\r\n-                  (click)=\"triggerShowAgencyDetails(agency)\"\r\n-                  class=\"agency-row\"\r\n-                  <!-- **** MODIFICATION ICI **** -->\r\n-                  [class.active-row]=\"activeModalRef?.componentInstance?.agency?.name === agency.name\">\r\n+              <tr *ngFor=\"let agency of filteredAgencies; let i = index\"\r\n+              [class.even]=\"i % 2 === 0\"\r\n+              [class.odd]=\"i % 2 !== 0\"\r\n+              (click)=\"triggerShowAgencyDetails(agency)\"\r\n+              class=\"agency-row\"\r\n+              <!-- **** MODIFICATION ICI **** -->\r\n+              [class.active-row]=\"activeModalRef?.componentInstance?.agency?.name === agency.name\">\r\n                 <td>{{ agency.name }}</td>\r\n                 <td>{{ agency.address }}</td>\r\n                 <td>{{ agency.email }}</td>\r\n                 <td>{{ agency.phone }}</td>\r\n"
                },
                {
                    "date": 1745516812391,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -40,9 +40,8 @@\n               [class.even]=\"i % 2 === 0\"\r\n               [class.odd]=\"i % 2 !== 0\"\r\n               (click)=\"triggerShowAgencyDetails(agency)\"\r\n               class=\"agency-row\"\r\n-              <!-- **** MODIFICATION ICI **** -->\r\n               [class.active-row]=\"activeModalRef?.componentInstance?.agency?.name === agency.name\">\r\n                 <td>{{ agency.name }}</td>\r\n                 <td>{{ agency.address }}</td>\r\n                 <td>{{ agency.email }}</td>\r\n"
                },
                {
                    "date": 1745517127836,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,64 +1,86 @@\n <div class=\"agence-container\">\r\n-    <app-header [title]=\"'Liste des Agences'\"></app-header>\r\n-  \r\n-    <div class=\"container\">\r\n-      <!-- Row 1: Search Bar, Current Date, and Add Button -->\r\n-      <div class=\"agence-header\">\r\n-        <!-- Search Bar -->\r\n-        <div class=\"input-container\">\r\n-          <i class=\"bi bi-search icon\"></i>\r\n-          <input type=\"text\" placeholder=\"Rechercher une agence...\" [(ngModel)]=\"searchQuery\" (input)=\"filterAgencies()\" />\r\n-        </div>\r\n-  \r\n-        <!-- Date -->\r\n-        <div class=\"current-date\">\r\n-          {{ currentDate | date: 'dd/MM/yyyy' }}\r\n-        </div>\r\n-  \r\n-        <!-- Add Agency Button -->\r\n-        <button class=\"add-agency btn btn-primary\" (click)=\"addAgency()\">\r\n-          <i class=\"bi bi-plus\"></i> Nouvelle Agence\r\n-        </button>\r\n+  <app-header [title]=\"'Liste des Agences'\"></app-header>\r\n+\r\n+  <div class=\"container\">\r\n+    <!-- Row 1: Search Bar, Current Date, and Add Button -->\r\n+    <div class=\"agence-header\">\r\n+      <!-- Search Bar -->\r\n+      <div class=\"input-container\">\r\n+        <i class=\"bi bi-search icon\"></i>\r\n+        <input type=\"text\" placeholder=\"Rechercher une agence...\" [(ngModel)]=\"searchQuery\" (input)=\"filterAgencies()\" />\r\n       </div>\r\n-  \r\n-      <!-- Agency Table -->\r\n-      <div class=\"agence-display\">\r\n-        <div class=\"agence-table\">\r\n-          <table>\r\n-            <thead>\r\n-              <tr>\r\n-                <th>Nom</th>\r\n-                <th>Adresse</th>\r\n-                <th>Email</th>\r\n-                <th>Téléphone</th>\r\n-                <th>Date de Création</th>\r\n-                <th>Actions</th>\r\n-              </tr>\r\n-            </thead>\r\n-            <tbody>\r\n-              <tr *ngFor=\"let agency of filteredAgencies; let i = index\"\r\n-              [class.even]=\"i % 2 === 0\"\r\n-              [class.odd]=\"i % 2 !== 0\"\r\n-              (click)=\"triggerShowAgencyDetails(agency)\"\r\n-              class=\"agency-row\"\r\n-              [class.active-row]=\"activeModalRef?.componentInstance?.agency?.name === agency.name\">\r\n-                <td>{{ agency.name }}</td>\r\n-                <td>{{ agency.address }}</td>\r\n-                <td>{{ agency.email }}</td>\r\n-                <td>{{ agency.phone }}</td>\r\n-                <td>{{ agency.createdAt | date:'dd/MM/yyyy' }}</td>\r\n-                <td class=\"actions\">\r\n-                    <button class=\"edit-btn\" (click)=\"editAgency(agency); $event.stopPropagation()\">\r\n-                      <i class=\"bi bi-pencil\"></i>\r\n-                    </button>\r\n-                    <button class=\"delete-btn\" (click)=\"deleteAgence(agency.id, agency.name); $event.stopPropagation()\">\r\n-                      <i class=\"bi bi-trash\"></i>\r\n\\ No newline at end of file\n-                    </button>\r\n-                  </td>\r\n-              </tr>\r\n-            </tbody>\r\n-          </table>\r\n-        </div>\r\n+\r\n+      <!-- Date -->\r\n+      <div class=\"current-date\">\r\n+        {{ currentDate | date: 'dd/MM/yyyy' }}\r\n       </div>\r\n+\r\n+      <!-- Add Agency Button -->\r\n+      <button class=\"add-agency btn btn-primary\" (click)=\"addAgency()\" [disabled]=\"isLoading || !!activeModalRef\"> <!-- Désactiver si modal ouvert ou chargement -->\r\n+        <i class=\"bi bi-plus\"></i> Nouvelle Agence\r\n+      </button>\r\n     </div>\r\n-  </div>\n+\r\n+    <!-- Agency Table -->\r\n+    <div class=\"agence-display\">\r\n+      <!-- Indicateur de chargement -->\r\n+      <div *ngIf=\"isLoading && agencies.length === 0\" class=\"loading-indicator text-center my-4\"> <!-- Afficher seulement au chargement initial -->\r\n+          <mat-spinner diameter=\"50\"></mat-spinner>\r\n+          <p>Chargement des agences...</p>\r\n+      </div>\r\n+\r\n+      <!-- Message d'erreur -->\r\n+      <div *ngIf=\"errorMessage\" class=\"alert alert-danger text-center my-4\">\r\n+          {{ errorMessage }}\r\n+      </div>\r\n+\r\n+      <!-- Table affichée si pas en chargement initial OU si des agences sont déjà chargées -->\r\n+      <div class=\"agence-table\" *ngIf=\"!isLoading || agencies.length > 0\">\r\n+        <table>\r\n+          <thead>\r\n+            <tr>\r\n+              <th>Nom</th>\r\n+              <th>Adresse</th>\r\n+              <th>Email</th>\r\n+              <th>Téléphone</th>\r\n+              <th>Date de Création</th>\r\n+              <th>Actions</th>\r\n+            </tr>\r\n+          </thead>\r\n+          <tbody>\r\n+            <!-- Ligne si aucune agence trouvée après filtrage/chargement -->\r\n+            <tr *ngIf=\"!isLoading && filteredAgencies.length === 0\">\r\n+              <td colspan=\"6\" class=\"text-center no-data\">\r\n+                  {{ searchQuery ? 'Aucune agence trouvée pour votre recherche.' : 'Aucune agence à afficher.' }}\r\n+              </td>\r\n+            </tr>\r\n+            <!-- Lignes des agences -->\r\n+            <tr *ngFor=\"let agency of filteredAgencies; let i = index\"\r\n+                [class.even]=\"i % 2 === 0\"\r\n+                [class.odd]=\"i % 2 !== 0\"\r\n+                (click)=\"triggerShowAgencyDetails(agency)\"\r\n+                class=\"agency-row\"\r\n+                [class.active-row]=\"activeModalRef?.componentInstance?.agency?.name === agency.name\"> <!-- Comparaison par nom -->\r\n+\r\n+              <td>{{ agency.name }}</td>\r\n+              <td>{{ agency.address || 'N/A' }}</td>\r\n+              <td>{{ agency.email || 'N/A' }}</td>\r\n+              <td>{{ agency.phone || 'N/A' }}</td>\r\n+              <td>{{ agency.createdAt | date:'dd/MM/yyyy' }}</td>\r\n+              <td class=\"actions\">\r\n+                  <!-- Empêcher la propagation pour que le clic sur les boutons n'active pas le clic de la ligne -->\r\n+                  <button class=\"edit-btn\" (click)=\"editAgency(agency); $event.stopPropagation()\" [disabled]=\"isLoading || !!activeModalRef\">\r\n+                    <i class=\"bi bi-pencil\"></i>\r\n+                  </button>\r\n+                  <!-- Utiliser _id pour la suppression car c'est l'identifiant unique -->\r\n+                  <button class=\"delete-btn\" (click)=\"deleteAgence(agency._id, agency.name); $event.stopPropagation()\" [disabled]=\"isLoading || !!activeModalRef\">\r\n+                    <i class=\"bi bi-trash\"></i>\r\n+                  </button>\r\n+                </td>\r\n+            </tr>\r\n+          </tbody>\r\n+        </table>\r\n+      </div>\r\n+    </div>\r\n+  </div>\r\n+</div>\r\n"
                },
                {
                    "date": 1745517134678,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -24,9 +24,9 @@\n     <!-- Agency Table -->\r\n     <div class=\"agence-display\">\r\n       <!-- Indicateur de chargement -->\r\n       <div *ngIf=\"isLoading && agencies.length === 0\" class=\"loading-indicator text-center my-4\"> <!-- Afficher seulement au chargement initial -->\r\n-          <mat-spinner diameter=\"50\"></mat-spinner>\r\n+          <mat-spinner [diameter=\"50\"></mat-spinner>\r\n           <p>Chargement des agences...</p>\r\n       </div>\r\n \r\n       <!-- Message d'erreur -->\r\n"
                },
                {
                    "date": 1745517474093,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,86 +1,64 @@\n <div class=\"agence-container\">\r\n-  <app-header [title]=\"'Liste des Agences'\"></app-header>\r\n-\r\n-  <div class=\"container\">\r\n-    <!-- Row 1: Search Bar, Current Date, and Add Button -->\r\n-    <div class=\"agence-header\">\r\n-      <!-- Search Bar -->\r\n-      <div class=\"input-container\">\r\n-        <i class=\"bi bi-search icon\"></i>\r\n-        <input type=\"text\" placeholder=\"Rechercher une agence...\" [(ngModel)]=\"searchQuery\" (input)=\"filterAgencies()\" />\r\n+    <app-header [title]=\"'Liste des Agences'\"></app-header>\r\n+  \r\n+    <div class=\"container\">\r\n+      <!-- Row 1: Search Bar, Current Date, and Add Button -->\r\n+      <div class=\"agence-header\">\r\n+        <!-- Search Bar -->\r\n+        <div class=\"input-container\">\r\n+          <i class=\"bi bi-search icon\"></i>\r\n+          <input type=\"text\" placeholder=\"Rechercher une agence...\" [(ngModel)]=\"searchQuery\" (input)=\"filterAgencies()\" />\r\n+        </div>\r\n+  \r\n+        <!-- Date -->\r\n+        <div class=\"current-date\">\r\n+          {{ currentDate | date: 'dd/MM/yyyy' }}\r\n+        </div>\r\n+  \r\n+        <!-- Add Agency Button -->\r\n+        <button class=\"add-agency btn btn-primary\" (click)=\"addAgency()\">\r\n+          <i class=\"bi bi-plus\"></i> Nouvelle Agence\r\n+        </button>\r\n       </div>\r\n-\r\n-      <!-- Date -->\r\n-      <div class=\"current-date\">\r\n-        {{ currentDate | date: 'dd/MM/yyyy' }}\r\n+  \r\n+      <!-- Agency Table -->\r\n+      <div class=\"agence-display\">\r\n+        <div class=\"agence-table\">\r\n+          <table>\r\n+            <thead>\r\n+              <tr>\r\n+                <th>Nom</th>\r\n+                <th>Adresse</th>\r\n+                <th>Email</th>\r\n+                <th>Téléphone</th>\r\n+                <th>Date de Création</th>\r\n+                <th>Actions</th>\r\n+              </tr>\r\n+            </thead>\r\n+            <tbody>\r\n+              <tr *ngFor=\"let agency of filteredAgencies; let i = index\"\r\n+              [class.even]=\"i % 2 === 0\"\r\n+              [class.odd]=\"i % 2 !== 0\"\r\n+              (click)=\"triggerShowAgencyDetails(agency)\"\r\n+              class=\"agency-row\"\r\n+              [class.active-row]=\"activeModalRef?.componentInstance?.agency?.name === agency.name\">\r\n+                <td>{{ agency.name }}</td>\r\n+                <td>{{ agency.address }}</td>\r\n+                <td>{{ agency.email }}</td>\r\n+                <td>{{ agency.phone }}</td>\r\n+                <td>{{ agency.createdAt | date:'dd/MM/yyyy' }}</td>\r\n+                <td class=\"actions\">\r\n+                    <button class=\"edit-btn\" (click)=\"editAgency(agency); $event.stopPropagation()\">\r\n+                      <i class=\"bi bi-pencil\"></i>\r\n+                    </button>\r\n+                    <button class=\"delete-btn\" (click)=\"deleteAgence(agency.id, agency.name); $event.stopPropagation()\">\r\n+                      <i class=\"bi bi-trash\"></i>\r\n+                    </button>\r\n+                  </td>\r\n+              </tr>\r\n+            </tbody>\r\n+          </table>\r\n+        </div>\r\n       </div>\r\n-\r\n-      <!-- Add Agency Button -->\r\n-      <button class=\"add-agency btn btn-primary\" (click)=\"addAgency()\" [disabled]=\"isLoading || !!activeModalRef\"> <!-- Désactiver si modal ouvert ou chargement -->\r\n-        <i class=\"bi bi-plus\"></i> Nouvelle Agence\r\n-      </button>\r\n     </div>\r\n-\r\n-    <!-- Agency Table -->\r\n-    <div class=\"agence-display\">\r\n-      <!-- Indicateur de chargement -->\r\n-      <div *ngIf=\"isLoading && agencies.length === 0\" class=\"loading-indicator text-center my-4\"> <!-- Afficher seulement au chargement initial -->\r\n-          <mat-spinner [diameter=\"50\"></mat-spinner>\r\n-          <p>Chargement des agences...</p>\r\n-      </div>\r\n-\r\n-      <!-- Message d'erreur -->\r\n-      <div *ngIf=\"errorMessage\" class=\"alert alert-danger text-center my-4\">\r\n-          {{ errorMessage }}\r\n-      </div>\r\n-\r\n-      <!-- Table affichée si pas en chargement initial OU si des agences sont déjà chargées -->\r\n-      <div class=\"agence-table\" *ngIf=\"!isLoading || agencies.length > 0\">\r\n-        <table>\r\n-          <thead>\r\n-            <tr>\r\n-              <th>Nom</th>\r\n-              <th>Adresse</th>\r\n-              <th>Email</th>\r\n-              <th>Téléphone</th>\r\n-              <th>Date de Création</th>\r\n-              <th>Actions</th>\r\n-            </tr>\r\n-          </thead>\r\n-          <tbody>\r\n-            <!-- Ligne si aucune agence trouvée après filtrage/chargement -->\r\n-            <tr *ngIf=\"!isLoading && filteredAgencies.length === 0\">\r\n-              <td colspan=\"6\" class=\"text-center no-data\">\r\n-                  {{ searchQuery ? 'Aucune agence trouvée pour votre recherche.' : 'Aucune agence à afficher.' }}\r\n-              </td>\r\n-            </tr>\r\n-            <!-- Lignes des agences -->\r\n-            <tr *ngFor=\"let agency of filteredAgencies; let i = index\"\r\n-                [class.even]=\"i % 2 === 0\"\r\n-                [class.odd]=\"i % 2 !== 0\"\r\n-                (click)=\"triggerShowAgencyDetails(agency)\"\r\n-                class=\"agency-row\"\r\n-                [class.active-row]=\"activeModalRef?.componentInstance?.agency?.name === agency.name\"> <!-- Comparaison par nom -->\r\n-\r\n-              <td>{{ agency.name }}</td>\r\n-              <td>{{ agency.address || 'N/A' }}</td>\r\n-              <td>{{ agency.email || 'N/A' }}</td>\r\n-              <td>{{ agency.phone || 'N/A' }}</td>\r\n-              <td>{{ agency.createdAt | date:'dd/MM/yyyy' }}</td>\r\n-              <td class=\"actions\">\r\n-                  <!-- Empêcher la propagation pour que le clic sur les boutons n'active pas le clic de la ligne -->\r\n-                  <button class=\"edit-btn\" (click)=\"editAgency(agency); $event.stopPropagation()\" [disabled]=\"isLoading || !!activeModalRef\">\r\n-                    <i class=\"bi bi-pencil\"></i>\r\n-                  </button>\r\n-                  <!-- Utiliser _id pour la suppression car c'est l'identifiant unique -->\r\n-                  <button class=\"delete-btn\" (click)=\"deleteAgence(agency._id, agency.name); $event.stopPropagation()\" [disabled]=\"isLoading || !!activeModalRef\">\r\n-                    <i class=\"bi bi-trash\"></i>\r\n-                  </button>\r\n-                </td>\r\n-            </tr>\r\n-          </tbody>\r\n-        </table>\r\n-      </div>\r\n-    </div>\r\n-  </div>\r\n-</div>\r\n+  </div>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1745517479484,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,14 +35,12 @@\n                 <th>Actions</th>\r\n               </tr>\r\n             </thead>\r\n             <tbody>\r\n-              <tr *ngFor=\"let agency of filteredAgencies; let i = index\"\r\n-              [class.even]=\"i % 2 === 0\"\r\n-              [class.odd]=\"i % 2 !== 0\"\r\n-              (click)=\"triggerShowAgencyDetails(agency)\"\r\n-              class=\"agency-row\"\r\n-              [class.active-row]=\"activeModalRef?.componentInstance?.agency?.name === agency.name\">\r\n+                <tr *ngFor=\"let agency of filteredAgencies; let i = index\" \r\n+                [class.even]=\"i % 2 === 0\" \r\n+                [class.odd]=\"i % 2 !== 0\"\r\n+                (click)=\"showAgencyDetails(agency)\">\r\n                 <td>{{ agency.name }}</td>\r\n                 <td>{{ agency.address }}</td>\r\n                 <td>{{ agency.email }}</td>\r\n                 <td>{{ agency.phone }}</td>\r\n"
                },
                {
                    "date": 1745526703064,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,12 +35,14 @@\n                 <th>Actions</th>\r\n               </tr>\r\n             </thead>\r\n             <tbody>\r\n-                <tr *ngFor=\"let agency of filteredAgencies; let i = index\" \r\n-                [class.even]=\"i % 2 === 0\" \r\n-                [class.odd]=\"i % 2 !== 0\"\r\n-                (click)=\"showAgencyDetails(agency)\">\r\n+              <tr *ngFor=\"let agency of filteredAgencies; let i = index\"\r\n+              [class.even]=\"i % 2 === 0\"\r\n+              [class.odd]=\"i % 2 !== 0\"\r\n+              (click)=\"navigateToDetails(agency)\"  <!-- Appel de la nouvelle méthode -->\r\n+              style=\"cursor: pointer;\"> <!-- Ajout du curseur pour indiquer la cliquabilité -->\r\n+\r\n                 <td>{{ agency.name }}</td>\r\n                 <td>{{ agency.address }}</td>\r\n                 <td>{{ agency.email }}</td>\r\n                 <td>{{ agency.phone }}</td>\r\n"
                },
                {
                    "date": 1745526709092,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,9 +38,9 @@\n             <tbody>\r\n               <tr *ngFor=\"let agency of filteredAgencies; let i = index\"\r\n               [class.even]=\"i % 2 === 0\"\r\n               [class.odd]=\"i % 2 !== 0\"\r\n-              (click)=\"navigateToDetails(agency)\"  <!-- Appel de la nouvelle méthode -->\r\n+              (click)=\"navigateToDetails(agency)\"\r\n               style=\"cursor: pointer;\"> <!-- Ajout du curseur pour indiquer la cliquabilité -->\r\n \r\n                 <td>{{ agency.name }}</td>\r\n                 <td>{{ agency.address }}</td>\r\n"
                },
                {
                    "date": 1745526714482,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,9 +39,9 @@\n               <tr *ngFor=\"let agency of filteredAgencies; let i = index\"\r\n               [class.even]=\"i % 2 === 0\"\r\n               [class.odd]=\"i % 2 !== 0\"\r\n               (click)=\"navigateToDetails(agency)\"\r\n-              style=\"cursor: pointer;\"> <!-- Ajout du curseur pour indiquer la cliquabilité -->\r\n+              style=\"cursor: pointer;\"> \r\n \r\n                 <td>{{ agency.name }}</td>\r\n                 <td>{{ agency.address }}</td>\r\n                 <td>{{ agency.email }}</td>\r\n"
                },
                {
                    "date": 1745529232562,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,8 +38,9 @@\n             <tbody>\r\n               <tr *ngFor=\"let agency of filteredAgencies; let i = index\"\r\n               [class.even]=\"i % 2 === 0\"\r\n               [class.odd]=\"i % 2 !== 0\"\r\n+              \r\n               (click)=\"navigateToDetails(agency)\"\r\n               style=\"cursor: pointer;\"> \r\n \r\n                 <td>{{ agency.name }}</td>\r\n"
                },
                {
                    "date": 1745529239595,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,9 +38,9 @@\n             <tbody>\r\n               <tr *ngFor=\"let agency of filteredAgencies; let i = index\"\r\n               [class.even]=\"i % 2 === 0\"\r\n               [class.odd]=\"i % 2 !== 0\"\r\n-              \r\n+              [agency]\r\n               (click)=\"navigateToDetails(agency)\"\r\n               style=\"cursor: pointer;\"> \r\n \r\n                 <td>{{ agency.name }}</td>\r\n"
                },
                {
                    "date": 1745529247305,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,9 +38,9 @@\n             <tbody>\r\n               <tr *ngFor=\"let agency of filteredAgencies; let i = index\"\r\n               [class.even]=\"i % 2 === 0\"\r\n               [class.odd]=\"i % 2 !== 0\"\r\n-              [agency]\r\n+              [agency]=\"agency\"\r\n               (click)=\"navigateToDetails(agency)\"\r\n               style=\"cursor: pointer;\"> \r\n \r\n                 <td>{{ agency.name }}</td>\r\n"
                },
                {
                    "date": 1745529293184,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,9 +38,9 @@\n             <tbody>\r\n               <tr *ngFor=\"let agency of filteredAgencies; let i = index\"\r\n               [class.even]=\"i % 2 === 0\"\r\n               [class.odd]=\"i % 2 !== 0\"\r\n-              [agency]=\"agency\"\r\n+              \r\n               (click)=\"navigateToDetails(agency)\"\r\n               style=\"cursor: pointer;\"> \r\n \r\n                 <td>{{ agency.name }}</td>\r\n"
                },
                {
                    "date": 1745529322920,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,9 +38,9 @@\n             <tbody>\r\n               <tr *ngFor=\"let agency of filteredAgencies; let i = index\"\r\n               [class.even]=\"i % 2 === 0\"\r\n               [class.odd]=\"i % 2 !== 0\"\r\n-              \r\n+              aussi\r\n               (click)=\"navigateToDetails(agency)\"\r\n               style=\"cursor: pointer;\"> \r\n \r\n                 <td>{{ agency.name }}</td>\r\n"
                },
                {
                    "date": 1745530936860,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,10 +38,9 @@\n             <tbody>\r\n               <tr *ngFor=\"let agency of filteredAgencies; let i = index\"\r\n               [class.even]=\"i % 2 === 0\"\r\n               [class.odd]=\"i % 2 !== 0\"\r\n-              aussi\r\n-              (click)=\"navigateToDetails(agency)\"\r\n+                            (click)=\"navigateToDetails(agency)\"\r\n               style=\"cursor: pointer;\"> \r\n \r\n                 <td>{{ agency.name }}</td>\r\n                 <td>{{ agency.address }}</td>\r\n"
                },
                {
                    "date": 1745530942001,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -37,10 +37,10 @@\n             </thead>\r\n             <tbody>\r\n               <tr *ngFor=\"let agency of filteredAgencies; let i = index\"\r\n               [class.even]=\"i % 2 === 0\"\r\n-              [class.odd]=\"i % 2 !== 0\"\r\n-                            (click)=\"navigateToDetails(agency)\"\r\n+              [class.odd]=\"i % 2 !== 0\"              \r\n+              (click)=\"navigateToDetails(agency)\"\r\n               style=\"cursor: pointer;\"> \r\n \r\n                 <td>{{ agency.name }}</td>\r\n                 <td>{{ agency.address }}</td>\r\n"
                },
                {
                    "date": 1745530954249,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,12 +36,12 @@\n               </tr>\r\n             </thead>\r\n             <tbody>\r\n               <tr *ngFor=\"let agency of filteredAgencies; let i = index\"\r\n-              [class.even]=\"i % 2 === 0\"\r\n-              [class.odd]=\"i % 2 !== 0\"              \r\n-              (click)=\"navigateToDetails(agency)\"\r\n-              style=\"cursor: pointer;\"> \r\n+    [class.even]=\"i % 2 === 0\"\r\n+    [class.odd]=\"i % 2 !== 0\"\r\n+    (click)=\"navigateToDetails(agency)\" <!-- Appel correct -->\r\n+    style=\"cursor: pointer;\">\r\n \r\n                 <td>{{ agency.name }}</td>\r\n                 <td>{{ agency.address }}</td>\r\n                 <td>{{ agency.email }}</td>\r\n"
                },
                {
                    "date": 1745531894695,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,14 +35,12 @@\n                 <th>Actions</th>\r\n               </tr>\r\n             </thead>\r\n             <tbody>\r\n-              <tr *ngFor=\"let agency of filteredAgencies; let i = index\"\r\n-    [class.even]=\"i % 2 === 0\"\r\n-    [class.odd]=\"i % 2 !== 0\"\r\n-    (click)=\"navigateToDetails(agency)\" <!-- Appel correct -->\r\n-    style=\"cursor: pointer;\">\r\n-\r\n+                <tr *ngFor=\"let agency of filteredAgencies; let i = index\" \r\n+                [class.even]=\"i % 2 === 0\" \r\n+                [class.odd]=\"i % 2 !== 0\"\r\n+                (click)=\"showAgencyDetails(agency)\">\r\n                 <td>{{ agency.name }}</td>\r\n                 <td>{{ agency.address }}</td>\r\n                 <td>{{ agency.email }}</td>\r\n                 <td>{{ agency.phone }}</td>\r\n"
                },
                {
                    "date": 1745616135877,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,62 +1,126 @@\n-<div class=\"agence-container\">\r\n-    <app-header [title]=\"'Liste des Agences'\"></app-header>\r\n-  \r\n-    <div class=\"container\">\r\n-      <!-- Row 1: Search Bar, Current Date, and Add Button -->\r\n-      <div class=\"agence-header\">\r\n-        <!-- Search Bar -->\r\n-        <div class=\"input-container\">\r\n-          <i class=\"bi bi-search icon\"></i>\r\n-          <input type=\"text\" placeholder=\"Rechercher une agence...\" [(ngModel)]=\"searchQuery\" (input)=\"filterAgencies()\" />\r\n-        </div>\r\n-  \r\n-        <!-- Date -->\r\n-        <div class=\"current-date\">\r\n-          {{ currentDate | date: 'dd/MM/yyyy' }}\r\n-        </div>\r\n-  \r\n-        <!-- Add Agency Button -->\r\n-        <button class=\"add-agency btn btn-primary\" (click)=\"addAgency()\">\r\n-          <i class=\"bi bi-plus\"></i> Nouvelle Agence\r\n+<div class=\"agence-container dashboard-container\"> <!-- Utiliser les classes de base -->\r\n+  <app-header [title]=\"'Gestion des Agences'\"></app-header>\r\n+\r\n+  <!-- Utiliser mat-card comme conteneur principal pour la liste -->\r\n+  <mat-card class=\"section-card agency-list-card\"> <!-- Classe spécifique si besoin -->\r\n+\r\n+    <!-- En-tête de la carte avec titre, recherche et bouton d'ajout -->\r\n+    <mat-card-header class=\"section-header agency-card-header\">\r\n+      <mat-card-title>Liste des Agences</mat-card-title>\r\n+      <div class=\"table-controls\">\r\n+        <!-- Champ de recherche Material -->\r\n+        <mat-form-field appearance=\"outline\" class=\"search-field\">\r\n+          <mat-label>Rechercher une agence</mat-label>\r\n+          <input matInput placeholder=\"Nom, adresse, email...\"\r\n+                 [ngModel]=\"searchQuery\"\r\n+                 (input)=\"applyFilter($event)\"\r\n+                 #searchInput>\r\n+          <button mat-icon-button matSuffix *ngIf=\"searchQuery\" (click)=\"clearSearch()\" aria-label=\"Effacer la recherche\">\r\n+            <mat-icon>close</mat-icon>\r\n+          </button>\r\n+          <mat-icon matSuffix *ngIf=\"!searchQuery\">search</mat-icon>\r\n+        </mat-form-field>\r\n+\r\n+        <!-- Bouton d'ajout Material -->\r\n+        <button mat-flat-button color=\"primary\" class=\"add-button\" (click)=\"addAgency()\" [disabled]=\"!!activeModalRef\">\r\n+          <mat-icon>add_business</mat-icon>\r\n+          <span>Nouvelle Agence</span>\r\n         </button>\r\n       </div>\r\n-  \r\n-      <!-- Agency Table -->\r\n-      <div class=\"agence-display\">\r\n-        <div class=\"agence-table\">\r\n-          <table>\r\n-            <thead>\r\n-              <tr>\r\n-                <th>Nom</th>\r\n-                <th>Adresse</th>\r\n-                <th>Email</th>\r\n-                <th>Téléphone</th>\r\n-                <th>Date de Création</th>\r\n-                <th>Actions</th>\r\n\\ No newline at end of file\n-              </tr>\r\n-            </thead>\r\n-            <tbody>\r\n-                <tr *ngFor=\"let agency of filteredAgencies; let i = index\" \r\n-                [class.even]=\"i % 2 === 0\" \r\n-                [class.odd]=\"i % 2 !== 0\"\r\n-                (click)=\"showAgencyDetails(agency)\">\r\n-                <td>{{ agency.name }}</td>\r\n-                <td>{{ agency.address }}</td>\r\n-                <td>{{ agency.email }}</td>\r\n-                <td>{{ agency.phone }}</td>\r\n-                <td>{{ agency.createdAt | date:'dd/MM/yyyy' }}</td>\r\n-                <td class=\"actions\">\r\n-                    <button class=\"edit-btn\" (click)=\"editAgency(agency); $event.stopPropagation()\">\r\n-                      <i class=\"bi bi-pencil\"></i>\r\n-                    </button>\r\n-                    <button class=\"delete-btn\" (click)=\"deleteAgence(agency.id, agency.name); $event.stopPropagation()\">\r\n-                      <i class=\"bi bi-trash\"></i>\r\n-                    </button>\r\n-                  </td>\r\n-              </tr>\r\n-            </tbody>\r\n-          </table>\r\n-        </div>\r\n+    </mat-card-header>\r\n+\r\n+    <mat-card-content class=\"agency-card-content\">\r\n+      <!-- Indicateur de chargement -->\r\n+      <div *ngIf=\"isLoading\" class=\"loading-indicator\">\r\n+        <mat-spinner [diameter]=\"50\"></mat-spinner>\r\n+        <p>Chargement des agences...</p>\r\n       </div>\r\n-    </div>\r\n-  </div>\n+\r\n+      <!-- Message d'erreur -->\r\n+      <div *ngIf=\"!isLoading && errorMessage\" class=\"error-message\">\r\n+        <mat-icon color=\"warn\">error_outline</mat-icon>\r\n+        <span>{{ errorMessage }}</span>\r\n+        <button mat-button color=\"primary\" (click)=\"loadAgencies()\">Réessayer</button>\r\n+      </div>\r\n+\r\n+      <!-- Conteneur de la table pour le style et le scroll -->\r\n+      <div class=\"table-container\" [hidden]=\"isLoading || errorMessage\">\r\n+        <table mat-table [dataSource]=\"dataSource\" class=\"data-table agency-table\">\r\n+\r\n+          <!-- Colonne Nom -->\r\n+          <ng-container matColumnDef=\"name\">\r\n+            <th mat-header-cell *matHeaderCellDef> Nom </th>\r\n+            <td mat-cell *matCellDef=\"let agency\"> {{ agency.name }} </td>\r\n+          </ng-container>\r\n+\r\n+          <!-- Colonne Adresse -->\r\n+          <ng-container matColumnDef=\"address\">\r\n+            <th mat-header-cell *matHeaderCellDef> Adresse </th>\r\n+            <td mat-cell *matCellDef=\"let agency\"> {{ agency.address }} </td>\r\n+          </ng-container>\r\n+\r\n+          <!-- Colonne Email -->\r\n+          <ng-container matColumnDef=\"email\">\r\n+            <th mat-header-cell *matHeaderCellDef> Email </th>\r\n+            <td mat-cell *matCellDef=\"let agency\"> {{ agency.email }} </td>\r\n+          </ng-container>\r\n+\r\n+          <!-- Colonne Téléphone -->\r\n+          <ng-container matColumnDef=\"phone\">\r\n+            <th mat-header-cell *matHeaderCellDef> Téléphone </th>\r\n+            <td mat-cell *matCellDef=\"let agency\"> {{ agency.phone }} </td>\r\n+          </ng-container>\r\n+\r\n+          <!-- Colonne Date de Création -->\r\n+          <ng-container matColumnDef=\"createdAt\">\r\n+            <th mat-header-cell *matHeaderCellDef> Créé le </th>\r\n+            <td mat-cell *matCellDef=\"let agency\"> {{ agency.createdAt | date:'dd/MM/yyyy HH:mm' }} </td> <!-- Formatage date -->\r\n+          </ng-container>\r\n+\r\n+          <!-- Colonne Actions -->\r\n+          <ng-container matColumnDef=\"actions\">\r\n+            <th mat-header-cell *matHeaderCellDef class=\"actions-header\"> Actions </th>\r\n+            <td mat-cell *matCellDef=\"let agency\" class=\"actions-cell\">\r\n+              <!-- Bouton Modifier -->\r\n+              <button mat-icon-button class=\"edit-btn\"\r\n+                      matTooltip=\"Modifier l'agence\"\r\n+                      (click)=\"editAgency(agency); $event.stopPropagation()\"\r\n+                      [disabled]=\"!!activeModalRef\">\r\n+                 <mat-icon>edit</mat-icon>\r\n+              </button>\r\n+              <!-- Bouton Supprimer -->\r\n+              <button mat-icon-button class=\"delete-btn\"\r\n+                      matTooltip=\"Supprimer l'agence\"\r\n+                      (click)=\"deleteAgence(agency); $event.stopPropagation()\"\r\n+                      [disabled]=\"!!activeModalRef\">\r\n+                 <mat-icon>delete_outline</mat-icon>\r\n+                 <!-- Optionnel: Spinner pendant la suppression -->\r\n+                 <!-- <mat-spinner *ngIf=\"isDeleting[agency._id]\" [diameter]=\"20\"></mat-spinner> -->\r\n+              </button>\r\n+            </td>\r\n+          </ng-container>\r\n+\r\n+          <!-- Définition des lignes d'en-tête et de données -->\r\n+          <tr mat-header-row *matHeaderRowDef=\"displayedColumns; sticky: true\"></tr> <!-- sticky: true pour fixer l'en-tête -->\r\n+          <tr mat-row *matRowDef=\"let agency; columns: displayedColumns;\"\r\n+              (click)=\"showAgencyDetails(agency)\" class=\"data-row\"\r\n+              matRipple> <!-- Effet ripple au clic -->\r\n+          </tr>\r\n+\r\n+          <!-- Ligne affichée quand il n'y a pas de données correspondantes -->\r\n+          <tr class=\"mat-row\" *matNoDataRow>\r\n+            <td class=\"mat-cell\" [attr.colspan]=\"displayedColumns.length\">\r\n+              {{ dataSource.filter ? 'Aucune agence trouvée pour \"' + dataSource.filter + '\".' : 'Aucune agence à afficher.' }}\r\n+            </td>\r\n+          </tr>\r\n+        </table>\r\n+      </div>\r\n+\r\n+      <!-- Optionnel: Pagination Material -->\r\n+      <!-- <mat-paginator [pageSizeOptions]=\"[10, 25, 50]\" showFirstLastButtons\r\n+                     aria-label=\"Sélectionner la page d'agences\">\r\n+      </mat-paginator> -->\r\n+\r\n+    </mat-card-content>\r\n+  </mat-card>\r\n+</div>\r\n"
                },
                {
                    "date": 1745616386113,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,126 +1,62 @@\n-<div class=\"agence-container dashboard-container\"> <!-- Utiliser les classes de base -->\r\n-  <app-header [title]=\"'Gestion des Agences'\"></app-header>\r\n-\r\n-  <!-- Utiliser mat-card comme conteneur principal pour la liste -->\r\n-  <mat-card class=\"section-card agency-list-card\"> <!-- Classe spécifique si besoin -->\r\n-\r\n-    <!-- En-tête de la carte avec titre, recherche et bouton d'ajout -->\r\n-    <mat-card-header class=\"section-header agency-card-header\">\r\n-      <mat-card-title>Liste des Agences</mat-card-title>\r\n-      <div class=\"table-controls\">\r\n-        <!-- Champ de recherche Material -->\r\n-        <mat-form-field appearance=\"outline\" class=\"search-field\">\r\n-          <mat-label>Rechercher une agence</mat-label>\r\n-          <input matInput placeholder=\"Nom, adresse, email...\"\r\n-                 [ngModel]=\"searchQuery\"\r\n-                 (input)=\"applyFilter($event)\"\r\n-                 #searchInput>\r\n-          <button mat-icon-button matSuffix *ngIf=\"searchQuery\" (click)=\"clearSearch()\" aria-label=\"Effacer la recherche\">\r\n-            <mat-icon>close</mat-icon>\r\n-          </button>\r\n-          <mat-icon matSuffix *ngIf=\"!searchQuery\">search</mat-icon>\r\n-        </mat-form-field>\r\n-\r\n-        <!-- Bouton d'ajout Material -->\r\n-        <button mat-flat-button color=\"primary\" class=\"add-button\" (click)=\"addAgency()\" [disabled]=\"!!activeModalRef\">\r\n-          <mat-icon>add_business</mat-icon>\r\n-          <span>Nouvelle Agence</span>\r\n+<div class=\"agence-container\">\r\n+    <app-header [title]=\"'Liste des Agences'\"></app-header>\r\n+  \r\n+    <div class=\"container\">\r\n+      <!-- Row 1: Search Bar, Current Date, and Add Button -->\r\n+      <div class=\"agence-header\">\r\n+        <!-- Search Bar -->\r\n+        <div class=\"input-container\">\r\n+          <i class=\"bi bi-search icon\"></i>\r\n+          <input type=\"text\" placeholder=\"Rechercher une agence...\" [(ngModel)]=\"searchQuery\" (input)=\"filterAgencies()\" />\r\n+        </div>\r\n+  \r\n+        <!-- Date -->\r\n+        <div class=\"current-date\">\r\n+          {{ currentDate | date: 'dd/MM/yyyy' }}\r\n+        </div>\r\n+  \r\n+        <!-- Add Agency Button -->\r\n+        <button class=\"add-agency btn btn-primary\" (click)=\"addAgency()\">\r\n+          <i class=\"bi bi-plus\"></i> Nouvelle Agence\r\n         </button>\r\n       </div>\r\n-    </mat-card-header>\r\n-\r\n-    <mat-card-content class=\"agency-card-content\">\r\n-      <!-- Indicateur de chargement -->\r\n-      <div *ngIf=\"isLoading\" class=\"loading-indicator\">\r\n-        <mat-spinner [diameter]=\"50\"></mat-spinner>\r\n-        <p>Chargement des agences...</p>\r\n+  \r\n+      <!-- Agency Table -->\r\n+      <div class=\"agence-display\">\r\n+        <div class=\"agence-table\">\r\n+          <table>\r\n+            <thead>\r\n+              <tr>\r\n+                <th>Nom</th>\r\n+                <th>Adresse</th>\r\n+                <th>Email</th>\r\n+                <th>Téléphone</th>\r\n+                <th>Date de Création</th>\r\n+                <th>Actions</th>\r\n+              </tr>\r\n+            </thead>\r\n+            <tbody>\r\n+                <tr *ngFor=\"let agency of filteredAgencies; let i = index\" \r\n+                [class.even]=\"i % 2 === 0\" \r\n+                [class.odd]=\"i % 2 !== 0\"\r\n+                (click)=\"showAgencyDetails(agency)\">\r\n+                <td>{{ agency.name }}</td>\r\n+                <td>{{ agency.address }}</td>\r\n+                <td>{{ agency.email }}</td>\r\n+                <td>{{ agency.phone }}</td>\r\n+                <td>{{ agency.createdAt | date:'dd/MM/yyyy' }}</td>\r\n+                <td class=\"actions\">\r\n+                    <button class=\"edit-btn\" (click)=\"editAgency(agency); $event.stopPropagation()\">\r\n+                      <i class=\"bi bi-pencil\"></i>\r\n+                    </button>\r\n+                    <button class=\"delete-btn\" (click)=\"deleteAgence(agency.id, agency.name); $event.stopPropagation()\">\r\n+                      <i class=\"bi bi-trash\"></i>\r\n+                    </button>\r\n+                  </td>\r\n+              </tr>\r\n+            </tbody>\r\n+          </table>\r\n+        </div>\r\n       </div>\r\n-\r\n-      <!-- Message d'erreur -->\r\n-      <div *ngIf=\"!isLoading && errorMessage\" class=\"error-message\">\r\n-        <mat-icon color=\"warn\">error_outline</mat-icon>\r\n-        <span>{{ errorMessage }}</span>\r\n-        <button mat-button color=\"primary\" (click)=\"loadAgencies()\">Réessayer</button>\r\n-      </div>\r\n-\r\n-      <!-- Conteneur de la table pour le style et le scroll -->\r\n-      <div class=\"table-container\" [hidden]=\"isLoading || errorMessage\">\r\n-        <table mat-table [dataSource]=\"dataSource\" class=\"data-table agency-table\">\r\n-\r\n-          <!-- Colonne Nom -->\r\n-          <ng-container matColumnDef=\"name\">\r\n-            <th mat-header-cell *matHeaderCellDef> Nom </th>\r\n-            <td mat-cell *matCellDef=\"let agency\"> {{ agency.name }} </td>\r\n-          </ng-container>\r\n-\r\n-          <!-- Colonne Adresse -->\r\n-          <ng-container matColumnDef=\"address\">\r\n-            <th mat-header-cell *matHeaderCellDef> Adresse </th>\r\n-            <td mat-cell *matCellDef=\"let agency\"> {{ agency.address }} </td>\r\n-          </ng-container>\r\n-\r\n-          <!-- Colonne Email -->\r\n-          <ng-container matColumnDef=\"email\">\r\n-            <th mat-header-cell *matHeaderCellDef> Email </th>\r\n-            <td mat-cell *matCellDef=\"let agency\"> {{ agency.email }} </td>\r\n-          </ng-container>\r\n-\r\n-          <!-- Colonne Téléphone -->\r\n-          <ng-container matColumnDef=\"phone\">\r\n-            <th mat-header-cell *matHeaderCellDef> Téléphone </th>\r\n-            <td mat-cell *matCellDef=\"let agency\"> {{ agency.phone }} </td>\r\n-          </ng-container>\r\n-\r\n-          <!-- Colonne Date de Création -->\r\n-          <ng-container matColumnDef=\"createdAt\">\r\n-            <th mat-header-cell *matHeaderCellDef> Créé le </th>\r\n-            <td mat-cell *matCellDef=\"let agency\"> {{ agency.createdAt | date:'dd/MM/yyyy HH:mm' }} </td> <!-- Formatage date -->\r\n-          </ng-container>\r\n-\r\n-          <!-- Colonne Actions -->\r\n-          <ng-container matColumnDef=\"actions\">\r\n-            <th mat-header-cell *matHeaderCellDef class=\"actions-header\"> Actions </th>\r\n-            <td mat-cell *matCellDef=\"let agency\" class=\"actions-cell\">\r\n-              <!-- Bouton Modifier -->\r\n-              <button mat-icon-button class=\"edit-btn\"\r\n-                      matTooltip=\"Modifier l'agence\"\r\n-                      (click)=\"editAgency(agency); $event.stopPropagation()\"\r\n-                      [disabled]=\"!!activeModalRef\">\r\n-                 <mat-icon>edit</mat-icon>\r\n-              </button>\r\n-              <!-- Bouton Supprimer -->\r\n-              <button mat-icon-button class=\"delete-btn\"\r\n-                      matTooltip=\"Supprimer l'agence\"\r\n-                      (click)=\"deleteAgence(agency); $event.stopPropagation()\"\r\n-                      [disabled]=\"!!activeModalRef\">\r\n-                 <mat-icon>delete_outline</mat-icon>\r\n-                 <!-- Optionnel: Spinner pendant la suppression -->\r\n-                 <!-- <mat-spinner *ngIf=\"isDeleting[agency._id]\" [diameter]=\"20\"></mat-spinner> -->\r\n-              </button>\r\n-            </td>\r\n-          </ng-container>\r\n-\r\n-          <!-- Définition des lignes d'en-tête et de données -->\r\n-          <tr mat-header-row *matHeaderRowDef=\"displayedColumns; sticky: true\"></tr> <!-- sticky: true pour fixer l'en-tête -->\r\n-          <tr mat-row *matRowDef=\"let agency; columns: displayedColumns;\"\r\n-              (click)=\"showAgencyDetails(agency)\" class=\"data-row\"\r\n-              matRipple> <!-- Effet ripple au clic -->\r\n-          </tr>\r\n-\r\n-          <!-- Ligne affichée quand il n'y a pas de données correspondantes -->\r\n-          <tr class=\"mat-row\" *matNoDataRow>\r\n-            <td class=\"mat-cell\" [attr.colspan]=\"displayedColumns.length\">\r\n-              {{ dataSource.filter ? 'Aucune agence trouvée pour \"' + dataSource.filter + '\".' : 'Aucune agence à afficher.' }}\r\n-            </td>\r\n-          </tr>\r\n-        </table>\r\n-      </div>\r\n-\r\n-      <!-- Optionnel: Pagination Material -->\r\n-      <!-- <mat-paginator [pageSizeOptions]=\"[10, 25, 50]\" showFirstLastButtons\r\n-                     aria-label=\"Sélectionner la page d'agences\">\r\n-      </mat-paginator> -->\r\n-\r\n-    </mat-card-content>\r\n-  </mat-card>\r\n-</div>\r\n+    </div>\r\n+  </div>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1745617628486,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,62 +1,126 @@\n-<div class=\"agence-container\">\r\n-    <app-header [title]=\"'Liste des Agences'\"></app-header>\r\n-  \r\n-    <div class=\"container\">\r\n-      <!-- Row 1: Search Bar, Current Date, and Add Button -->\r\n-      <div class=\"agence-header\">\r\n-        <!-- Search Bar -->\r\n-        <div class=\"input-container\">\r\n-          <i class=\"bi bi-search icon\"></i>\r\n-          <input type=\"text\" placeholder=\"Rechercher une agence...\" [(ngModel)]=\"searchQuery\" (input)=\"filterAgencies()\" />\r\n-        </div>\r\n-  \r\n-        <!-- Date -->\r\n-        <div class=\"current-date\">\r\n-          {{ currentDate | date: 'dd/MM/yyyy' }}\r\n-        </div>\r\n-  \r\n-        <!-- Add Agency Button -->\r\n-        <button class=\"add-agency btn btn-primary\" (click)=\"addAgency()\">\r\n-          <i class=\"bi bi-plus\"></i> Nouvelle Agence\r\n+<div class=\"agence-container dashboard-container\"> <!-- Utiliser les classes de base -->\r\n+  <app-header [title]=\"'Gestion des Agences'\"></app-header>\r\n+\r\n+  <!-- Utiliser mat-card comme conteneur principal pour la liste -->\r\n+  <mat-card class=\"section-card agency-list-card\"> <!-- Classe spécifique si besoin -->\r\n+\r\n+    <!-- En-tête de la carte avec titre, recherche et bouton d'ajout -->\r\n+    <mat-card-header class=\"section-header agency-card-header\">\r\n+      <mat-card-title>Liste des Agences</mat-card-title>\r\n+      <div class=\"table-controls\">\r\n+        <!-- Champ de recherche Material -->\r\n+        <mat-form-field appearance=\"outline\" class=\"search-field\">\r\n+          <mat-label>Rechercher une agence</mat-label>\r\n+          <input matInput placeholder=\"Nom, adresse, email...\"\r\n+                 [(ngModel)]=\"searchQuery\"\r\n+                 (input)=\"applyFilter($event)\" <!-- Assurez-vous que applyFilter existe dans le .ts -->\r\n+                 #searchInput>\r\n+          <button mat-icon-button matSuffix *ngIf=\"searchQuery\" (click)=\"clearSearch()\" aria-label=\"Effacer la recherche\"> <!-- Assurez-vous que clearSearch existe -->\r\n+            <mat-icon>close</mat-icon>\r\n+          </button>\r\n+          <mat-icon matSuffix *ngIf=\"!searchQuery\">search</mat-icon>\r\n+        </mat-form-field>\r\n+\r\n+        <!-- Bouton d'ajout Material -->\r\n+        <button mat-flat-button color=\"primary\" class=\"add-button\" (click)=\"addAgency()\" [disabled]=\"!!activeModalRef\">\r\n+          <mat-icon>add_business</mat-icon>\r\n+          <span>Nouvelle Agence</span>\r\n         </button>\r\n       </div>\r\n-  \r\n-      <!-- Agency Table -->\r\n-      <div class=\"agence-display\">\r\n-        <div class=\"agence-table\">\r\n-          <table>\r\n-            <thead>\r\n-              <tr>\r\n-                <th>Nom</th>\r\n-                <th>Adresse</th>\r\n-                <th>Email</th>\r\n-                <th>Téléphone</th>\r\n-                <th>Date de Création</th>\r\n-                <th>Actions</th>\r\n\\ No newline at end of file\n-              </tr>\r\n-            </thead>\r\n-            <tbody>\r\n-                <tr *ngFor=\"let agency of filteredAgencies; let i = index\" \r\n-                [class.even]=\"i % 2 === 0\" \r\n-                [class.odd]=\"i % 2 !== 0\"\r\n-                (click)=\"showAgencyDetails(agency)\">\r\n-                <td>{{ agency.name }}</td>\r\n-                <td>{{ agency.address }}</td>\r\n-                <td>{{ agency.email }}</td>\r\n-                <td>{{ agency.phone }}</td>\r\n-                <td>{{ agency.createdAt | date:'dd/MM/yyyy' }}</td>\r\n-                <td class=\"actions\">\r\n-                    <button class=\"edit-btn\" (click)=\"editAgency(agency); $event.stopPropagation()\">\r\n-                      <i class=\"bi bi-pencil\"></i>\r\n-                    </button>\r\n-                    <button class=\"delete-btn\" (click)=\"deleteAgence(agency.id, agency.name); $event.stopPropagation()\">\r\n-                      <i class=\"bi bi-trash\"></i>\r\n-                    </button>\r\n-                  </td>\r\n-              </tr>\r\n-            </tbody>\r\n-          </table>\r\n-        </div>\r\n+    </mat-card-header>\r\n+\r\n+    <mat-card-content class=\"agency-card-content\">\r\n+      <!-- Indicateur de chargement -->\r\n+      <div *ngIf=\"isLoading\" class=\"loading-indicator\">\r\n+        <mat-spinner [diameter]=\"50\"></mat-spinner>\r\n+        <p>Chargement des agences...</p>\r\n       </div>\r\n-    </div>\r\n-  </div>\n+\r\n+      <!-- Message d'erreur -->\r\n+      <div *ngIf=\"!isLoading && errorMessage\" class=\"error-message\">\r\n+        <mat-icon color=\"warn\">error_outline</mat-icon>\r\n+        <span>{{ errorMessage }}</span>\r\n+        <button mat-button color=\"primary\" (click)=\"loadAgencies()\">Réessayer</button>\r\n+      </div>\r\n+\r\n+      <!-- Conteneur de la table pour le style et le scroll -->\r\n+      <div class=\"table-container\" [hidden]=\"isLoading || errorMessage\">\r\n+        <!-- Utiliser dataSource lié à MatTableDataSource dans le .ts -->\r\n+        <table mat-table [dataSource]=\"dataSource\" class=\"data-table agency-table\">\r\n+\r\n+          <!-- Colonne Nom -->\r\n+          <ng-container matColumnDef=\"name\">\r\n+            <th mat-header-cell *matHeaderCellDef> Nom </th>\r\n+            <td mat-cell *matCellDef=\"let agency\"> {{ agency.name }} </td>\r\n+          </ng-container>\r\n+\r\n+          <!-- Colonne Adresse -->\r\n+          <ng-container matColumnDef=\"address\">\r\n+            <th mat-header-cell *matHeaderCellDef> Adresse </th>\r\n+            <td mat-cell *matCellDef=\"let agency\"> {{ agency.address || 'N/A' }} </td> <!-- Fallback si vide -->\r\n+          </ng-container>\r\n+\r\n+          <!-- Colonne Email -->\r\n+          <ng-container matColumnDef=\"email\">\r\n+            <th mat-header-cell *matHeaderCellDef> Email </th>\r\n+            <td mat-cell *matCellDef=\"let agency\"> {{ agency.email || 'N/A' }} </td> <!-- Fallback si vide -->\r\n+          </ng-container>\r\n+\r\n+          <!-- Colonne Téléphone -->\r\n+          <ng-container matColumnDef=\"phone\">\r\n+            <th mat-header-cell *matHeaderCellDef> Téléphone </th>\r\n+            <td mat-cell *matCellDef=\"let agency\"> {{ agency.phone || 'N/A' }} </td> <!-- Fallback si vide -->\r\n+          </ng-container>\r\n+\r\n+          <!-- Colonne Date de Création -->\r\n+          <ng-container matColumnDef=\"createdAt\">\r\n+            <th mat-header-cell *matHeaderCellDef> Créé le </th>\r\n+            <td mat-cell *matCellDef=\"let agency\"> {{ agency.createdAt | date:'dd/MM/yyyy HH:mm' }} </td> <!-- Formatage date -->\r\n+          </ng-container>\r\n+\r\n+          <!-- Colonne Actions -->\r\n+          <ng-container matColumnDef=\"actions\">\r\n+            <th mat-header-cell *matHeaderCellDef class=\"actions-header\"> Actions </th>\r\n+            <!-- Utiliser la classe 'actions' comme dans l'ancien SCSS pour cibler les boutons -->\r\n+            <td mat-cell *matCellDef=\"let agency\" class=\"actions actions-cell\">\r\n+              <!-- Bouton Modifier (garde les classes originales pour le style) -->\r\n+              <button class=\"edit-btn\"\r\n+                      matTooltip=\"Modifier l'agence\"\r\n+                      (click)=\"editAgency(agency); $event.stopPropagation()\"\r\n+                      [disabled]=\"!!activeModalRef\">\r\n+                 <i class=\"bi bi-pencil\"></i> <!-- Utilisation de l'icône Bootstrap comme avant -->\r\n+              </button>\r\n+              <!-- Bouton Supprimer (garde les classes originales pour le style) -->\r\n+              <button class=\"delete-btn\"\r\n+                      matTooltip=\"Supprimer l'agence\"\r\n+                      (click)=\"deleteAgence(agency); $event.stopPropagation()\" <!-- Assurez-vous que deleteAgence prend l'objet agency -->\r\n+                      [disabled]=\"!!activeModalRef\">\r\n+                 <i class=\"bi bi-trash\"></i> <!-- Utilisation de l'icône Bootstrap comme avant -->\r\n+              </button>\r\n+            </td>\r\n+          </ng-container>\r\n+\r\n+          <!-- Définition des lignes d'en-tête et de données -->\r\n+          <tr mat-header-row *matHeaderRowDef=\"displayedColumns; sticky: true\"></tr> <!-- sticky: true pour fixer l'en-tête -->\r\n+          <tr mat-row *matRowDef=\"let agency; columns: displayedColumns;\"\r\n+              (click)=\"showAgencyDetails(agency)\" class=\"data-row\"\r\n+              matRipple> <!-- Effet ripple au clic -->\r\n+          </tr>\r\n+\r\n+          <!-- Ligne affichée quand il n'y a pas de données correspondantes -->\r\n+          <tr class=\"mat-row\" *matNoDataRow>\r\n+            <td class=\"mat-cell\" [attr.colspan]=\"displayedColumns.length\">\r\n+              {{ dataSource.filter ? 'Aucune agence trouvée pour \"' + dataSource.filter + '\".' : 'Aucune agence à afficher.' }}\r\n+            </td>\r\n+          </tr>\r\n+        </table>\r\n+      </div>\r\n+\r\n+      <!-- Optionnel: Pagination Material -->\r\n+      <!-- <mat-paginator [pageSizeOptions]=\"[10, 25, 50]\" showFirstLastButtons\r\n+                     aria-label=\"Sélectionner la page d'agences\">\r\n+      </mat-paginator> -->\r\n+\r\n+    </mat-card-content>\r\n+  </mat-card>\r\n+</div>\r\n"
                },
                {
                    "date": 1745617675863,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,9 +12,9 @@\n         <mat-form-field appearance=\"outline\" class=\"search-field\">\r\n           <mat-label>Rechercher une agence</mat-label>\r\n           <input matInput placeholder=\"Nom, adresse, email...\"\r\n                  [(ngModel)]=\"searchQuery\"\r\n-                 (input)=\"applyFilter($event)\" <!-- Assurez-vous que applyFilter existe dans le .ts -->\r\n+                 (input)=\"applyFilter($event)\" \r\n                  #searchInput>\r\n           <button mat-icon-button matSuffix *ngIf=\"searchQuery\" (click)=\"clearSearch()\" aria-label=\"Effacer la recherche\"> <!-- Assurez-vous que clearSearch existe -->\r\n             <mat-icon>close</mat-icon>\r\n           </button>\r\n"
                },
                {
                    "date": 1745617684298,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -92,9 +92,9 @@\n               </button>\r\n               <!-- Bouton Supprimer (garde les classes originales pour le style) -->\r\n               <button class=\"delete-btn\"\r\n                       matTooltip=\"Supprimer l'agence\"\r\n-                      (click)=\"deleteAgence(agency); $event.stopPropagation()\" <!-- Assurez-vous que deleteAgence prend l'objet agency -->\r\n+                      (click)=\"deleteAgence(agency); $event.stopPropagation()\" \r\n                       [disabled]=\"!!activeModalRef\">\r\n                  <i class=\"bi bi-trash\"></i> <!-- Utilisation de l'icône Bootstrap comme avant -->\r\n               </button>\r\n             </td>\r\n"
                },
                {
                    "date": 1745617723429,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,126 +1,62 @@\n-<div class=\"agence-container dashboard-container\"> <!-- Utiliser les classes de base -->\r\n-  <app-header [title]=\"'Gestion des Agences'\"></app-header>\r\n-\r\n-  <!-- Utiliser mat-card comme conteneur principal pour la liste -->\r\n-  <mat-card class=\"section-card agency-list-card\"> <!-- Classe spécifique si besoin -->\r\n-\r\n-    <!-- En-tête de la carte avec titre, recherche et bouton d'ajout -->\r\n-    <mat-card-header class=\"section-header agency-card-header\">\r\n-      <mat-card-title>Liste des Agences</mat-card-title>\r\n-      <div class=\"table-controls\">\r\n-        <!-- Champ de recherche Material -->\r\n-        <mat-form-field appearance=\"outline\" class=\"search-field\">\r\n-          <mat-label>Rechercher une agence</mat-label>\r\n-          <input matInput placeholder=\"Nom, adresse, email...\"\r\n-                 [(ngModel)]=\"searchQuery\"\r\n-                 (input)=\"applyFilter($event)\" \r\n-                 #searchInput>\r\n-          <button mat-icon-button matSuffix *ngIf=\"searchQuery\" (click)=\"clearSearch()\" aria-label=\"Effacer la recherche\"> <!-- Assurez-vous que clearSearch existe -->\r\n-            <mat-icon>close</mat-icon>\r\n-          </button>\r\n-          <mat-icon matSuffix *ngIf=\"!searchQuery\">search</mat-icon>\r\n-        </mat-form-field>\r\n-\r\n-        <!-- Bouton d'ajout Material -->\r\n-        <button mat-flat-button color=\"primary\" class=\"add-button\" (click)=\"addAgency()\" [disabled]=\"!!activeModalRef\">\r\n-          <mat-icon>add_business</mat-icon>\r\n-          <span>Nouvelle Agence</span>\r\n+<div class=\"agence-container\">\r\n+    <app-header [title]=\"'Liste des Agences'\"></app-header>\r\n+  \r\n+    <div class=\"container\">\r\n+      <!-- Row 1: Search Bar, Current Date, and Add Button -->\r\n+      <div class=\"agence-header\">\r\n+        <!-- Search Bar -->\r\n+        <div class=\"input-container\">\r\n+          <i class=\"bi bi-search icon\"></i>\r\n+          <input type=\"text\" placeholder=\"Rechercher une agence...\" [(ngModel)]=\"searchQuery\" (input)=\"filterAgencies()\" />\r\n+        </div>\r\n+  \r\n+        <!-- Date -->\r\n+        <div class=\"current-date\">\r\n+          {{ currentDate | date: 'dd/MM/yyyy' }}\r\n+        </div>\r\n+  \r\n+        <!-- Add Agency Button -->\r\n+        <button class=\"add-agency btn btn-primary\" (click)=\"addAgency()\">\r\n+          <i class=\"bi bi-plus\"></i> Nouvelle Agence\r\n         </button>\r\n       </div>\r\n-    </mat-card-header>\r\n-\r\n-    <mat-card-content class=\"agency-card-content\">\r\n-      <!-- Indicateur de chargement -->\r\n-      <div *ngIf=\"isLoading\" class=\"loading-indicator\">\r\n-        <mat-spinner [diameter]=\"50\"></mat-spinner>\r\n-        <p>Chargement des agences...</p>\r\n+  \r\n+      <!-- Agency Table -->\r\n+      <div class=\"agence-display\">\r\n+        <div class=\"agence-table\">\r\n+          <table>\r\n+            <thead>\r\n+              <tr>\r\n+                <th>Nom</th>\r\n+                <th>Adresse</th>\r\n+                <th>Email</th>\r\n+                <th>Téléphone</th>\r\n+                <th>Date de Création</th>\r\n+                <th>Actions</th>\r\n+              </tr>\r\n+            </thead>\r\n+            <tbody>\r\n+                <tr *ngFor=\"let agency of filteredAgencies; let i = index\" \r\n+                [class.even]=\"i % 2 === 0\" \r\n+                [class.odd]=\"i % 2 !== 0\"\r\n+                (click)=\"showAgencyDetails(agency)\">\r\n+                <td>{{ agency.name }}</td>\r\n+                <td>{{ agency.address }}</td>\r\n+                <td>{{ agency.email }}</td>\r\n+                <td>{{ agency.phone }}</td>\r\n+                <td>{{ agency.createdAt | date:'dd/MM/yyyy' }}</td>\r\n+                <td class=\"actions\">\r\n+                    <button class=\"edit-btn\" (click)=\"editAgency(agency); $event.stopPropagation()\">\r\n+                      <i class=\"bi bi-pencil\"></i>\r\n+                    </button>\r\n+                    <button class=\"delete-btn\" (click)=\"deleteAgence(agency.id, agency.name); $event.stopPropagation()\">\r\n+                      <i class=\"bi bi-trash\"></i>\r\n+                    </button>\r\n+                  </td>\r\n+              </tr>\r\n+            </tbody>\r\n+          </table>\r\n+        </div>\r\n       </div>\r\n-\r\n-      <!-- Message d'erreur -->\r\n-      <div *ngIf=\"!isLoading && errorMessage\" class=\"error-message\">\r\n-        <mat-icon color=\"warn\">error_outline</mat-icon>\r\n-        <span>{{ errorMessage }}</span>\r\n-        <button mat-button color=\"primary\" (click)=\"loadAgencies()\">Réessayer</button>\r\n-      </div>\r\n-\r\n-      <!-- Conteneur de la table pour le style et le scroll -->\r\n-      <div class=\"table-container\" [hidden]=\"isLoading || errorMessage\">\r\n-        <!-- Utiliser dataSource lié à MatTableDataSource dans le .ts -->\r\n-        <table mat-table [dataSource]=\"dataSource\" class=\"data-table agency-table\">\r\n-\r\n-          <!-- Colonne Nom -->\r\n-          <ng-container matColumnDef=\"name\">\r\n-            <th mat-header-cell *matHeaderCellDef> Nom </th>\r\n-            <td mat-cell *matCellDef=\"let agency\"> {{ agency.name }} </td>\r\n-          </ng-container>\r\n-\r\n-          <!-- Colonne Adresse -->\r\n-          <ng-container matColumnDef=\"address\">\r\n-            <th mat-header-cell *matHeaderCellDef> Adresse </th>\r\n-            <td mat-cell *matCellDef=\"let agency\"> {{ agency.address || 'N/A' }} </td> <!-- Fallback si vide -->\r\n-          </ng-container>\r\n-\r\n-          <!-- Colonne Email -->\r\n-          <ng-container matColumnDef=\"email\">\r\n-            <th mat-header-cell *matHeaderCellDef> Email </th>\r\n-            <td mat-cell *matCellDef=\"let agency\"> {{ agency.email || 'N/A' }} </td> <!-- Fallback si vide -->\r\n-          </ng-container>\r\n-\r\n-          <!-- Colonne Téléphone -->\r\n-          <ng-container matColumnDef=\"phone\">\r\n-            <th mat-header-cell *matHeaderCellDef> Téléphone </th>\r\n-            <td mat-cell *matCellDef=\"let agency\"> {{ agency.phone || 'N/A' }} </td> <!-- Fallback si vide -->\r\n-          </ng-container>\r\n-\r\n-          <!-- Colonne Date de Création -->\r\n-          <ng-container matColumnDef=\"createdAt\">\r\n-            <th mat-header-cell *matHeaderCellDef> Créé le </th>\r\n-            <td mat-cell *matCellDef=\"let agency\"> {{ agency.createdAt | date:'dd/MM/yyyy HH:mm' }} </td> <!-- Formatage date -->\r\n-          </ng-container>\r\n-\r\n-          <!-- Colonne Actions -->\r\n-          <ng-container matColumnDef=\"actions\">\r\n-            <th mat-header-cell *matHeaderCellDef class=\"actions-header\"> Actions </th>\r\n-            <!-- Utiliser la classe 'actions' comme dans l'ancien SCSS pour cibler les boutons -->\r\n-            <td mat-cell *matCellDef=\"let agency\" class=\"actions actions-cell\">\r\n-              <!-- Bouton Modifier (garde les classes originales pour le style) -->\r\n-              <button class=\"edit-btn\"\r\n-                      matTooltip=\"Modifier l'agence\"\r\n-                      (click)=\"editAgency(agency); $event.stopPropagation()\"\r\n-                      [disabled]=\"!!activeModalRef\">\r\n-                 <i class=\"bi bi-pencil\"></i> <!-- Utilisation de l'icône Bootstrap comme avant -->\r\n-              </button>\r\n-              <!-- Bouton Supprimer (garde les classes originales pour le style) -->\r\n-              <button class=\"delete-btn\"\r\n-                      matTooltip=\"Supprimer l'agence\"\r\n-                      (click)=\"deleteAgence(agency); $event.stopPropagation()\" \r\n-                      [disabled]=\"!!activeModalRef\">\r\n-                 <i class=\"bi bi-trash\"></i> <!-- Utilisation de l'icône Bootstrap comme avant -->\r\n-              </button>\r\n-            </td>\r\n-          </ng-container>\r\n-\r\n-          <!-- Définition des lignes d'en-tête et de données -->\r\n-          <tr mat-header-row *matHeaderRowDef=\"displayedColumns; sticky: true\"></tr> <!-- sticky: true pour fixer l'en-tête -->\r\n-          <tr mat-row *matRowDef=\"let agency; columns: displayedColumns;\"\r\n-              (click)=\"showAgencyDetails(agency)\" class=\"data-row\"\r\n-              matRipple> <!-- Effet ripple au clic -->\r\n-          </tr>\r\n-\r\n-          <!-- Ligne affichée quand il n'y a pas de données correspondantes -->\r\n-          <tr class=\"mat-row\" *matNoDataRow>\r\n-            <td class=\"mat-cell\" [attr.colspan]=\"displayedColumns.length\">\r\n-              {{ dataSource.filter ? 'Aucune agence trouvée pour \"' + dataSource.filter + '\".' : 'Aucune agence à afficher.' }}\r\n-            </td>\r\n-          </tr>\r\n-        </table>\r\n-      </div>\r\n-\r\n-      <!-- Optionnel: Pagination Material -->\r\n-      <!-- <mat-paginator [pageSizeOptions]=\"[10, 25, 50]\" showFirstLastButtons\r\n-                     aria-label=\"Sélectionner la page d'agences\">\r\n-      </mat-paginator> -->\r\n-\r\n-    </mat-card-content>\r\n-  </mat-card>\r\n-</div>\r\n+    </div>\r\n+  </div>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1745617982735,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,62 +1,128 @@\n-<div class=\"agence-container\">\r\n-    <app-header [title]=\"'Liste des Agences'\"></app-header>\r\n-  \r\n-    <div class=\"container\">\r\n-      <!-- Row 1: Search Bar, Current Date, and Add Button -->\r\n-      <div class=\"agence-header\">\r\n-        <!-- Search Bar -->\r\n-        <div class=\"input-container\">\r\n-          <i class=\"bi bi-search icon\"></i>\r\n-          <input type=\"text\" placeholder=\"Rechercher une agence...\" [(ngModel)]=\"searchQuery\" (input)=\"filterAgencies()\" />\r\n-        </div>\r\n-  \r\n-        <!-- Date -->\r\n-        <div class=\"current-date\">\r\n-          {{ currentDate | date: 'dd/MM/yyyy' }}\r\n-        </div>\r\n-  \r\n-        <!-- Add Agency Button -->\r\n-        <button class=\"add-agency btn btn-primary\" (click)=\"addAgency()\">\r\n-          <i class=\"bi bi-plus\"></i> Nouvelle Agence\r\n+<div class=\"agence-container dashboard-container\"> <!-- Classes de base pour le style global -->\r\n+  <app-header [title]=\"'Gestion des Agences'\"></app-header>\r\n+\r\n+  <mat-card class=\"section-card agency-list-card\">\r\n+\r\n+    <!-- En-tête de la carte -->\r\n+    <mat-card-header class=\"section-header agency-card-header\">\r\n+      <mat-card-title>Liste des Agences</mat-card-title>\r\n+      <div class=\"table-controls\">\r\n+        <!-- Champ de recherche Material -->\r\n+        <mat-form-field appearance=\"outline\" class=\"search-field\">\r\n+          <mat-label>Rechercher</mat-label>\r\n+          <input matInput\r\n+                 id=\"agencySearchInput\" <!-- ID Optionnel -->\r\n+                 placeholder=\"Nom, adresse, email...\"\r\n+                 [(ngModel)]=\"searchQuery\"\r\n+                 (input)=\"applyFilter($event)\" <!-- Appel de applyFilter -->\r\n+                 #searchInput>\r\n+          <!-- Bouton pour effacer la recherche -->\r\n+          <button mat-icon-button matSuffix *ngIf=\"searchQuery\" (click)=\"clearSearch()\" aria-label=\"Effacer la recherche\">\r\n+            <mat-icon>close</mat-icon>\r\n+          </button>\r\n+          <mat-icon matSuffix *ngIf=\"!searchQuery\">search</mat-icon>\r\n+        </mat-form-field>\r\n+\r\n+        <!-- Bouton d'ajout Material -->\r\n+        <button mat-flat-button color=\"primary\" class=\"add-button\" (click)=\"addAgency()\" [disabled]=\"isLoading || !!activeModalRef\">\r\n+          <mat-icon>add_business</mat-icon>\r\n+          <span>Nouvelle Agence</span>\r\n         </button>\r\n       </div>\r\n-  \r\n-      <!-- Agency Table -->\r\n-      <div class=\"agence-display\">\r\n-        <div class=\"agence-table\">\r\n-          <table>\r\n-            <thead>\r\n-              <tr>\r\n-                <th>Nom</th>\r\n-                <th>Adresse</th>\r\n-                <th>Email</th>\r\n-                <th>Téléphone</th>\r\n\\ No newline at end of file\n-                <th>Date de Création</th>\r\n-                <th>Actions</th>\r\n-              </tr>\r\n-            </thead>\r\n-            <tbody>\r\n-                <tr *ngFor=\"let agency of filteredAgencies; let i = index\" \r\n-                [class.even]=\"i % 2 === 0\" \r\n-                [class.odd]=\"i % 2 !== 0\"\r\n-                (click)=\"showAgencyDetails(agency)\">\r\n-                <td>{{ agency.name }}</td>\r\n-                <td>{{ agency.address }}</td>\r\n-                <td>{{ agency.email }}</td>\r\n-                <td>{{ agency.phone }}</td>\r\n-                <td>{{ agency.createdAt | date:'dd/MM/yyyy' }}</td>\r\n-                <td class=\"actions\">\r\n-                    <button class=\"edit-btn\" (click)=\"editAgency(agency); $event.stopPropagation()\">\r\n-                      <i class=\"bi bi-pencil\"></i>\r\n-                    </button>\r\n-                    <button class=\"delete-btn\" (click)=\"deleteAgence(agency.id, agency.name); $event.stopPropagation()\">\r\n-                      <i class=\"bi bi-trash\"></i>\r\n-                    </button>\r\n-                  </td>\r\n-              </tr>\r\n-            </tbody>\r\n-          </table>\r\n-        </div>\r\n+    </mat-card-header>\r\n+\r\n+    <!-- Contenu de la carte -->\r\n+    <mat-card-content class=\"agency-card-content\">\r\n+      <!-- Indicateur de chargement -->\r\n+      <div *ngIf=\"isLoading\" class=\"loading-indicator\">\r\n+        <mat-spinner [diameter]=\"50\"></mat-spinner>\r\n+        <p>Chargement des agences...</p>\r\n       </div>\r\n-    </div>\r\n-  </div>\n+\r\n+      <!-- Message d'erreur -->\r\n+      <div *ngIf=\"!isLoading && errorMessage\" class=\"error-message\">\r\n+        <mat-icon color=\"warn\">error_outline</mat-icon>\r\n+        <span>{{ errorMessage }}</span>\r\n+        <button mat-button color=\"primary\" (click)=\"loadAgencies()\">Réessayer</button>\r\n+      </div>\r\n+\r\n+      <!-- Conteneur de la table -->\r\n+      <div class=\"table-container\" [hidden]=\"isLoading || errorMessage\">\r\n+        <table mat-table [dataSource]=\"dataSource\" class=\"data-table agency-table\" matSort> <!-- Optionnel: matSort -->\r\n+\r\n+          <!-- Colonne Nom -->\r\n+          <ng-container matColumnDef=\"name\">\r\n+            <th mat-header-cell *matHeaderCellDef mat-sort-header> Nom </th> <!-- Optionnel: mat-sort-header -->\r\n+            <td mat-cell *matCellDef=\"let agency\"> {{ agency.name }} </td>\r\n+          </ng-container>\r\n+\r\n+          <!-- Colonne Adresse -->\r\n+          <ng-container matColumnDef=\"address\">\r\n+            <th mat-header-cell *matHeaderCellDef> Adresse </th>\r\n+            <td mat-cell *matCellDef=\"let agency\"> {{ agency.address || 'N/A' }} </td>\r\n+          </ng-container>\r\n+\r\n+          <!-- Colonne Email -->\r\n+          <ng-container matColumnDef=\"email\">\r\n+            <th mat-header-cell *matHeaderCellDef> Email </th>\r\n+            <td mat-cell *matCellDef=\"let agency\"> {{ agency.email || 'N/A' }} </td>\r\n+          </ng-container>\r\n+\r\n+          <!-- Colonne Téléphone -->\r\n+          <ng-container matColumnDef=\"phone\">\r\n+            <th mat-header-cell *matHeaderCellDef> Téléphone </th>\r\n+            <td mat-cell *matCellDef=\"let agency\"> {{ agency.phone || 'N/A' }} </td>\r\n+          </ng-container>\r\n+\r\n+          <!-- Colonne Date de Création -->\r\n+          <ng-container matColumnDef=\"createdAt\">\r\n+            <th mat-header-cell *matHeaderCellDef mat-sort-header> Créé le </th> <!-- Optionnel: mat-sort-header -->\r\n+            <td mat-cell *matCellDef=\"let agency\"> {{ agency.createdAt | date:'dd/MM/yyyy HH:mm' }} </td>\r\n+          </ng-container>\r\n+\r\n+          <!-- Colonne Actions (avec style conservé) -->\r\n+          <ng-container matColumnDef=\"actions\">\r\n+            <th mat-header-cell *matHeaderCellDef class=\"actions-header\"> Actions </th>\r\n+            <!-- Ajout de la classe 'actions' pour cibler les styles spécifiques -->\r\n+            <td mat-cell *matCellDef=\"let agency\" class=\"actions actions-cell\">\r\n+              <!-- Bouton Modifier (style conservé) -->\r\n+              <button class=\"edit-btn\"\r\n+                      matTooltip=\"Modifier l'agence\"\r\n+                      (click)=\"editAgency(agency); $event.stopPropagation()\"\r\n+                      [disabled]=\"isLoading || !!activeModalRef\">\r\n+                 <i class=\"bi bi-pencil\"></i>\r\n+              </button>\r\n+              <!-- Bouton Supprimer (style conservé) -->\r\n+              <button class=\"delete-btn\"\r\n+                      matTooltip=\"Supprimer l'agence\"\r\n+                      (click)=\"deleteAgence(agency); $event.stopPropagation()\" <!-- Passe l'objet entier -->\r\n+                      [disabled]=\"isLoading || !!activeModalRef\">\r\n+                 <i class=\"bi bi-trash\"></i>\r\n+              </button>\r\n+            </td>\r\n+          </ng-container>\r\n+\r\n+          <!-- Définition des lignes -->\r\n+          <tr mat-header-row *matHeaderRowDef=\"displayedColumns; sticky: true\"></tr>\r\n+          <tr mat-row *matRowDef=\"let agency; columns: displayedColumns;\"\r\n+              (click)=\"showAgencyDetails(agency)\" class=\"data-row\"\r\n+              matRipple>\r\n+          </tr>\r\n+\r\n+          <!-- Ligne si aucune donnée -->\r\n+          <tr class=\"mat-row\" *matNoDataRow>\r\n+            <td class=\"mat-cell no-data-cell\" [attr.colspan]=\"displayedColumns.length\">\r\n+              {{ dataSource.filter ? 'Aucune agence trouvée pour \"' + dataSource.filter + '\".' : 'Aucune agence à afficher.' }}\r\n+            </td>\r\n+          </tr>\r\n+        </table>\r\n+      </div>\r\n+\r\n+      <!-- Optionnel: Pagination Material -->\r\n+      <!-- <mat-paginator [pageSizeOptions]=\"[10, 25, 50]\" showFirstLastButtons\r\n+                     aria-label=\"Sélectionner la page d'agences\">\r\n+      </mat-paginator> -->\r\n+\r\n+    </mat-card-content>\r\n+  </mat-card>\r\n+</div>\r\n"
                },
                {
                    "date": 1745617988595,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,9 +10,9 @@\n         <!-- Champ de recherche Material -->\r\n         <mat-form-field appearance=\"outline\" class=\"search-field\">\r\n           <mat-label>Rechercher</mat-label>\r\n           <input matInput\r\n-                 id=\"agencySearchInput\" <!-- ID Optionnel -->\r\n+                 id=\"agencySearchInput\" \r\n                  placeholder=\"Nom, adresse, email...\"\r\n                  [(ngModel)]=\"searchQuery\"\r\n                  (input)=\"applyFilter($event)\" <!-- Appel de applyFilter -->\r\n                  #searchInput>\r\n"
                },
                {
                    "date": 1745617997350,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,9 +13,9 @@\n           <input matInput\r\n                  id=\"agencySearchInput\" \r\n                  placeholder=\"Nom, adresse, email...\"\r\n                  [(ngModel)]=\"searchQuery\"\r\n-                 (input)=\"applyFilter($event)\" <!-- Appel de applyFilter -->\r\n+                 (input)=\"applyFilter($event)\" \r\n                  #searchInput>\r\n           <!-- Bouton pour effacer la recherche -->\r\n           <button mat-icon-button matSuffix *ngIf=\"searchQuery\" (click)=\"clearSearch()\" aria-label=\"Effacer la recherche\">\r\n             <mat-icon>close</mat-icon>\r\n"
                },
                {
                    "date": 1745618003881,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -94,9 +94,9 @@\n               </button>\r\n               <!-- Bouton Supprimer (style conservé) -->\r\n               <button class=\"delete-btn\"\r\n                       matTooltip=\"Supprimer l'agence\"\r\n-                      (click)=\"deleteAgence(agency); $event.stopPropagation()\" <!-- Passe l'objet entier -->\r\n+                      (click)=\"deleteAgence(agency); $event.stopPropagation()\" \r\n                       [disabled]=\"isLoading || !!activeModalRef\">\r\n                  <i class=\"bi bi-trash\"></i>\r\n               </button>\r\n             </td>\r\n"
                },
                {
                    "date": 1745618037415,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -94,9 +94,9 @@\n               </button>\r\n               <!-- Bouton Supprimer (style conservé) -->\r\n               <button class=\"delete-btn\"\r\n                       matTooltip=\"Supprimer l'agence\"\r\n-                      (click)=\"deleteAgence(agency); $event.stopPropagation()\" \r\n+                      (click)=\"deleteAgence(agency); $event.stopPropagation()\" <!-- Passe l'objet entier -->\r\n                       [disabled]=\"isLoading || !!activeModalRef\">\r\n                  <i class=\"bi bi-trash\"></i>\r\n               </button>\r\n             </td>\r\n"
                },
                {
                    "date": 1745618415741,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,38 +1,35 @@\n <div class=\"agence-container dashboard-container\"> <!-- Classes de base pour le style global -->\r\n   <app-header [title]=\"'Gestion des Agences'\"></app-header>\r\n \r\n+  <!-- Utiliser mat-card comme conteneur principal, mais garder l'ancien header à l'intérieur -->\r\n   <mat-card class=\"section-card agency-list-card\">\r\n \r\n-    <!-- En-tête de la carte -->\r\n-    <mat-card-header class=\"section-header agency-card-header\">\r\n-      <mat-card-title>Liste des Agences</mat-card-title>\r\n-      <div class=\"table-controls\">\r\n-        <!-- Champ de recherche Material -->\r\n-        <mat-form-field appearance=\"outline\" class=\"search-field\">\r\n-          <mat-label>Rechercher</mat-label>\r\n-          <input matInput\r\n-                 id=\"agencySearchInput\" \r\n-                 placeholder=\"Nom, adresse, email...\"\r\n+    <!-- **** ANCIEN HEADER CONSERVÉ (Recherche, Date, Bouton Ajouter) **** -->\r\n+    <div class=\"container-original-header\"> <!-- Conteneur pour isoler l'ancien header -->\r\n+      <div class=\"agence-header\">\r\n+        <!-- Search Bar (Style inchangé) -->\r\n+        <div class=\"input-container\">\r\n+          <i class=\"bi bi-search icon\"></i>\r\n+          <input type=\"text\" placeholder=\"Rechercher une agence...\"\r\n                  [(ngModel)]=\"searchQuery\"\r\n-                 (input)=\"applyFilter($event)\" \r\n-                 #searchInput>\r\n-          <!-- Bouton pour effacer la recherche -->\r\n-          <button mat-icon-button matSuffix *ngIf=\"searchQuery\" (click)=\"clearSearch()\" aria-label=\"Effacer la recherche\">\r\n-            <mat-icon>close</mat-icon>\r\n-          </button>\r\n-          <mat-icon matSuffix *ngIf=\"!searchQuery\">search</mat-icon>\r\n-        </mat-form-field>\r\n+                 (input)=\"filterAgencies()\" /> <!-- Appel de la méthode existante -->\r\n+        </div>\r\n \r\n-        <!-- Bouton d'ajout Material -->\r\n-        <button mat-flat-button color=\"primary\" class=\"add-button\" (click)=\"addAgency()\" [disabled]=\"isLoading || !!activeModalRef\">\r\n-          <mat-icon>add_business</mat-icon>\r\n-          <span>Nouvelle Agence</span>\r\n+        <!-- Date (Style inchangé) -->\r\n+        <div class=\"current-date\">\r\n+          {{ currentDate | date: 'dd/MM/yyyy' }}\r\n+        </div>\r\n+\r\n+        <!-- Add Agency Button (Style inchangé) -->\r\n+        <button class=\"add-agency btn btn-primary\" (click)=\"addAgency()\"> <!-- Appel de la méthode existante -->\r\n+          <i class=\"bi bi-plus\"></i> Nouvelle Agence\r\n         </button>\r\n       </div>\r\n-    </mat-card-header>\r\n+    </div>\r\n+    <!-- **** FIN DE L'ANCIEN HEADER **** -->\r\n \r\n-    <!-- Contenu de la carte -->\r\n+    <!-- Contenu de la carte pour la table Material -->\r\n     <mat-card-content class=\"agency-card-content\">\r\n       <!-- Indicateur de chargement -->\r\n       <div *ngIf=\"isLoading\" class=\"loading-indicator\">\r\n         <mat-spinner [diameter]=\"50\"></mat-spinner>\r\n@@ -45,15 +42,16 @@\n         <span>{{ errorMessage }}</span>\r\n         <button mat-button color=\"primary\" (click)=\"loadAgencies()\">Réessayer</button>\r\n       </div>\r\n \r\n-      <!-- Conteneur de la table -->\r\n+      <!-- Conteneur de la table Material -->\r\n       <div class=\"table-container\" [hidden]=\"isLoading || errorMessage\">\r\n-        <table mat-table [dataSource]=\"dataSource\" class=\"data-table agency-table\" matSort> <!-- Optionnel: matSort -->\r\n+        <!-- Utilisation de filteredAgencies directement comme source de données -->\r\n+        <table mat-table [dataSource]=\"filteredAgencies\" class=\"data-table agency-table\">\r\n \r\n           <!-- Colonne Nom -->\r\n           <ng-container matColumnDef=\"name\">\r\n-            <th mat-header-cell *matHeaderCellDef mat-sort-header> Nom </th> <!-- Optionnel: mat-sort-header -->\r\n+            <th mat-header-cell *matHeaderCellDef> Nom </th>\r\n             <td mat-cell *matCellDef=\"let agency\"> {{ agency.name }} </td>\r\n           </ng-container>\r\n \r\n           <!-- Colonne Adresse -->\r\n@@ -75,9 +73,9 @@\n           </ng-container>\r\n \r\n           <!-- Colonne Date de Création -->\r\n           <ng-container matColumnDef=\"createdAt\">\r\n-            <th mat-header-cell *matHeaderCellDef mat-sort-header> Créé le </th> <!-- Optionnel: mat-sort-header -->\r\n+            <th mat-header-cell *matHeaderCellDef> Créé le </th>\r\n             <td mat-cell *matCellDef=\"let agency\"> {{ agency.createdAt | date:'dd/MM/yyyy HH:mm' }} </td>\r\n           </ng-container>\r\n \r\n           <!-- Colonne Actions (avec style conservé) -->\r\n@@ -87,42 +85,39 @@\n             <td mat-cell *matCellDef=\"let agency\" class=\"actions actions-cell\">\r\n               <!-- Bouton Modifier (style conservé) -->\r\n               <button class=\"edit-btn\"\r\n                       matTooltip=\"Modifier l'agence\"\r\n-                      (click)=\"editAgency(agency); $event.stopPropagation()\"\r\n-                      [disabled]=\"isLoading || !!activeModalRef\">\r\n+                      (click)=\"editAgency(agency); $event.stopPropagation()\"> <!-- Appel méthode existante -->\r\n                  <i class=\"bi bi-pencil\"></i>\r\n               </button>\r\n               <!-- Bouton Supprimer (style conservé) -->\r\n               <button class=\"delete-btn\"\r\n                       matTooltip=\"Supprimer l'agence\"\r\n-                      (click)=\"deleteAgence(agency); $event.stopPropagation()\" <!-- Passe l'objet entier -->\r\n-                      [disabled]=\"isLoading || !!activeModalRef\">\r\n+                      (click)=\"deleteAgence(agency._id, agency.name); $event.stopPropagation()\"> <!-- Appel méthode existante, utilise _id si c'est l'identifiant -->\r\n                  <i class=\"bi bi-trash\"></i>\r\n               </button>\r\n             </td>\r\n           </ng-container>\r\n \r\n           <!-- Définition des lignes -->\r\n-          <tr mat-header-row *matHeaderRowDef=\"displayedColumns; sticky: true\"></tr>\r\n-          <tr mat-row *matRowDef=\"let agency; columns: displayedColumns;\"\r\n-              (click)=\"showAgencyDetails(agency)\" class=\"data-row\"\r\n+          <!-- Assurez-vous que 'displayedColumns' est défini dans le TS (même si les méthodes ne changent pas) -->\r\n+          <tr mat-header-row *matHeaderRowDef=\"['name', 'address', 'email', 'phone', 'createdAt', 'actions']; sticky: true\"></tr>\r\n+          <tr mat-row *matRowDef=\"let agency; columns: ['name', 'address', 'email', 'phone', 'createdAt', 'actions'];\"\r\n+              (click)=\"showAgencyDetails(agency)\" class=\"data-row\" <!-- Appel méthode existante -->\r\n               matRipple>\r\n           </tr>\r\n \r\n           <!-- Ligne si aucune donnée -->\r\n           <tr class=\"mat-row\" *matNoDataRow>\r\n-            <td class=\"mat-cell no-data-cell\" [attr.colspan]=\"displayedColumns.length\">\r\n-              {{ dataSource.filter ? 'Aucune agence trouvée pour \"' + dataSource.filter + '\".' : 'Aucune agence à afficher.' }}\r\n+            <td class=\"mat-cell no-data-cell\" [attr.colspan]=\"6\"> <!-- Colspan = nombre de colonnes -->\r\n+              {{ searchQuery ? 'Aucune agence trouvée pour \"' + searchQuery + '\".' : 'Aucune agence à afficher.' }}\r\n             </td>\r\n           </tr>\r\n         </table>\r\n       </div>\r\n \r\n-      <!-- Optionnel: Pagination Material -->\r\n-      <!-- <mat-paginator [pageSizeOptions]=\"[10, 25, 50]\" showFirstLastButtons\r\n-                     aria-label=\"Sélectionner la page d'agences\">\r\n-      </mat-paginator> -->\r\n+      <!-- Optionnel: Pagination Material (nécessiterait MatTableDataSource et des modifs TS) -->\r\n+      <!-- <mat-paginator ...></mat-paginator> -->\r\n \r\n     </mat-card-content>\r\n   </mat-card>\r\n </div>\r\n"
                },
                {
                    "date": 1745618423556,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -101,9 +101,9 @@\n           <!-- Définition des lignes -->\r\n           <!-- Assurez-vous que 'displayedColumns' est défini dans le TS (même si les méthodes ne changent pas) -->\r\n           <tr mat-header-row *matHeaderRowDef=\"['name', 'address', 'email', 'phone', 'createdAt', 'actions']; sticky: true\"></tr>\r\n           <tr mat-row *matRowDef=\"let agency; columns: ['name', 'address', 'email', 'phone', 'createdAt', 'actions'];\"\r\n-              (click)=\"showAgencyDetails(agency)\" class=\"data-row\" <!-- Appel méthode existante -->\r\n+              (click)=\"showAgencyDetails(agency)\" class=\"data-row\" \r\n               matRipple>\r\n           </tr>\r\n \r\n           <!-- Ligne si aucune donnée -->\r\n"
                },
                {
                    "date": 1745618461291,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,123 +1,62 @@\n-<div class=\"agence-container dashboard-container\"> <!-- Classes de base pour le style global -->\r\n-  <app-header [title]=\"'Gestion des Agences'\"></app-header>\r\n-\r\n-  <!-- Utiliser mat-card comme conteneur principal, mais garder l'ancien header à l'intérieur -->\r\n-  <mat-card class=\"section-card agency-list-card\">\r\n-\r\n-    <!-- **** ANCIEN HEADER CONSERVÉ (Recherche, Date, Bouton Ajouter) **** -->\r\n-    <div class=\"container-original-header\"> <!-- Conteneur pour isoler l'ancien header -->\r\n+<div class=\"agence-container\">\r\n+    <app-header [title]=\"'Liste des Agences'\"></app-header>\r\n+  \r\n+    <div class=\"container\">\r\n+      <!-- Row 1: Search Bar, Current Date, and Add Button -->\r\n       <div class=\"agence-header\">\r\n-        <!-- Search Bar (Style inchangé) -->\r\n+        <!-- Search Bar -->\r\n         <div class=\"input-container\">\r\n           <i class=\"bi bi-search icon\"></i>\r\n-          <input type=\"text\" placeholder=\"Rechercher une agence...\"\r\n-                 [(ngModel)]=\"searchQuery\"\r\n-                 (input)=\"filterAgencies()\" /> <!-- Appel de la méthode existante -->\r\n+          <input type=\"text\" placeholder=\"Rechercher une agence...\" [(ngModel)]=\"searchQuery\" (input)=\"filterAgencies()\" />\r\n         </div>\r\n-\r\n-        <!-- Date (Style inchangé) -->\r\n+  \r\n+        <!-- Date -->\r\n         <div class=\"current-date\">\r\n           {{ currentDate | date: 'dd/MM/yyyy' }}\r\n         </div>\r\n-\r\n-        <!-- Add Agency Button (Style inchangé) -->\r\n-        <button class=\"add-agency btn btn-primary\" (click)=\"addAgency()\"> <!-- Appel de la méthode existante -->\r\n+  \r\n+        <!-- Add Agency Button -->\r\n+        <button class=\"add-agency btn btn-primary\" (click)=\"addAgency()\">\r\n           <i class=\"bi bi-plus\"></i> Nouvelle Agence\r\n         </button>\r\n       </div>\r\n+  \r\n+      <!-- Agency Table -->\r\n+      <div class=\"agence-display\">\r\n+        <div class=\"agence-table\">\r\n+          <table>\r\n+            <thead>\r\n+              <tr>\r\n+                <th>Nom</th>\r\n+                <th>Adresse</th>\r\n+                <th>Email</th>\r\n+                <th>Téléphone</th>\r\n+                <th>Date de Création</th>\r\n+                <th>Actions</th>\r\n+              </tr>\r\n+            </thead>\r\n+            <tbody>\r\n+                <tr *ngFor=\"let agency of filteredAgencies; let i = index\" \r\n+                [class.even]=\"i % 2 === 0\" \r\n+                [class.odd]=\"i % 2 !== 0\"\r\n+                (click)=\"showAgencyDetails(agency)\">\r\n+                <td>{{ agency.name }}</td>\r\n+                <td>{{ agency.address }}</td>\r\n+                <td>{{ agency.email }}</td>\r\n+                <td>{{ agency.phone }}</td>\r\n+                <td>{{ agency.createdAt | date:'dd/MM/yyyy' }}</td>\r\n+                <td class=\"actions\">\r\n+                    <button class=\"edit-btn\" (click)=\"editAgency(agency); $event.stopPropagation()\">\r\n+                      <i class=\"bi bi-pencil\"></i>\r\n+                    </button>\r\n+                    <button class=\"delete-btn\" (click)=\"deleteAgence(agency.id, agency.name); $event.stopPropagation()\">\r\n+                      <i class=\"bi bi-trash\"></i>\r\n+                    </button>\r\n+                  </td>\r\n+              </tr>\r\n+            </tbody>\r\n+          </table>\r\n+        </div>\r\n+      </div>\r\n     </div>\r\n-    <!-- **** FIN DE L'ANCIEN HEADER **** -->\r\n-\r\n-    <!-- Contenu de la carte pour la table Material -->\r\n-    <mat-card-content class=\"agency-card-content\">\r\n-      <!-- Indicateur de chargement -->\r\n-      <div *ngIf=\"isLoading\" class=\"loading-indicator\">\r\n-        <mat-spinner [diameter]=\"50\"></mat-spinner>\r\n-        <p>Chargement des agences...</p>\r\n-      </div>\r\n-\r\n-      <!-- Message d'erreur -->\r\n-      <div *ngIf=\"!isLoading && errorMessage\" class=\"error-message\">\r\n-        <mat-icon color=\"warn\">error_outline</mat-icon>\r\n-        <span>{{ errorMessage }}</span>\r\n-        <button mat-button color=\"primary\" (click)=\"loadAgencies()\">Réessayer</button>\r\n-      </div>\r\n-\r\n-      <!-- Conteneur de la table Material -->\r\n-      <div class=\"table-container\" [hidden]=\"isLoading || errorMessage\">\r\n-        <!-- Utilisation de filteredAgencies directement comme source de données -->\r\n-        <table mat-table [dataSource]=\"filteredAgencies\" class=\"data-table agency-table\">\r\n-\r\n-          <!-- Colonne Nom -->\r\n-          <ng-container matColumnDef=\"name\">\r\n-            <th mat-header-cell *matHeaderCellDef> Nom </th>\r\n-            <td mat-cell *matCellDef=\"let agency\"> {{ agency.name }} </td>\r\n-          </ng-container>\r\n-\r\n-          <!-- Colonne Adresse -->\r\n-          <ng-container matColumnDef=\"address\">\r\n-            <th mat-header-cell *matHeaderCellDef> Adresse </th>\r\n-            <td mat-cell *matCellDef=\"let agency\"> {{ agency.address || 'N/A' }} </td>\r\n-          </ng-container>\r\n-\r\n-          <!-- Colonne Email -->\r\n-          <ng-container matColumnDef=\"email\">\r\n-            <th mat-header-cell *matHeaderCellDef> Email </th>\r\n-            <td mat-cell *matCellDef=\"let agency\"> {{ agency.email || 'N/A' }} </td>\r\n-          </ng-container>\r\n-\r\n-          <!-- Colonne Téléphone -->\r\n-          <ng-container matColumnDef=\"phone\">\r\n-            <th mat-header-cell *matHeaderCellDef> Téléphone </th>\r\n-            <td mat-cell *matCellDef=\"let agency\"> {{ agency.phone || 'N/A' }} </td>\r\n-          </ng-container>\r\n-\r\n-          <!-- Colonne Date de Création -->\r\n-          <ng-container matColumnDef=\"createdAt\">\r\n-            <th mat-header-cell *matHeaderCellDef> Créé le </th>\r\n-            <td mat-cell *matCellDef=\"let agency\"> {{ agency.createdAt | date:'dd/MM/yyyy HH:mm' }} </td>\r\n-          </ng-container>\r\n-\r\n-          <!-- Colonne Actions (avec style conservé) -->\r\n-          <ng-container matColumnDef=\"actions\">\r\n-            <th mat-header-cell *matHeaderCellDef class=\"actions-header\"> Actions </th>\r\n-            <!-- Ajout de la classe 'actions' pour cibler les styles spécifiques -->\r\n-            <td mat-cell *matCellDef=\"let agency\" class=\"actions actions-cell\">\r\n-              <!-- Bouton Modifier (style conservé) -->\r\n-              <button class=\"edit-btn\"\r\n-                      matTooltip=\"Modifier l'agence\"\r\n-                      (click)=\"editAgency(agency); $event.stopPropagation()\"> <!-- Appel méthode existante -->\r\n-                 <i class=\"bi bi-pencil\"></i>\r\n-              </button>\r\n-              <!-- Bouton Supprimer (style conservé) -->\r\n-              <button class=\"delete-btn\"\r\n-                      matTooltip=\"Supprimer l'agence\"\r\n-                      (click)=\"deleteAgence(agency._id, agency.name); $event.stopPropagation()\"> <!-- Appel méthode existante, utilise _id si c'est l'identifiant -->\r\n-                 <i class=\"bi bi-trash\"></i>\r\n-              </button>\r\n-            </td>\r\n-          </ng-container>\r\n-\r\n-          <!-- Définition des lignes -->\r\n-          <!-- Assurez-vous que 'displayedColumns' est défini dans le TS (même si les méthodes ne changent pas) -->\r\n-          <tr mat-header-row *matHeaderRowDef=\"['name', 'address', 'email', 'phone', 'createdAt', 'actions']; sticky: true\"></tr>\r\n-          <tr mat-row *matRowDef=\"let agency; columns: ['name', 'address', 'email', 'phone', 'createdAt', 'actions'];\"\r\n-              (click)=\"showAgencyDetails(agency)\" class=\"data-row\" \r\n-              matRipple>\r\n-          </tr>\r\n-\r\n-          <!-- Ligne si aucune donnée -->\r\n-          <tr class=\"mat-row\" *matNoDataRow>\r\n-            <td class=\"mat-cell no-data-cell\" [attr.colspan]=\"6\"> <!-- Colspan = nombre de colonnes -->\r\n-              {{ searchQuery ? 'Aucune agence trouvée pour \"' + searchQuery + '\".' : 'Aucune agence à afficher.' }}\r\n-            </td>\r\n-          </tr>\r\n-        </table>\r\n-      </div>\r\n-\r\n-      <!-- Optionnel: Pagination Material (nécessiterait MatTableDataSource et des modifs TS) -->\r\n-      <!-- <mat-paginator ...></mat-paginator> -->\r\n-\r\n-    </mat-card-content>\r\n-  </mat-card>\r\n-</div>\r\n+  </div>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1745618472761,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,62 +1,123 @@\n-<div class=\"agence-container\">\r\n-    <app-header [title]=\"'Liste des Agences'\"></app-header>\r\n-  \r\n-    <div class=\"container\">\r\n-      <!-- Row 1: Search Bar, Current Date, and Add Button -->\r\n+<div class=\"agence-container dashboard-container\"> <!-- Classes de base pour le style global -->\r\n+  <app-header [title]=\"'Gestion des Agences'\"></app-header>\r\n+\r\n+  <!-- Utiliser mat-card comme conteneur principal, mais garder l'ancien header à l'intérieur -->\r\n+  <mat-card class=\"section-card agency-list-card\">\r\n+\r\n+    <!-- **** ANCIEN HEADER CONSERVÉ (Recherche, Date, Bouton Ajouter) **** -->\r\n+    <div class=\"container-original-header\"> <!-- Conteneur pour isoler l'ancien header -->\r\n       <div class=\"agence-header\">\r\n-        <!-- Search Bar -->\r\n+        <!-- Search Bar (Style inchangé) -->\r\n         <div class=\"input-container\">\r\n           <i class=\"bi bi-search icon\"></i>\r\n-          <input type=\"text\" placeholder=\"Rechercher une agence...\" [(ngModel)]=\"searchQuery\" (input)=\"filterAgencies()\" />\r\n+          <input type=\"text\" placeholder=\"Rechercher une agence...\"\r\n+                 [(ngModel)]=\"searchQuery\"\r\n+                 (input)=\"filterAgencies()\" /> <!-- Appel de la méthode existante -->\r\n         </div>\r\n-  \r\n-        <!-- Date -->\r\n+\r\n+        <!-- Date (Style inchangé) -->\r\n         <div class=\"current-date\">\r\n           {{ currentDate | date: 'dd/MM/yyyy' }}\r\n         </div>\r\n-  \r\n-        <!-- Add Agency Button -->\r\n-        <button class=\"add-agency btn btn-primary\" (click)=\"addAgency()\">\r\n+\r\n+        <!-- Add Agency Button (Style inchangé) -->\r\n+        <button class=\"add-agency btn btn-primary\" (click)=\"addAgency()\"> <!-- Appel de la méthode existante -->\r\n           <i class=\"bi bi-plus\"></i> Nouvelle Agence\r\n         </button>\r\n       </div>\r\n-  \r\n-      <!-- Agency Table -->\r\n-      <div class=\"agence-display\">\r\n-        <div class=\"agence-table\">\r\n-          <table>\r\n-            <thead>\r\n-              <tr>\r\n-                <th>Nom</th>\r\n-                <th>Adresse</th>\r\n-                <th>Email</th>\r\n-                <th>Téléphone</th>\r\n-                <th>Date de Création</th>\r\n-                <th>Actions</th>\r\n-              </tr>\r\n-            </thead>\r\n-            <tbody>\r\n-                <tr *ngFor=\"let agency of filteredAgencies; let i = index\" \r\n-                [class.even]=\"i % 2 === 0\" \r\n-                [class.odd]=\"i % 2 !== 0\"\r\n-                (click)=\"showAgencyDetails(agency)\">\r\n-                <td>{{ agency.name }}</td>\r\n-                <td>{{ agency.address }}</td>\r\n-                <td>{{ agency.email }}</td>\r\n\\ No newline at end of file\n-                <td>{{ agency.phone }}</td>\r\n-                <td>{{ agency.createdAt | date:'dd/MM/yyyy' }}</td>\r\n-                <td class=\"actions\">\r\n-                    <button class=\"edit-btn\" (click)=\"editAgency(agency); $event.stopPropagation()\">\r\n-                      <i class=\"bi bi-pencil\"></i>\r\n-                    </button>\r\n-                    <button class=\"delete-btn\" (click)=\"deleteAgence(agency.id, agency.name); $event.stopPropagation()\">\r\n-                      <i class=\"bi bi-trash\"></i>\r\n-                    </button>\r\n-                  </td>\r\n-              </tr>\r\n-            </tbody>\r\n-          </table>\r\n-        </div>\r\n+    </div>\r\n+    <!-- **** FIN DE L'ANCIEN HEADER **** -->\r\n+\r\n+    <!-- Contenu de la carte pour la table Material -->\r\n+    <mat-card-content class=\"agency-card-content\">\r\n+      <!-- Indicateur de chargement -->\r\n+      <div *ngIf=\"isLoading\" class=\"loading-indicator\">\r\n+        <mat-spinner [diameter]=\"50\"></mat-spinner>\r\n+        <p>Chargement des agences...</p>\r\n       </div>\r\n-    </div>\r\n-  </div>\n+\r\n+      <!-- Message d'erreur -->\r\n+      <div *ngIf=\"!isLoading && errorMessage\" class=\"error-message\">\r\n+        <mat-icon color=\"warn\">error_outline</mat-icon>\r\n+        <span>{{ errorMessage }}</span>\r\n+        <button mat-button color=\"primary\" (click)=\"loadAgencies()\">Réessayer</button>\r\n+      </div>\r\n+\r\n+      <!-- Conteneur de la table Material -->\r\n+      <div class=\"table-container\" [hidden]=\"isLoading || errorMessage\">\r\n+        <!-- Utilisation de filteredAgencies directement comme source de données -->\r\n+        <table mat-table [dataSource]=\"filteredAgencies\" class=\"data-table agency-table\">\r\n+\r\n+          <!-- Colonne Nom -->\r\n+          <ng-container matColumnDef=\"name\">\r\n+            <th mat-header-cell *matHeaderCellDef> Nom </th>\r\n+            <td mat-cell *matCellDef=\"let agency\"> {{ agency.name }} </td>\r\n+          </ng-container>\r\n+\r\n+          <!-- Colonne Adresse -->\r\n+          <ng-container matColumnDef=\"address\">\r\n+            <th mat-header-cell *matHeaderCellDef> Adresse </th>\r\n+            <td mat-cell *matCellDef=\"let agency\"> {{ agency.address || 'N/A' }} </td>\r\n+          </ng-container>\r\n+\r\n+          <!-- Colonne Email -->\r\n+          <ng-container matColumnDef=\"email\">\r\n+            <th mat-header-cell *matHeaderCellDef> Email </th>\r\n+            <td mat-cell *matCellDef=\"let agency\"> {{ agency.email || 'N/A' }} </td>\r\n+          </ng-container>\r\n+\r\n+          <!-- Colonne Téléphone -->\r\n+          <ng-container matColumnDef=\"phone\">\r\n+            <th mat-header-cell *matHeaderCellDef> Téléphone </th>\r\n+            <td mat-cell *matCellDef=\"let agency\"> {{ agency.phone || 'N/A' }} </td>\r\n+          </ng-container>\r\n+\r\n+          <!-- Colonne Date de Création -->\r\n+          <ng-container matColumnDef=\"createdAt\">\r\n+            <th mat-header-cell *matHeaderCellDef> Créé le </th>\r\n+            <td mat-cell *matCellDef=\"let agency\"> {{ agency.createdAt | date:'dd/MM/yyyy HH:mm' }} </td>\r\n+          </ng-container>\r\n+\r\n+          <!-- Colonne Actions (avec style conservé) -->\r\n+          <ng-container matColumnDef=\"actions\">\r\n+            <th mat-header-cell *matHeaderCellDef class=\"actions-header\"> Actions </th>\r\n+            <!-- Ajout de la classe 'actions' pour cibler les styles spécifiques -->\r\n+            <td mat-cell *matCellDef=\"let agency\" class=\"actions actions-cell\">\r\n+              <!-- Bouton Modifier (style conservé) -->\r\n+              <button class=\"edit-btn\"\r\n+                      matTooltip=\"Modifier l'agence\"\r\n+                      (click)=\"editAgency(agency); $event.stopPropagation()\"> <!-- Appel méthode existante -->\r\n+                 <i class=\"bi bi-pencil\"></i>\r\n+              </button>\r\n+              <!-- Bouton Supprimer (style conservé) -->\r\n+              <button class=\"delete-btn\"\r\n+                      matTooltip=\"Supprimer l'agence\"\r\n+                      (click)=\"deleteAgence(agency._id, agency.name); $event.stopPropagation()\"> <!-- Appel méthode existante, utilise _id si c'est l'identifiant -->\r\n+                 <i class=\"bi bi-trash\"></i>\r\n+              </button>\r\n+            </td>\r\n+          </ng-container>\r\n+\r\n+          <!-- Définition des lignes -->\r\n+          <!-- Assurez-vous que 'displayedColumns' est défini dans le TS (même si les méthodes ne changent pas) -->\r\n+          <tr mat-header-row *matHeaderRowDef=\"['name', 'address', 'email', 'phone', 'createdAt', 'actions']; sticky: true\"></tr>\r\n+          <tr mat-row *matRowDef=\"let agency; columns: ['name', 'address', 'email', 'phone', 'createdAt', 'actions'];\"\r\n+              (click)=\"showAgencyDetails(agency)\" class=\"data-row\" <!-- Appel méthode existante -->\r\n+              matRipple>\r\n+          </tr>\r\n+\r\n+          <!-- Ligne si aucune donnée -->\r\n+          <tr class=\"mat-row\" *matNoDataRow>\r\n+            <td class=\"mat-cell no-data-cell\" [attr.colspan]=\"6\"> <!-- Colspan = nombre de colonnes -->\r\n+              {{ searchQuery ? 'Aucune agence trouvée pour \"' + searchQuery + '\".' : 'Aucune agence à afficher.' }}\r\n+            </td>\r\n+          </tr>\r\n+        </table>\r\n+      </div>\r\n+\r\n+      <!-- Optionnel: Pagination Material (nécessiterait MatTableDataSource et des modifs TS) -->\r\n+      <!-- <mat-paginator ...></mat-paginator> -->\r\n+\r\n+    </mat-card-content>\r\n+  </mat-card>\r\n+</div>\r\n"
                }
            ],
            "date": 1744021062768,
            "name": "Commit-0",
            "content": "<div class=\"agence-container\">\r\n    <app-header [title]=\"'Liste des Agences'\"></app-header>\r\n  \r\n    <div class=\"container\">\r\n      <!-- Row 1: Search Bar, Current Date, and Add Button -->\r\n      <div class=\"agence-header\">\r\n        <!-- Search Bar -->\r\n        <div class=\"input-container\">\r\n          <i class=\"bi bi-search icon\"></i>\r\n          <input type=\"text\" placeholder=\"Rechercher une agence...\" [(ngModel)]=\"searchQuery\" (input)=\"filterAgencies()\" />\r\n        </div>\r\n  \r\n        <!-- Date -->\r\n        <div class=\"current-date\">\r\n          {{ currentDate | date: 'dd/MM/yyyy' }}\r\n        </div>\r\n  \r\n        <!-- Add Agency Button -->\r\n        <button mat-button class=\"add-agency\" (click)=\"addAgency()\">\r\n          <i class=\"bi bi-plus\"></i> Nouvelle Agence\r\n        </button>\r\n      </div>\r\n  \r\n      <!-- Agency Table -->\r\n      <div class=\"agence-display\">\r\n        <div class=\"agence-table\">\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th>Nom</th>\r\n                <th>Adresse</th>\r\n                <th>Email</th>\r\n                <th>Téléphone</th>\r\n                <th>Date de Création</th>\r\n                <th>Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr *ngFor=\"let agency of filteredAgencies; let i = index\" [class.even]=\"i % 2 === 0\" [class.odd]=\"i % 2 !== 0\">\r\n                <td>{{ agency.name }}</td>\r\n                <td>{{ agency.address }}</td>\r\n                <td>{{ agency.email }}</td>\r\n                <td>{{ agency.phone }}</td>\r\n                <td>{{ agency.createdAt | date:'dd/MM/yyyy' }}</td>\r\n                <td class=\"actions\">\r\n                  <button class=\"edit-btn\" (click)=\"editAgency(agency)\"><i class=\"bi bi-pencil\"></i></button>\r\n                  <button class=\"delete-btn\" (click)=\"deleteAgency(agency)\"><i class=\"bi bi-trash\"></i></button>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>"
        }
    ]
}
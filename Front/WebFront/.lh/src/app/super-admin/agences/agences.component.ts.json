{
    "sourceFile": "src/app/super-admin/agences/agences.component.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 31,
            "patches": [
                {
                    "date": 1744021095038,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1744024263282,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,9 +12,8 @@\n   filteredAgencies: any[] = [];\r\n \r\n   constructor() { \r\n     this.currentDate = new Date().toLocaleDateString();\r\n-    // Sample data\r\n     this.agencies = [\r\n       {\r\n         _id: '1',\r\n         name: 'Agence Principale',\r\n"
                },
                {
                    "date": 1744024277400,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n   selector: 'app-agences',\r\n   templateUrl: './agences.component.html',\r\n   styleUrl: './agences.component.scss'\r\n })\r\n-export class AgencesComponent {\r\n+export class AgencesComponent implements OnInit{\r\n   currentDate: string;\r\n   searchQuery: string = '';\r\n   agencies: any[] = [];\r\n   filteredAgencies: any[] = [];\r\n"
                },
                {
                    "date": 1744024298045,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,5 @@\n-import { Component } from '@angular/core';\r\n+import { Component, OnInit } from '@angular/core';\r\n \r\n @Component({\r\n   selector: 'app-agences',\r\n   templateUrl: './agences.component.html',\r\n@@ -12,34 +12,9 @@\n   filteredAgencies: any[] = [];\r\n \r\n   constructor() { \r\n     this.currentDate = new Date().toLocaleDateString();\r\n-    this.agencies = [\r\n-      {\r\n-        _id: '1',\r\n-        name: 'Agence Principale',\r\n-        address: '123 Rue Principale, Ville',\r\n-        email: 'contact@agence1.com',\r\n-        phone: '0123456789',\r\n-        createdAt: new Date('2023-01-15')\r\n-      },\r\n-      {\r\n-        _id: '2',\r\n-        name: 'Agence Secondaire',\r\n-        address: '456 Avenue Centrale, Ville',\r\n-        email: 'contact@agence2.com',\r\n-        phone: '0987654321',\r\n-        createdAt: new Date('2023-03-20')\r\n-      },\r\n-      {\r\n-        _id: '3',\r\n-        name: 'Agence Régionale',\r\n-        address: '789 Boulevard Régional, Ville',\r\n-        email: 'contact@agence3.com',\r\n-        phone: '0567891234',\r\n-        createdAt: new Date('2023-05-10')\r\n-      }\r\n-    ];\r\n+    this.agencies = \r\n   }\r\n \r\n   ngOnInit(): void {\r\n     this.filteredAgencies = [...this.agencies];\r\n"
                },
                {
                    "date": 1744024309313,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,14 +7,39 @@\n })\r\n export class AgencesComponent implements OnInit{\r\n   currentDate: string;\r\n   searchQuery: string = '';\r\n-  agencies: any[] = [];\r\n+  agencies: any[] = [\r\n+    {\r\n+      _id: '1',\r\n+      name: 'Agence Principale',\r\n+      address: '123 Rue Principale, Ville',\r\n+      email: 'contact@agence1.com',\r\n+      phone: '0123456789',\r\n+      createdAt: new Date('2023-01-15')\r\n+    },\r\n+    {\r\n+      _id: '2',\r\n+      name: 'Agence Secondaire',\r\n+      address: '456 Avenue Centrale, Ville',\r\n+      email: 'contact@agence2.com',\r\n+      phone: '0987654321',\r\n+      createdAt: new Date('2023-03-20')\r\n+    },\r\n+    {\r\n+      _id: '3',\r\n+      name: 'Agence Régionale',\r\n+      address: '789 Boulevard Régional, Ville',\r\n+      email: 'contact@agence3.com',\r\n+      phone: '0567891234',\r\n+      createdAt: new Date('2023-05-10')\r\n+    }\r\n+  ];\r\n   filteredAgencies: any[] = [];\r\n \r\n   constructor() { \r\n     this.currentDate = new Date().toLocaleDateString();\r\n-    this.agencies = \r\n+   \r\n   }\r\n \r\n   ngOnInit(): void {\r\n     this.filteredAgencies = [...this.agencies];\r\n"
                },
                {
                    "date": 1744024324764,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -35,9 +35,9 @@\n     }\r\n   ];\r\n   filteredAgencies: any[] = [];\r\n \r\n-  constructor() { \r\n+  constructor(public dialog: MatDialog) { \r\n     this.currentDate = new Date().toLocaleDateString();\r\n    \r\n   }\r\n \r\n"
                },
                {
                    "date": 1744024346126,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,6 @@\n import { Component, OnInit } from '@angular/core';\r\n+import { MatDialog } from '@angular/material/dialog';\r\n \r\n @Component({\r\n   selector: 'app-agences',\r\n   templateUrl: './agences.component.html',\r\n@@ -57,12 +58,23 @@\n       agency.phone.toLowerCase().includes(this.searchQuery.toLowerCase())\r\n     );\r\n   }\r\n \r\n-  addAgency(): void {\r\n-    // Logic to add new agency\r\n-    alert('Ajouter une nouvelle agence');\r\n-    // In a real app, you would open a modal or navigate to a form\r\n+  addAgency() {\r\n+    const dialogRef = this.dialog.open(AgenceFormComponent, {\r\n+      width: '500px',\r\n+      data: { isEdit: false }\r\n+    });\r\n+\r\n+    dialogRef.afterClosed().subscribe(result => {\r\n+      if (result) {\r\n+        this.agencies.push({\r\n+          ...result,\r\n+          _id: Date.now().toString(),\r\n+          createdAt: new Date()\r\n+        });\r\n+      }\r\n+    });\r\n   }\r\n \r\n   editAgency(agency: any): void {\r\n     // Logic to edit agency\r\n"
                },
                {
                    "date": 1744024363066,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,7 @@\n import { Component, OnInit } from '@angular/core';\r\n import { MatDialog } from '@angular/material/dialog';\r\n+import { AgenceFormComponent } from '../agence-form/agence-form.component';\r\n \r\n @Component({\r\n   selector: 'app-agences',\r\n   templateUrl: './agences.component.html',\r\n@@ -75,13 +76,22 @@\n       }\r\n     });\r\n   }\r\n \r\n-  editAgency(agency: any): void {\r\n-    // Logic to edit agency\r\n-    alert(`Modifier l'agence: ${agency.name}`);\r\n-    // Prevent event bubbling to row click\r\n-    event?.stopPropagation();\r\n+  editAgency(agency: any) {\r\n+    const dialogRef = this.dialog.open(AgenceFormComponent, {\r\n+      width: '500px',\r\n+      data: { isEdit: true, agency }\r\n+    });\r\n+\r\n+    dialogRef.afterClosed().subscribe(result => {\r\n+      if (result) {\r\n+        const index = this.agencies.findIndex(a => a._id === agency._id);\r\n+        if (index !== -1) {\r\n+          this.agencies[index] = { ...this.agencies[index], ...result };\r\n+        }\r\n+      }\r\n+    });\r\n   }\r\n \r\n   deleteAgency(agency: any): void {\r\n     // Logic to delete agency\r\n"
                },
                {
                    "date": 1744024378878,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -91,9 +91,13 @@\n         }\r\n       }\r\n     });\r\n   }\r\n-\r\n+  deleteAgency(agency: any) {\r\n+    if (confirm(`Supprimer ${agency.name} ?`)) {\r\n+      this.agencies = this.agencies.filter(a => a._id !== agency._id);\r\n+    }\r\n+  }\r\n   deleteAgency(agency: any): void {\r\n     // Logic to delete agency\r\n     if (confirm(`Êtes-vous sûr de vouloir supprimer l'agence ${agency.name}?`)) {\r\n       this.agencies = this.agencies.filter(a => a._id !== agency._id);\r\n"
                },
                {
                    "date": 1744024385810,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -92,15 +92,15 @@\n       }\r\n     });\r\n   }\r\n   deleteAgency(agency: any) {\r\n-    if (confirm(`Supprimer ${agency.name} ?`)) {\r\n+    if (confirm(`Êtes-vous sûr de vouloir supprimer l'agence ${agency.name} ?`)) {\r\n       this.agencies = this.agencies.filter(a => a._id !== agency._id);\r\n     }\r\n   }\r\n   deleteAgency(agency: any): void {\r\n     // Logic to delete agency\r\n-    if (confirm(`Êtes-vous sûr de vouloir supprimer l'agence ${agency.name}?`)) {\r\n+    if (confirm(` ${agency.name}?`)) {\r\n       this.agencies = this.agencies.filter(a => a._id !== agency._id);\r\n       this.filterAgencies();\r\n     }\r\n     // Prevent event bubbling to row click\r\n"
                },
                {
                    "date": 1744026208111,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -37,9 +37,9 @@\n     }\r\n   ];\r\n   filteredAgencies: any[] = [];\r\n \r\n-  constructor(public dialog: MatDialog) { \r\n+  constructor(public dialog: MatDialog,private modalService: NgbModal) { \r\n     this.currentDate = new Date().toLocaleDateString();\r\n    \r\n   }\r\n \r\n@@ -96,14 +96,6 @@\n     if (confirm(`Êtes-vous sûr de vouloir supprimer l'agence ${agency.name} ?`)) {\r\n       this.agencies = this.agencies.filter(a => a._id !== agency._id);\r\n     }\r\n   }\r\n-  deleteAgency(agency: any): void {\r\n-    // Logic to delete agency\r\n-    if (confirm(` ${agency.name}?`)) {\r\n-      this.agencies = this.agencies.filter(a => a._id !== agency._id);\r\n-      this.filterAgencies();\r\n-    }\r\n-    // Prevent event bubbling to row click\r\n-    event?.stopPropagation();\r\n-  }\r\n+ \r\n }\r\n"
                },
                {
                    "date": 1744026268241,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,8 @@\n import { Component, OnInit } from '@angular/core';\r\n import { MatDialog } from '@angular/material/dialog';\r\n import { AgenceFormComponent } from '../agence-form/agence-form.component';\r\n+import { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\n \r\n @Component({\r\n   selector: 'app-agences',\r\n   templateUrl: './agences.component.html',\r\n@@ -60,15 +61,14 @@\n     );\r\n   }\r\n \r\n   addAgency() {\r\n-    const dialogRef = this.dialog.open(AgenceFormComponent, {\r\n-      width: '500px',\r\n-      data: { isEdit: false }\r\n-    });\r\n-\r\n-    dialogRef.afterClosed().subscribe(result => {\r\n+    const modalRef = this.modalService.open(AgenceModalComponent, { centered: true });\r\n+    modalRef.componentInstance.isEditMode = false;\r\n+    \r\n+    modalRef.result.then((result) => {\r\n       if (result) {\r\n+        // Ajouter la nouvelle agence\r\n         this.agencies.push({\r\n           ...result,\r\n           _id: Date.now().toString(),\r\n           createdAt: new Date()\r\n"
                },
                {
                    "date": 1744026276827,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -61,14 +61,15 @@\n     );\r\n   }\r\n \r\n   addAgency() {\r\n-    const modalRef = this.modalService.open(AgenceModalComponent, { centered: true });\r\n-    modalRef.componentInstance.isEditMode = false;\r\n-    \r\n-    modalRef.result.then((result) => {\r\n+    const dialogRef = this.dialog.open(AgenceFormComponent, {\r\n+      width: '500px',\r\n+      data: { isEdit: false }\r\n+    });\r\n+\r\n+    dialogRef.afterClosed().subscribe(result => {\r\n       if (result) {\r\n-        // Ajouter la nouvelle agence\r\n         this.agencies.push({\r\n           ...result,\r\n           _id: Date.now().toString(),\r\n           createdAt: new Date()\r\n"
                },
                {
                    "date": 1744026282270,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,21 +62,21 @@\n   }\r\n \r\n   addAgency() {\r\n     const dialogRef = this.dialog.open(AgenceFormComponent, {\r\n-      width: '500px',\r\n-      data: { isEdit: false }\r\n-    });\r\n-\r\n-    dialogRef.afterClosed().subscribe(result => {\r\n-      if (result) {\r\n-        this.agencies.push({\r\n-          ...result,\r\n-          _id: Date.now().toString(),\r\n-          createdAt: new Date()\r\n-        });\r\n-      }\r\n-    });\r\n+      const modalRef = this.modalService.open(AgenceModalComponent, { centered: true });\r\n+  modalRef.componentInstance.isEditMode = false;\r\n+  \r\n+  modalRef.result.then((result) => {\r\n+    if (result) {\r\n+      // Ajouter la nouvelle agence\r\n+      this.agencies.push({\r\n+        ...result,\r\n+        _id: Date.now().toString(),\r\n+        createdAt: new Date()\r\n+      });\r\n+    }\r\n+  });\r\n   }\r\n \r\n   editAgency(agency: any) {\r\n     const dialogRef = this.dialog.open(AgenceFormComponent, {\r\n"
                },
                {
                    "date": 1744026293905,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -61,9 +61,9 @@\n     );\r\n   }\r\n \r\n   addAgency() {\r\n-    const dialogRef = this.dialog.open(AgenceFormComponent, {\r\n+    \r\n       const modalRef = this.modalService.open(AgenceModalComponent, { centered: true });\r\n   modalRef.componentInstance.isEditMode = false;\r\n   \r\n   modalRef.result.then((result) => {\r\n"
                },
                {
                    "date": 1744026325195,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,9 +62,9 @@\n   }\r\n \r\n   addAgency() {\r\n     \r\n-      const modalRef = this.modalService.open(AgenceModalComponent, { centered: true });\r\n+      const modalRef = this.modalService.open(AgenceFormComponent, { centered: true });\r\n   modalRef.componentInstance.isEditMode = false;\r\n   \r\n   modalRef.result.then((result) => {\r\n     if (result) {\r\n@@ -79,20 +79,21 @@\n   }\r\n \r\n   editAgency(agency: any) {\r\n     const dialogRef = this.dialog.open(AgenceFormComponent, {\r\n-      width: '500px',\r\n-      data: { isEdit: true, agency }\r\n-    });\r\n-\r\n-    dialogRef.afterClosed().subscribe(result => {\r\n-      if (result) {\r\n-        const index = this.agencies.findIndex(a => a._id === agency._id);\r\n-        if (index !== -1) {\r\n-          this.agencies[index] = { ...this.agencies[index], ...result };\r\n+      const modalRef = this.modalService.open(AgenceModalComponent, { centered: true });\r\n+      modalRef.componentInstance.isEditMode = true;\r\n+      modalRef.componentInstance.agencyData = agency;\r\n+      \r\n+      modalRef.result.then((result) => {\r\n+        if (result) {\r\n+          // Mettre à jour l'agence\r\n+          const index = this.agencies.findIndex(a => a._id === agency._id);\r\n+          if (index !== -1) {\r\n+            this.agencies[index] = { ...this.agencies[index], ...result };\r\n+          }\r\n         }\r\n-      }\r\n-    });\r\n+      });\r\n   }\r\n   deleteAgency(agency: any) {\r\n     if (confirm(`Êtes-vous sûr de vouloir supprimer l'agence ${agency.name} ?`)) {\r\n       this.agencies = this.agencies.filter(a => a._id !== agency._id);\r\n"
                },
                {
                    "date": 1744026331312,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -78,9 +78,9 @@\n   });\r\n   }\r\n \r\n   editAgency(agency: any) {\r\n-    const dialogRef = this.dialog.open(AgenceFormComponent, {\r\n+    \r\n       const modalRef = this.modalService.open(AgenceModalComponent, { centered: true });\r\n       modalRef.componentInstance.isEditMode = true;\r\n       modalRef.componentInstance.agencyData = agency;\r\n       \r\n"
                },
                {
                    "date": 1744026337688,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -78,10 +78,9 @@\n   });\r\n   }\r\n \r\n   editAgency(agency: any) {\r\n-    \r\n-      const modalRef = this.modalService.open(AgenceModalComponent, { centered: true });\r\n+      const modalRef = this.modalService.open(AgenceFormComponent, { centered: true });\r\n       modalRef.componentInstance.isEditMode = true;\r\n       modalRef.componentInstance.agencyData = agency;\r\n       \r\n       modalRef.result.then((result) => {\r\n"
                },
                {
                    "date": 1744027086797,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -78,21 +78,21 @@\n   });\r\n   }\r\n \r\n   editAgency(agency: any) {\r\n-      const modalRef = this.modalService.open(AgenceFormComponent, { centered: true });\r\n-      modalRef.componentInstance.isEditMode = true;\r\n-      modalRef.componentInstance.agencyData = agency;\r\n-      \r\n-      modalRef.result.then((result) => {\r\n-        if (result) {\r\n-          // Mettre à jour l'agence\r\n-          const index = this.agencies.findIndex(a => a._id === agency._id);\r\n-          if (index !== -1) {\r\n-            this.agencies[index] = { ...this.agencies[index], ...result };\r\n-          }\r\n+    const dialogRef = this.dialog.open(AgenceFormComponent, {\r\n+      width: '500px',\r\n+      data: { isEdit: true, agency }\r\n+    });\r\n+\r\n+    dialogRef.afterClosed().subscribe(result => {\r\n+      if (result) {\r\n+        const index = this.agencies.findIndex(a => a._id === agency._id);\r\n+        if (index !== -1) {\r\n+          this.agencies[index] = { ...this.agencies[index], ...result };\r\n         }\r\n-      });\r\n+      }\r\n+    });\r\n   }\r\n   deleteAgency(agency: any) {\r\n     if (confirm(`Êtes-vous sûr de vouloir supprimer l'agence ${agency.name} ?`)) {\r\n       this.agencies = this.agencies.filter(a => a._id !== agency._id);\r\n"
                },
                {
                    "date": 1744027507861,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -61,38 +61,37 @@\n     );\r\n   }\r\n \r\n   addAgency() {\r\n+    const modalRef = this.modalService.open(AgenceFormComponent, { centered: true });\r\n+    modalRef.componentInstance.isEditMode = false;\r\n     \r\n-      const modalRef = this.modalService.open(AgenceFormComponent, { centered: true });\r\n-  modalRef.componentInstance.isEditMode = false;\r\n+    modalRef.result.then((result) => {\r\n+      if (result) {\r\n+        this.agencies.push({\r\n+          ...result,\r\n+          _id: Date.now().toString(),\r\n+          createdAt: new Date()\r\n+        });\r\n+        this.filterAgencies(); // Rafraîchir la liste\r\n+      }\r\n+    }).catch(() => {});\r\n+  }\r\n   \r\n-  modalRef.result.then((result) => {\r\n-    if (result) {\r\n-      // Ajouter la nouvelle agence\r\n-      this.agencies.push({\r\n-        ...result,\r\n-        _id: Date.now().toString(),\r\n-        createdAt: new Date()\r\n-      });\r\n-    }\r\n-  });\r\n-  }\r\n-\r\n   editAgency(agency: any) {\r\n-    const dialogRef = this.dialog.open(AgenceFormComponent, {\r\n-      width: '500px',\r\n-      data: { isEdit: true, agency }\r\n-    });\r\n-\r\n-    dialogRef.afterClosed().subscribe(result => {\r\n+    const modalRef = this.modalService.open(AgenceFormComponent, { centered: true });\r\n+    modalRef.componentInstance.isEditMode = true;\r\n+    modalRef.componentInstance.agencyData = agency;\r\n+    \r\n+    modalRef.result.then((result) => {\r\n       if (result) {\r\n         const index = this.agencies.findIndex(a => a._id === agency._id);\r\n         if (index !== -1) {\r\n           this.agencies[index] = { ...this.agencies[index], ...result };\r\n+          this.filterAgencies(); // Rafraîchir la liste\r\n         }\r\n       }\r\n-    });\r\n+    }).catch(() => {});\r\n   }\r\n   deleteAgency(agency: any) {\r\n     if (confirm(`Êtes-vous sûr de vouloir supprimer l'agence ${agency.name} ?`)) {\r\n       this.agencies = this.agencies.filter(a => a._id !== agency._id);\r\n"
                },
                {
                    "date": 1744027873123,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -61,23 +61,25 @@\n     );\r\n   }\r\n \r\n   addAgency() {\r\n-    const modalRef = this.modalService.open(AgenceFormComponent, { centered: true });\r\n-    modalRef.componentInstance.isEditMode = false;\r\n-    \r\n-    modalRef.result.then((result) => {\r\n+    const dialogRef = this.dialog.open(AgenceFormComponent, {\r\n+      width: '500px',\r\n+      data: { isEditMode: false }\r\n+    });\r\n+  \r\n+    dialogRef.afterClosed().subscribe(result => {\r\n       if (result) {\r\n         this.agencies.push({\r\n           ...result,\r\n           _id: Date.now().toString(),\r\n           createdAt: new Date()\r\n         });\r\n-        this.filterAgencies(); // Rafraîchir la liste\r\n       }\r\n-    }).catch(() => {});\r\n+    });\r\n   }\r\n   \r\n+  \r\n   editAgency(agency: any) {\r\n     const modalRef = this.modalService.open(AgenceFormComponent, { centered: true });\r\n     modalRef.componentInstance.isEditMode = true;\r\n     modalRef.componentInstance.agencyData = agency;\r\n"
                },
                {
                    "date": 1744028037906,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -82,19 +82,19 @@\n   editAgency(agency: any) {\r\n     const modalRef = this.modalService.open(AgenceFormComponent, { centered: true });\r\n     modalRef.componentInstance.isEditMode = true;\r\n     modalRef.componentInstance.agencyData = agency;\r\n-    \r\n+  \r\n     modalRef.result.then((result) => {\r\n       if (result) {\r\n         const index = this.agencies.findIndex(a => a._id === agency._id);\r\n         if (index !== -1) {\r\n           this.agencies[index] = { ...this.agencies[index], ...result };\r\n-          this.filterAgencies(); // Rafraîchir la liste\r\n         }\r\n       }\r\n-    }).catch(() => {});\r\n+    });\r\n   }\r\n+  \r\n   deleteAgency(agency: any) {\r\n     if (confirm(`Êtes-vous sûr de vouloir supprimer l'agence ${agency.name} ?`)) {\r\n       this.agencies = this.agencies.filter(a => a._id !== agency._id);\r\n     }\r\n"
                },
                {
                    "date": 1744028209773,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -79,13 +79,17 @@\n   }\r\n   \r\n   \r\n   editAgency(agency: any) {\r\n-    const modalRef = this.modalService.open(AgenceFormComponent, { centered: true });\r\n-    modalRef.componentInstance.isEditMode = true;\r\n-    modalRef.componentInstance.agencyData = agency;\r\n+    const dialogRef = this.dialog.open(AgenceFormComponent, {\r\n+      width: '500px',\r\n+      data: {\r\n+        isEditMode: true,\r\n+        agencyData: agency\r\n+      }\r\n+    });\r\n   \r\n-    modalRef.result.then((result) => {\r\n+    dialogRef.afterClosed().subscribe(result => {\r\n       if (result) {\r\n         const index = this.agencies.findIndex(a => a._id === agency._id);\r\n         if (index !== -1) {\r\n           this.agencies[index] = { ...this.agencies[index], ...result };\r\n@@ -93,8 +97,9 @@\n       }\r\n     });\r\n   }\r\n   \r\n+  \r\n   deleteAgency(agency: any) {\r\n     if (confirm(`Êtes-vous sûr de vouloir supprimer l'agence ${agency.name} ?`)) {\r\n       this.agencies = this.agencies.filter(a => a._id !== agency._id);\r\n     }\r\n"
                },
                {
                    "date": 1744028290679,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,7 @@\n import { Component, OnInit } from '@angular/core';\r\n import { MatDialog } from '@angular/material/dialog';\r\n import { AgenceFormComponent } from '../agence-form/agence-form.component';\r\n-import { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\n \r\n @Component({\r\n   selector: 'app-agences',\r\n   templateUrl: './agences.component.html',\r\n"
                },
                {
                    "date": 1744030360861,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,8 @@\n import { Component, OnInit } from '@angular/core';\r\n import { MatDialog } from '@angular/material/dialog';\r\n import { AgenceFormComponent } from '../agence-form/agence-form.component';\r\n+import { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\n \r\n @Component({\r\n   selector: 'app-agences',\r\n   templateUrl: './agences.component.html',\r\n@@ -102,6 +103,12 @@\n     if (confirm(`Êtes-vous sûr de vouloir supprimer l'agence ${agency.name} ?`)) {\r\n       this.agencies = this.agencies.filter(a => a._id !== agency._id);\r\n     }\r\n   }\r\n- \r\n+  showAgencyDetails(agency: any) {\r\n+    this.dialog.open(AgencyDetailsComponent, {\r\n+      width: '800px',\r\n+      data: { agency: agency },\r\n+      panelClass: 'agency-details-dialog'\r\n+    });\r\n+  }\r\n }\r\n"
                },
                {
                    "date": 1744030377212,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,9 @@\n import { Component, OnInit } from '@angular/core';\r\n import { MatDialog } from '@angular/material/dialog';\r\n import { AgenceFormComponent } from '../agence-form/agence-form.component';\r\n import { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\n+import { AgencyDetailsComponent } from '../agency-details/agency-details.component';\r\n \r\n @Component({\r\n   selector: 'app-agences',\r\n   templateUrl: './agences.component.html',\r\n"
                },
                {
                    "date": 1744031684353,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -99,11 +99,26 @@\n     });\r\n   }\r\n   \r\n   \r\n-  deleteAgency(agency: any) {\r\n-    if (confirm(`Êtes-vous sûr de vouloir supprimer l'agence ${agency.name} ?`)) {\r\n+  deleteAgency(agency: any, event?: MouseEvent) {\r\n+    // Empêche la propagation de l'événement si le paramètre est présent\r\n+    if (event) {\r\n+      event.stopPropagation();\r\n+    }\r\n+  \r\n+    const confirmation = confirm(`Êtes-vous sûr de vouloir supprimer l'agence ${agency.name} ?`);\r\n+    \r\n+    if (confirmation) {\r\n+      // Supprime l'agence du tableau principal\r\n       this.agencies = this.agencies.filter(a => a._id !== agency._id);\r\n+      \r\n+      // Met à jour la liste filtrée\r\n+      this.filterAgencies();\r\n+      \r\n+      // Optionnel : Afficher un message de succès\r\n+      console.log(`Agence ${agency.name} supprimée avec succès`);\r\n+      // Vous pourriez aussi utiliser un service de notification ici\r\n     }\r\n   }\r\n   showAgencyDetails(agency: any) {\r\n     this.dialog.open(AgencyDetailsComponent, {\r\n"
                },
                {
                    "date": 1744032888689,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,9 @@\n import { MatDialog } from '@angular/material/dialog';\r\n import { AgenceFormComponent } from '../agence-form/agence-form.component';\r\n import { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\n import { AgencyDetailsComponent } from '../agency-details/agency-details.component';\r\n-\r\n+import { Router } from '@angular/router';\r\n @Component({\r\n   selector: 'app-agences',\r\n   templateUrl: './agences.component.html',\r\n   styleUrl: './agences.component.scss'\r\n"
                },
                {
                    "date": 1744032905827,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,9 +39,11 @@\n     }\r\n   ];\r\n   filteredAgencies: any[] = [];\r\n \r\n-  constructor(public dialog: MatDialog,private modalService: NgbModal) { \r\n+  constructor(public dialog: MatDialog,private modalService: NgbModal,\r\n+    \r\n+  ) { \r\n     this.currentDate = new Date().toLocaleDateString();\r\n    \r\n   }\r\n \r\n"
                },
                {
                    "date": 1744032913800,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,10 +39,12 @@\n     }\r\n   ];\r\n   filteredAgencies: any[] = [];\r\n \r\n-  constructor(public dialog: MatDialog,private modalService: NgbModal,\r\n-    \r\n+  constructor(\r\n+    public dialog: MatDialog,\r\n+    private modalService: NgbModal,\r\n+    private router: Router\r\n   ) { \r\n     this.currentDate = new Date().toLocaleDateString();\r\n    \r\n   }\r\n"
                },
                {
                    "date": 1744032938658,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -124,11 +124,7 @@\n       // Vous pourriez aussi utiliser un service de notification ici\r\n     }\r\n   }\r\n   showAgencyDetails(agency: any) {\r\n-    this.dialog.open(AgencyDetailsComponent, {\r\n-      width: '800px',\r\n-      data: { agency: agency },\r\n-      panelClass: 'agency-details-dialog'\r\n-    });\r\n+    this.router.navigate(['/super-admin/agences', agency._id]);\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1744033123181,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -124,7 +124,11 @@\n       // Vous pourriez aussi utiliser un service de notification ici\r\n     }\r\n   }\r\n   showAgencyDetails(agency: any) {\r\n-    this.router.navigate(['/super-admin/agences', agency._id]);\r\n+    this.dialog.open(AgencyDetailsComponent, {\r\n+      width: '800px',\r\n+      data: { agency: agency },\r\n+      panelClass: 'agency-details-dialog'\r\n+    });\r\n   }\r\n }\r\n"
                }
            ],
            "date": 1744021095038,
            "name": "Commit-0",
            "content": "import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-agences',\r\n  templateUrl: './agences.component.html',\r\n  styleUrl: './agences.component.scss'\r\n})\r\nexport class AgencesComponent {\r\n  currentDate: string;\r\n  searchQuery: string = '';\r\n  agencies: any[] = [];\r\n  filteredAgencies: any[] = [];\r\n\r\n  constructor() { \r\n    this.currentDate = new Date().toLocaleDateString();\r\n    // Sample data\r\n    this.agencies = [\r\n      {\r\n        _id: '1',\r\n        name: 'Agence Principale',\r\n        address: '123 Rue Principale, Ville',\r\n        email: 'contact@agence1.com',\r\n        phone: '0123456789',\r\n        createdAt: new Date('2023-01-15')\r\n      },\r\n      {\r\n        _id: '2',\r\n        name: 'Agence Secondaire',\r\n        address: '456 Avenue Centrale, Ville',\r\n        email: 'contact@agence2.com',\r\n        phone: '0987654321',\r\n        createdAt: new Date('2023-03-20')\r\n      },\r\n      {\r\n        _id: '3',\r\n        name: 'Agence Régionale',\r\n        address: '789 Boulevard Régional, Ville',\r\n        email: 'contact@agence3.com',\r\n        phone: '0567891234',\r\n        createdAt: new Date('2023-05-10')\r\n      }\r\n    ];\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.filteredAgencies = [...this.agencies];\r\n  }\r\n\r\n  filterAgencies(): void {\r\n    if (!this.searchQuery) {\r\n      this.filteredAgencies = [...this.agencies];\r\n      return;\r\n    }\r\n    this.filteredAgencies = this.agencies.filter(agency =>\r\n      agency.name.toLowerCase().includes(this.searchQuery.toLowerCase()) ||\r\n      agency.address.toLowerCase().includes(this.searchQuery.toLowerCase()) ||\r\n      agency.email.toLowerCase().includes(this.searchQuery.toLowerCase()) ||\r\n      agency.phone.toLowerCase().includes(this.searchQuery.toLowerCase())\r\n    );\r\n  }\r\n\r\n  addAgency(): void {\r\n    // Logic to add new agency\r\n    alert('Ajouter une nouvelle agence');\r\n    // In a real app, you would open a modal or navigate to a form\r\n  }\r\n\r\n  editAgency(agency: any): void {\r\n    // Logic to edit agency\r\n    alert(`Modifier l'agence: ${agency.name}`);\r\n    // Prevent event bubbling to row click\r\n    event?.stopPropagation();\r\n  }\r\n\r\n  deleteAgency(agency: any): void {\r\n    // Logic to delete agency\r\n    if (confirm(`Êtes-vous sûr de vouloir supprimer l'agence ${agency.name}?`)) {\r\n      this.agencies = this.agencies.filter(a => a._id !== agency._id);\r\n      this.filterAgencies();\r\n    }\r\n    // Prevent event bubbling to row click\r\n    event?.stopPropagation();\r\n  }\r\n}\r\n"
        }
    ]
}
{
    "sourceFile": "src/app/header/header.component.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 84,
            "patches": [
                {
                    "date": 1741687617491,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1741687985405,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,11 +5,6 @@\n   templateUrl: './header.component.html',\r\n   styleUrl: './header.component.scss'\r\n })\r\n export class HeaderComponent {\r\n-  title: string = 'Tableau de bord'; // Titre par défaut\r\n-\r\n-  // Méthode pour changer dynamiquement le titre en fonction de l'interface\r\n-  changeTitle(newTitle: string): void {\r\n-    this.title = newTitle;\r\n-  }\r\n+  @Input() title: string = 'Tableau de bord';\r\n }\r\n"
                },
                {
                    "date": 1745512952816,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,10 +1,11 @@\n-import { Component } from '@angular/core';\r\n+import { Component, Input } from '@angular/core';\r\n \r\n @Component({\r\n   selector: 'app-header',\r\n   templateUrl: './header.component.html',\r\n   styleUrl: './header.component.scss'\r\n })\r\n export class HeaderComponent {\r\n   @Input() title: string = 'Tableau de bord';\r\n+  \r\n }\r\n"
                },
                {
                    "date": 1745512966461,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,6 +6,6 @@\n   styleUrl: './header.component.scss'\r\n })\r\n export class HeaderComponent {\r\n   @Input() title: string = 'Tableau de bord';\r\n-  \r\n+  n\r\n }\r\n"
                },
                {
                    "date": 1745512981893,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,6 +6,6 @@\n   styleUrl: './header.component.scss'\r\n })\r\n export class HeaderComponent {\r\n   @Input() title: string = 'Tableau de bord';\r\n-  n\r\n+  \r\n }\r\n"
                },
                {
                    "date": 1745512987429,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,8 +4,8 @@\n   selector: 'app-header',\r\n   templateUrl: './header.component.html',\r\n   styleUrl: './header.component.scss'\r\n })\r\n-export class HeaderComponent {\r\n+export class HeaderComponent implements ng {\r\n   @Input() title: string = 'Tableau de bord';\r\n   \r\n }\r\n"
                },
                {
                    "date": 1745512994066,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,8 +4,14 @@\n   selector: 'app-header',\r\n   templateUrl: './header.component.html',\r\n   styleUrl: './header.component.scss'\r\n })\r\n-export class HeaderComponent implements ng {\r\n+export class HeaderComponent implements ngOnInit(): void {\r\n+  //Called after the constructor, initializing input properties, and the first call to ngOnChanges.\r\n+  //Add 'implements OnInit' to the class.\r\n+  ngOnInit(): void {\r\n+    throw new Error('Method not implemented.');\r\n+  }\r\n+} {\r\n   @Input() title: string = 'Tableau de bord';\r\n   \r\n }\r\n"
                },
                {
                    "date": 1745513003041,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n   selector: 'app-header',\r\n   templateUrl: './header.component.html',\r\n   styleUrl: './header.component.scss'\r\n })\r\n-export class HeaderComponent implements ngOnInit(): void {\r\n+export class HeaderComponent implements on {\r\n   //Called after the constructor, initializing input properties, and the first call to ngOnChanges.\r\n   //Add 'implements OnInit' to the class.\r\n   ngOnInit(): void {\r\n     throw new Error('Method not implemented.');\r\n"
                },
                {
                    "date": 1745513020762,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,17 +1,15 @@\n-import { Component, Input } from '@angular/core';\r\n+import { Component, Input, OnInit } from '@angular/core';\r\n \r\n @Component({\r\n   selector: 'app-header',\r\n   templateUrl: './header.component.html',\r\n   styleUrl: './header.component.scss'\r\n })\r\n-export class HeaderComponent implements on {\r\n+export class HeaderComponent implements OnInit {\r\n   //Called after the constructor, initializing input properties, and the first call to ngOnChanges.\r\n   //Add 'implements OnInit' to the class.\r\n-  ngOnInit(): void {\r\n-    throw new Error('Method not implemented.');\r\n-  }\r\n+  \r\n } {\r\n   @Input() title: string = 'Tableau de bord';\r\n   \r\n }\r\n"
                },
                {
                    "date": 1745513031820,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,15 +1,11 @@\n-import { Component, Input, OnInit } from '@angular/core';\r\n+import { Component, Input } from '@angular/core';\r\n \r\n @Component({\r\n   selector: 'app-header',\r\n   templateUrl: './header.component.html',\r\n   styleUrl: './header.component.scss'\r\n })\r\n-export class HeaderComponent implements OnInit {\r\n-  //Called after the constructor, initializing input properties, and the first call to ngOnChanges.\r\n-  //Add 'implements OnInit' to the class.\r\n-  \r\n-} {\r\n+export class HeaderComponent implements On {\r\n   @Input() title: string = 'Tableau de bord';\r\n   \r\n }\r\n"
                },
                {
                    "date": 1745513038691,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,11 +1,12 @@\n-import { Component, Input } from '@angular/core';\r\n+import { Component, Input, OnInit } from '@angular/core';\r\n \r\n @Component({\r\n   selector: 'app-header',\r\n   templateUrl: './header.component.html',\r\n   styleUrl: './header.component.scss'\r\n })\r\n-export class HeaderComponent implements On {\r\n+export class HeaderComponent implements OnInit {\r\n   @Input() title: string = 'Tableau de bord';\r\n   \r\n+  \r\n }\r\n"
                },
                {
                    "date": 1745513056796,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,6 +7,8 @@\n })\r\n export class HeaderComponent implements OnInit {\r\n   @Input() title: string = 'Tableau de bord';\r\n   \r\n-  \r\n+  ngOnInit(): void {\r\n+    username\r\n+  }\r\n }\r\n"
                },
                {
                    "date": 1745513062775,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,9 +6,9 @@\n   styleUrl: './header.component.scss'\r\n })\r\n export class HeaderComponent implements OnInit {\r\n   @Input() title: string = 'Tableau de bord';\r\n-  \r\n+  username\r\n   ngOnInit(): void {\r\n-    username\r\n+    username=\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1745513068361,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,9 +6,9 @@\n   styleUrl: './header.component.scss'\r\n })\r\n export class HeaderComponent implements OnInit {\r\n   @Input() title: string = 'Tableau de bord';\r\n-  username\r\n+  username:string;\r\n   ngOnInit(): void {\r\n     username=\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1745513077587,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,9 +6,9 @@\n   styleUrl: './header.component.scss'\r\n })\r\n export class HeaderComponent implements OnInit {\r\n   @Input() title: string = 'Tableau de bord';\r\n-  username:string;\r\n+  username!:string;\r\n   ngOnInit(): void {\r\n-    username=\r\n+    username=loc\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1745513083399,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,7 +8,7 @@\n export class HeaderComponent implements OnInit {\r\n   @Input() title: string = 'Tableau de bord';\r\n   username!:string;\r\n   ngOnInit(): void {\r\n-    username=loc\r\n+    username=localStorage.getItem\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1745513091839,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,7 +8,7 @@\n export class HeaderComponent implements OnInit {\r\n   @Input() title: string = 'Tableau de bord';\r\n   username!:string;\r\n   ngOnInit(): void {\r\n-    username=localStorage.getItem\r\n+    this.username=localStorage.getItem(\"\")\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1745513103411,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,7 +8,7 @@\n export class HeaderComponent implements OnInit {\r\n   @Input() title: string = 'Tableau de bord';\r\n   username!:string;\r\n   ngOnInit(): void {\r\n-    this.username=localStorage.getItem(\"\")\r\n+    this.username=localStorage.getItem(\"user_profile\")\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1745513118740,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,7 +8,7 @@\n export class HeaderComponent implements OnInit {\r\n   @Input() title: string = 'Tableau de bord';\r\n   username!:string;\r\n   ngOnInit(): void {\r\n-    this.username=localStorage.getItem(\"user_profile\")\r\n+    this.username=localStorage.getItem(\"user_profile\").preferred_username\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1745513126183,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,7 +8,8 @@\n export class HeaderComponent implements OnInit {\r\n   @Input() title: string = 'Tableau de bord';\r\n   username!:string;\r\n   ngOnInit(): void {\r\n-    this.username=localStorage.getItem(\"user_profile\").preferred_username\r\n+    this.username=localStorage.getItem(\"user_profile\").preferred_username;\r\n+    console.log(this.username);\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1745513142625,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,8 +8,9 @@\n export class HeaderComponent implements OnInit {\r\n   @Input() title: string = 'Tableau de bord';\r\n   username!:string;\r\n   ngOnInit(): void {\r\n+    if\r\n     this.username=localStorage.getItem(\"user_profile\").preferred_username;\r\n     console.log(this.username);\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1745513147789,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,10 @@\n export class HeaderComponent implements OnInit {\r\n   @Input() title: string = 'Tableau de bord';\r\n   username!:string;\r\n   ngOnInit(): void {\r\n-    if\r\n+    if(!localStorage.getItem(\"user_profile\")) return;\r\n+    console.log(localStorage.getItem(\"user_profile\"))\r\n     this.username=localStorage.getItem(\"user_profile\").preferred_username;\r\n     console.log(this.username);\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1745513153711,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,9 @@\n export class HeaderComponent implements OnInit {\r\n   @Input() title: string = 'Tableau de bord';\r\n   username!:string;\r\n   ngOnInit(): void {\r\n-    if(!localStorage.getItem(\"user_profile\")) return;\r\n+    if(localStorage.getItem(\"user_profile\")) return;\r\n     console.log(localStorage.getItem(\"user_profile\"))\r\n     this.username=localStorage.getItem(\"user_profile\").preferred_username;\r\n     console.log(this.username);\r\n   }\r\n"
                },
                {
                    "date": 1745513169050,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,9 @@\n export class HeaderComponent implements OnInit {\r\n   @Input() title: string = 'Tableau de bord';\r\n   username!:string;\r\n   ngOnInit(): void {\r\n-    if(localStorage.getItem(\"user_profile\")) return;\r\n+    if(localStorage.getItem(\"user_profile\")) {}\r\n     console.log(localStorage.getItem(\"user_profile\"))\r\n     this.username=localStorage.getItem(\"user_profile\").preferred_username;\r\n     console.log(this.username);\r\n   }\r\n"
                },
                {
                    "date": 1745513174286,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,10 +8,11 @@\n export class HeaderComponent implements OnInit {\r\n   @Input() title: string = 'Tableau de bord';\r\n   username!:string;\r\n   ngOnInit(): void {\r\n-    if(localStorage.getItem(\"user_profile\")) {}\r\n+    if(localStorage.getItem(\"user_profile\")) {\r\n     console.log(localStorage.getItem(\"user_profile\"))\r\n     this.username=localStorage.getItem(\"user_profile\").preferred_username;\r\n     console.log(this.username);\r\n   }\r\n+  }\r\n }\r\n"
                },
                {
                    "date": 1745513254015,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,9 +6,9 @@\n   styleUrl: './header.component.scss'\r\n })\r\n export class HeaderComponent implements OnInit {\r\n   @Input() title: string = 'Tableau de bord';\r\n-  username!:string;\r\n+  username: string | null = null;\r\n   ngOnInit(): void {\r\n     if(localStorage.getItem(\"user_profile\")) {\r\n     console.log(localStorage.getItem(\"user_profile\"))\r\n     this.username=localStorage.getItem(\"user_profile\").preferred_username;\r\n"
                },
                {
                    "date": 1745513264343,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,11 +8,31 @@\n export class HeaderComponent implements OnInit {\r\n   @Input() title: string = 'Tableau de bord';\r\n   username: string | null = null;\r\n   ngOnInit(): void {\r\n-    if(localStorage.getItem(\"user_profile\")) {\r\n-    console.log(localStorage.getItem(\"user_profile\"))\r\n-    this.username=localStorage.getItem(\"user_profile\").preferred_username;\r\n-    console.log(this.username);\r\n+    const userProfileString = localStorage.getItem(\"user_profile\");\r\n+\r\n+    if (userProfileString) {\r\n+      try {\r\n+        // Parse the JSON string into an object\r\n+        const userProfile = JSON.parse(userProfileString);\r\n+\r\n+        // Safely access the preferred_username property\r\n+        // Use optional chaining (?.) in case userProfile is null/undefined after parsing\r\n+        // Provide a fallback value (null) if preferred_username doesn't exist\r\n+        this.username = userProfile?.preferred_username || null;\r\n+\r\n+        console.log(\"User Profile Object:\", userProfile);\r\n+        console.log(\"Extracted Username:\", this.username);\r\n+\r\n+      } catch (error) {\r\n+        // Handle potential errors during JSON parsing\r\n+        console.error(\"Error parsing user profile from localStorage:\", error);\r\n+        this.username = null; // Ensure username is null on error\r\n+      }\r\n+    } else {\r\n+      // Handle the case where the item is not found in localStorage\r\n+      console.warn(\"User profile not found in localStorage.\");\r\n+      this.username = null; // Ensure username is null if not found\r\n+    }\r\n   }\r\n-  }\r\n }\r\n"
                },
                {
                    "date": 1745513274365,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,14 +12,9 @@\n     const userProfileString = localStorage.getItem(\"user_profile\");\r\n \r\n     if (userProfileString) {\r\n       try {\r\n-        // Parse the JSON string into an object\r\n-        const userProfile = JSON.parse(userProfileString);\r\n-\r\n-        // Safely access the preferred_username property\r\n-        // Use optional chaining (?.) in case userProfile is null/undefined after parsing\r\n-        // Provide a fallback value (null) if preferred_username doesn't exist\r\n+        const userProfile = JSON.parse(userProfileString)\r\n         this.username = userProfile?.preferred_username || null;\r\n \r\n         console.log(\"User Profile Object:\", userProfile);\r\n         console.log(\"Extracted Username:\", this.username);\r\n"
                },
                {
                    "date": 1745513284216,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,10 +11,10 @@\n   ngOnInit(): void {\r\n     const userProfileString = localStorage.getItem(\"user_profile\");\r\n \r\n     if (userProfileString) {\r\n-      try {\r\n-        const userProfile = JSON.parse(userProfileString)\r\n+      \r\n+        const userProfile = JSON.parse(userProfileString);\r\n         this.username = userProfile?.preferred_username || null;\r\n \r\n         console.log(\"User Profile Object:\", userProfile);\r\n         console.log(\"Extracted Username:\", this.username);\r\n"
                },
                {
                    "date": 1745513290985,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,16 +17,9 @@\n         this.username = userProfile?.preferred_username || null;\r\n \r\n         console.log(\"User Profile Object:\", userProfile);\r\n         console.log(\"Extracted Username:\", this.username);\r\n-\r\n-      } catch (error) {\r\n-        // Handle potential errors during JSON parsing\r\n-        console.error(\"Error parsing user profile from localStorage:\", error);\r\n-        this.username = null; // Ensure username is null on error\r\n-      }\r\n     } else {\r\n-      // Handle the case where the item is not found in localStorage\r\n       console.warn(\"User profile not found in localStorage.\");\r\n       this.username = null; // Ensure username is null if not found\r\n     }\r\n   }\r\n"
                },
                {
                    "date": 1745513298196,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,13 +14,11 @@\n     if (userProfileString) {\r\n       \r\n         const userProfile = JSON.parse(userProfileString);\r\n         this.username = userProfile?.preferred_username || null;\r\n-\r\n-        console.log(\"User Profile Object:\", userProfile);\r\n-        console.log(\"Extracted Username:\", this.username);\r\n+       \r\n     } else {\r\n       console.warn(\"User profile not found in localStorage.\");\r\n-      this.username = null; // Ensure username is null if not found\r\n+      this.username = null; \r\n     }\r\n   }\r\n }\r\n"
                },
                {
                    "date": 1746444952270,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,9 @@\n \r\n @Component({\r\n   selector: 'app-header',\r\n   templateUrl: './header.component.html',\r\n-  styleUrl: './header.component.scss'\r\n+  styleUrls: './header.component.scss'\r\n })\r\n export class HeaderComponent implements OnInit {\r\n   @Input() title: string = 'Tableau de bord';\r\n   username: string | null = null;\r\n"
                },
                {
                    "date": 1746445960534,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,10 @@\n \r\n @Component({\r\n   selector: 'app-header',\r\n   templateUrl: './header.component.html',\r\n-  styleUrls: './header.component.scss'\r\n+  styleUrl: './header.component.scss',\r\n+  standalone: false\r\n })\r\n export class HeaderComponent implements OnInit {\r\n   @Input() title: string = 'Tableau de bord';\r\n   username: string | null = null;\r\n"
                },
                {
                    "date": 1747016876887,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,8 +15,9 @@\n     if (userProfileString) {\r\n       \r\n         const userProfile = JSON.parse(userProfileString);\r\n         this.username = userProfile?.preferred_username || null;\r\n+        \r\n        \r\n     } else {\r\n       console.warn(\"User profile not found in localStorage.\");\r\n       this.username = null; \r\n"
                },
                {
                    "date": 1747016882504,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n     if (userProfileString) {\r\n       \r\n         const userProfile = JSON.parse(userProfileString);\r\n         this.username = userProfile?.preferred_username || null;\r\n-        \r\n+        localStorage.\r\n        \r\n     } else {\r\n       console.warn(\"User profile not found in localStorage.\");\r\n       this.username = null; \r\n"
                },
                {
                    "date": 1747016888748,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n     if (userProfileString) {\r\n       \r\n         const userProfile = JSON.parse(userProfileString);\r\n         this.username = userProfile?.preferred_username || null;\r\n-        localStorage.\r\n+        localStorage.setItem(\"username\",this.username);\r\n        \r\n     } else {\r\n       console.warn(\"User profile not found in localStorage.\");\r\n       this.username = null; \r\n"
                },
                {
                    "date": 1747016895116,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,8 +15,9 @@\n     if (userProfileString) {\r\n       \r\n         const userProfile = JSON.parse(userProfileString);\r\n         this.username = userProfile?.preferred_username || null;\r\n+        if\r\n         localStorage.setItem(\"username\",this.username);\r\n        \r\n     } else {\r\n       console.warn(\"User profile not found in localStorage.\");\r\n"
                },
                {
                    "date": 1747016902724,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n     if (userProfileString) {\r\n       \r\n         const userProfile = JSON.parse(userProfileString);\r\n         this.username = userProfile?.preferred_username || null;\r\n-        if\r\n+        if(this.)\r\n         localStorage.setItem(\"username\",this.username);\r\n        \r\n     } else {\r\n       console.warn(\"User profile not found in localStorage.\");\r\n"
                },
                {
                    "date": 1747016908674,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n     if (userProfileString) {\r\n       \r\n         const userProfile = JSON.parse(userProfileString);\r\n         this.username = userProfile?.preferred_username || null;\r\n-        if(this.)\r\n+        if(this.username){\r\n         localStorage.setItem(\"username\",this.username);\r\n        \r\n     } else {\r\n       console.warn(\"User profile not found in localStorage.\");\r\n"
                },
                {
                    "date": 1747310704051,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,17 +8,20 @@\n })\r\n export class HeaderComponent implements OnInit {\r\n   @Input() title: string = 'Tableau de bord';\r\n   username: string | null = null;\r\n+  showNotifications: boolean = false;\r\n+  notifications: Notification[] = [];\r\n+  unreadCount: number = 0;\r\n   ngOnInit(): void {\r\n     const userProfileString = localStorage.getItem(\"user_profile\");\r\n \r\n     if (userProfileString) {\r\n       \r\n         const userProfile = JSON.parse(userProfileString);\r\n         this.username = userProfile?.preferred_username || null;\r\n         if(this.username){\r\n-        localStorage.setItem(\"username\",this.username);\r\n+        localStorage.setItem(\"username\",this.username);}\r\n        \r\n     } else {\r\n       console.warn(\"User profile not found in localStorage.\");\r\n       this.username = null; \r\n"
                },
                {
                    "date": 1747310739833,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,8 +12,10 @@\n   showNotifications: boolean = false;\r\n   notifications: Notification[] = [];\r\n   unreadCount: number = 0;\r\n   ngOnInit(): void {\r\n+    this.loadUserProfile();\r\n+    this.loadNotifications();\r\n     const userProfileString = localStorage.getItem(\"user_profile\");\r\n \r\n     if (userProfileString) {\r\n       \r\n"
                },
                {
                    "date": 1747310751322,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,5 +28,6 @@\n       console.warn(\"User profile not found in localStorage.\");\r\n       this.username = null; \r\n     }\r\n   }\r\n+  loadUserProfile\r\n }\r\n"
                },
                {
                    "date": 1747310757452,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -28,6 +28,6 @@\n       console.warn(\"User profile not found in localStorage.\");\r\n       this.username = null; \r\n     }\r\n   }\r\n-  loadUserProfile\r\n+  loadUserProfile():void\r\n }\r\n"
                },
                {
                    "date": 1747310767327,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,20 +14,10 @@\n   unreadCount: number = 0;\r\n   ngOnInit(): void {\r\n     this.loadUserProfile();\r\n     this.loadNotifications();\r\n-    const userProfileString = localStorage.getItem(\"user_profile\");\r\n+    \r\n+  }\r\n+  loadUserProfile():void{\r\n \r\n-    if (userProfileString) {\r\n-      \r\n-        const userProfile = JSON.parse(userProfileString);\r\n-        this.username = userProfile?.preferred_username || null;\r\n-        if(this.username){\r\n-        localStorage.setItem(\"username\",this.username);}\r\n-       \r\n-    } else {\r\n-      console.warn(\"User profile not found in localStorage.\");\r\n-      this.username = null; \r\n-    }\r\n   }\r\n-  loadUserProfile():void\r\n }\r\n"
                },
                {
                    "date": 1747310787056,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,7 +17,64 @@\n     this.loadNotifications();\r\n     \r\n   }\r\n   loadUserProfile():void{\r\n+const userProfileString = localStorage.getItem(\"user_profile\");\r\n \r\n+    if (userProfileString) {\r\n+      \r\n+        const userProfile = JSON.parse(userProfileString);\r\n+        this.username = userProfile?.preferred_username || null;\r\n+        if(this.username){\r\n+        localStorage.setItem(\"username\",this.username);}\r\n+       \r\n+    } else {\r\n+      console.warn(\"User profile not found in localStorage.\");\r\n+      this.username = null; \r\n+    }\r\n   }\r\n+  private loadNotifications(): void {\r\n+    // Ici vous devriez faire un appel à votre service backend\r\n+    // Pour l'exemple, nous utilisons des données mockées\r\n+    this.notifications = [\r\n+      {\r\n+        id: 1,\r\n+        title: 'Nouveau message',\r\n+        message: 'Vous avez reçu un nouveau message de Paul',\r\n+        time: new Date(Date.now() - 3600000),\r\n+        read: false\r\n+      },\r\n+      {\r\n+        id: 2,\r\n+        title: 'Rappel',\r\n+        message: 'Votre réunion est dans 15 minutes',\r\n+        time: new Date(Date.now() - 86400000),\r\n+        read: true\r\n+      },\r\n+      {\r\n+        id: 3,\r\n+        title: 'Mise à jour système',\r\n+        message: 'Une nouvelle version est disponible',\r\n+        time: new Date(Date.now() - 172800000),\r\n+        read: false\r\n+      }\r\n+    ];\r\n+\r\n+    this.updateUnreadCount();\r\n+  }\r\n+\r\n+  toggleNotifications(): void {\r\n+    this.showNotifications = !this.showNotifications;\r\n+    if (this.showNotifications) {\r\n+      this.markAllAsRead();\r\n+    }\r\n+  }\r\n+\r\n+  private markAllAsRead(): void {\r\n+    this.notifications.forEach(notification => notification.read = true);\r\n+    this.updateUnreadCount();\r\n+  }\r\n+\r\n+  private updateUnreadCount(): void {\r\n+    this.unreadCount = this.notifications.filter(n => !n.read).length;\r\n+  }\r\n }\r\n"
                },
                {
                    "date": 1747310815136,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,12 @@\n import { Component, Input, OnInit } from '@angular/core';\r\n-\r\n+interface Notification {\r\n+  id: number;\r\n+  title: string;\r\n+  message: string;\r\n+  time: Date;\r\n+  read: boolean;\r\n+}\r\n @Component({\r\n   selector: 'app-header',\r\n   templateUrl: './header.component.html',\r\n   styleUrl: './header.component.scss',\r\n"
                },
                {
                    "date": 1747310854432,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,12 +1,6 @@\n import { Component, Input, OnInit } from '@angular/core';\r\n-interface Notification {\r\n-  id: number;\r\n-  title: string;\r\n-  message: string;\r\n-  time: Date;\r\n-  read: boolean;\r\n-}\r\n+\r\n @Component({\r\n   selector: 'app-header',\r\n   templateUrl: './header.component.html',\r\n   styleUrl: './header.component.scss',\r\n@@ -20,12 +14,9 @@\n   unreadCount: number = 0;\r\n   ngOnInit(): void {\r\n     this.loadUserProfile();\r\n     this.loadNotifications();\r\n-    \r\n-  }\r\n-  loadUserProfile():void{\r\n-const userProfileString = localStorage.getItem(\"user_profile\");\r\n+    const userProfileString = localStorage.getItem(\"user_profile\");\r\n \r\n     if (userProfileString) {\r\n       \r\n         const userProfile = JSON.parse(userProfileString);\r\n@@ -37,50 +28,8 @@\n       console.warn(\"User profile not found in localStorage.\");\r\n       this.username = null; \r\n     }\r\n   }\r\n-  private loadNotifications(): void {\r\n-    // Ici vous devriez faire un appel à votre service backend\r\n-    // Pour l'exemple, nous utilisons des données mockées\r\n-    this.notifications = [\r\n-      {\r\n-        id: 1,\r\n-        title: 'Nouveau message',\r\n-        message: 'Vous avez reçu un nouveau message de Paul',\r\n-        time: new Date(Date.now() - 3600000),\r\n-        read: false\r\n-      },\r\n-      {\r\n-        id: 2,\r\n-        title: 'Rappel',\r\n-        message: 'Votre réunion est dans 15 minutes',\r\n-        time: new Date(Date.now() - 86400000),\r\n-        read: true\r\n-      },\r\n-      {\r\n-        id: 3,\r\n-        title: 'Mise à jour système',\r\n-        message: 'Une nouvelle version est disponible',\r\n-        time: new Date(Date.now() - 172800000),\r\n-        read: false\r\n-      }\r\n-    ];\r\n-\r\n-    this.updateUnreadCount();\r\n+  loadUserProfile():void{\r\n+    \r\n   }\r\n-\r\n-  toggleNotifications(): void {\r\n-    this.showNotifications = !this.showNotifications;\r\n-    if (this.showNotifications) {\r\n-      this.markAllAsRead();\r\n-    }\r\n-  }\r\n-\r\n-  private markAllAsRead(): void {\r\n-    this.notifications.forEach(notification => notification.read = true);\r\n-    this.updateUnreadCount();\r\n-  }\r\n-\r\n-  private updateUnreadCount(): void {\r\n-    this.unreadCount = this.notifications.filter(n => !n.read).length;\r\n-  }\r\n }\r\n"
                },
                {
                    "date": 1747310860733,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,10 +13,13 @@\n   notifications: Notification[] = [];\r\n   unreadCount: number = 0;\r\n   ngOnInit(): void {\r\n     this.loadUserProfile();\r\n-    this.loadNotifications();\r\n-    const userProfileString = localStorage.getItem(\"user_profile\");\r\n+   \r\n+    \r\n+  }\r\n+  loadUserProfile():void{\r\n+const userProfileString = localStorage.getItem(\"user_profile\");\r\n \r\n     if (userProfileString) {\r\n       \r\n         const userProfile = JSON.parse(userProfileString);\r\n@@ -28,8 +31,5 @@\n       console.warn(\"User profile not found in localStorage.\");\r\n       this.username = null; \r\n     }\r\n   }\r\n-  loadUserProfile():void{\r\n-    \r\n-  }\r\n }\r\n"
                },
                {
                    "date": 1747310992308,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,11 +8,16 @@\n })\r\n export class HeaderComponent implements OnInit {\r\n   @Input() title: string = 'Tableau de bord';\r\n   username: string | null = null;\r\n-  showNotifications: boolean = false;\r\n-  notifications: Notification[] = [];\r\n-  unreadCount: number = 0;\r\n+username: string | null = null; // Stores the logged-in username\r\n+  showNotifications: boolean = false; // Controls the visibility of the notification dropdown\r\n+  // Placeholder for notifications - in a real app, you'd fetch these\r\n+  notifications: { id: number, message: string, read: boolean }[] = [\r\n+    { id: 1, message: 'You have a new message.', read: false },\r\n+    { id: 2, message: 'Your task is due soon.', read: true },\r\n+    { id: 3, message: 'A new update is available.', read: false },\r\n+  ];\r\n   ngOnInit(): void {\r\n     this.loadUserProfile();\r\n    \r\n     \r\n"
                },
                {
                    "date": 1747310999927,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,40 @@\n+import { Component, Input, OnInit } from '@angular/core';\r\n+\r\n+@Component({\r\n+  selector: 'app-header',\r\n+  templateUrl: './header.component.html',\r\n+  styleUrl: './header.component.scss',\r\n+  standalone: false\r\n+})\r\n+export class HeaderComponent implements OnInit {\r\n+  @Input() title: string = 'Tableau de bord';\r\n+  username: string | null = null;\r\n+\r\n+  showNotifications: boolean = false; // Controls the visibility of the notification dropdown\r\n+  // Placeholder for notifications - in a real app, you'd fetch these\r\n+  notifications: { id: number, message: string, read: boolean }[] = [\r\n+    { id: 1, message: 'You have a new message.', read: false },\r\n+    { id: 2, message: 'Your task is due soon.', read: true },\r\n+    { id: 3, message: 'A new update is available.', read: false },\r\n+  ];\r\n+  ngOnInit(): void {\r\n+    this.loadUserProfile();\r\n+   \r\n+    \r\n+  }\r\n+  loadUserProfile():void{\r\n+const userProfileString = localStorage.getItem(\"user_profile\");\r\n+\r\n+    if (userProfileString) {\r\n+      \r\n+        const userProfile = JSON.parse(userProfileString);\r\n+        this.username = userProfile?.preferred_username || null;\r\n+        if(this.username){\r\n+        localStorage.setItem(\"username\",this.username);}\r\n+       \r\n+    } else {\r\n+      console.warn(\"User profile not found in localStorage.\");\r\n+      this.username = null; \r\n+    }\r\n+  }\r\n+}\r\n"
                },
                {
                    "date": 1747311014799,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,45 +36,8 @@\n       console.warn(\"User profile not found in localStorage.\");\r\n       this.username = null; \r\n     }\r\n   }\r\n-}\r\n-import { Component, Input, OnInit } from '@angular/core';\r\n-\r\n-@Component({\r\n-  selector: 'app-header',\r\n-  templateUrl: './header.component.html',\r\n-  styleUrl: './header.component.scss',\r\n-  standalone: false\r\n-})\r\n-export class HeaderComponent implements OnInit {\r\n-  @Input() title: string = 'Tableau de bord';\r\n-  username: string | null = null;\r\n-username: string | null = null; // Stores the logged-in username\r\n-  showNotifications: boolean = false; // Controls the visibility of the notification dropdown\r\n-  // Placeholder for notifications - in a real app, you'd fetch these\r\n-  notifications: { id: number, message: string, read: boolean }[] = [\r\n-    { id: 1, message: 'You have a new message.', read: false },\r\n-    { id: 2, message: 'Your task is due soon.', read: true },\r\n-    { id: 3, message: 'A new update is available.', read: false },\r\n-  ];\r\n-  ngOnInit(): void {\r\n-    this.loadUserProfile();\r\n-   \r\n-    \r\n+  toggleNotifications(): void {\r\n+    this.showNotifications = !this.showNotifications;\r\n   }\r\n-  loadUserProfile():void{\r\n-const userProfileString = localStorage.getItem(\"user_profile\");\r\n-\r\n-    if (userProfileString) {\r\n-      \r\n-        const userProfile = JSON.parse(userProfileString);\r\n-        this.username = userProfile?.preferred_username || null;\r\n-        if(this.username){\r\n-        localStorage.setItem(\"username\",this.username);}\r\n-       \r\n-    } else {\r\n-      console.warn(\"User profile not found in localStorage.\");\r\n-      this.username = null; \r\n-    }\r\n-  }\r\n }\r\n"
                },
                {
                    "date": 1747324733431,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,10 +19,9 @@\n   ];\r\n   ngOnInit(): void {\r\n     this.loadUserProfile();\r\n    \r\n-    \r\n-  }\r\n+      }\r\n   loadUserProfile():void{\r\n const userProfileString = localStorage.getItem(\"user_profile\");\r\n \r\n     if (userProfileString) {\r\n"
                },
                {
                    "date": 1747324739643,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,11 +17,10 @@\n     { id: 2, message: 'Your task is due soon.', read: true },\r\n     { id: 3, message: 'A new update is available.', read: false },\r\n   ];\r\n   ngOnInit(): void {\r\n-    this.loadUserProfile();\r\n-   \r\n-      }\r\n+    this.loadUserProfile();   \r\n+  }\r\n   loadUserProfile():void{\r\n const userProfileString = localStorage.getItem(\"user_profile\");\r\n \r\n     if (userProfileString) {\r\n"
                },
                {
                    "date": 1747324744750,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,8 @@\n })\r\n export class HeaderComponent implements OnInit {\r\n   @Input() title: string = 'Tableau de bord';\r\n   username: string | null = null;\r\n-\r\n   showNotifications: boolean = false; // Controls the visibility of the notification dropdown\r\n   // Placeholder for notifications - in a real app, you'd fetch these\r\n   notifications: { id: number, message: string, read: boolean }[] = [\r\n     { id: 1, message: 'You have a new message.', read: false },\r\n"
                },
                {
                    "date": 1747324769548,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,10 +8,9 @@\n })\r\n export class HeaderComponent implements OnInit {\r\n   @Input() title: string = 'Tableau de bord';\r\n   username: string | null = null;\r\n-  showNotifications: boolean = false; // Controls the visibility of the notification dropdown\r\n-  // Placeholder for notifications - in a real app, you'd fetch these\r\n+  showNotifications: boolean = false;\r\n   notifications: { id: number, message: string, read: boolean }[] = [\r\n     { id: 1, message: 'You have a new message.', read: false },\r\n     { id: 2, message: 'Your task is due soon.', read: true },\r\n     { id: 3, message: 'A new update is available.', read: false },\r\n"
                },
                {
                    "date": 1747324814188,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,12 +5,13 @@\n   templateUrl: './header.component.html',\r\n   styleUrl: './header.component.scss',\r\n   standalone: false\r\n })\r\n-export class HeaderComponent implements OnInit {\r\n+export class HeaderComponent implements OnInit, OnDestroy {\r\n   @Input() title: string = 'Tableau de bord';\r\n   username: string | null = null;\r\n   showNotifications: boolean = false;\r\n+notifications: any[] = [];\r\n   notifications: { id: number, message: string, read: boolean }[] = [\r\n     { id: 1, message: 'You have a new message.', read: false },\r\n     { id: 2, message: 'Your task is due soon.', read: true },\r\n     { id: 3, message: 'A new update is available.', read: false },\r\n"
                },
                {
                    "date": 1747324821667,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,5 @@\n-import { Component, Input, OnInit } from '@angular/core';\r\n+import { Component, Input, OnDestroy, OnInit } from '@angular/core';\r\n \r\n @Component({\r\n   selector: 'app-header',\r\n   templateUrl: './header.component.html',\r\n@@ -10,13 +10,9 @@\n   @Input() title: string = 'Tableau de bord';\r\n   username: string | null = null;\r\n   showNotifications: boolean = false;\r\n notifications: any[] = [];\r\n-  notifications: { id: number, message: string, read: boolean }[] = [\r\n-    { id: 1, message: 'You have a new message.', read: false },\r\n-    { id: 2, message: 'Your task is due soon.', read: true },\r\n-    { id: 3, message: 'A new update is available.', read: false },\r\n-  ];\r\n+  \r\n   ngOnInit(): void {\r\n     this.loadUserProfile();   \r\n   }\r\n   loadUserProfile():void{\r\n"
                },
                {
                    "date": 1747324834268,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,9 +9,9 @@\n export class HeaderComponent implements OnInit, OnDestroy {\r\n   @Input() title: string = 'Tableau de bord';\r\n   username: string | null = null;\r\n   showNotifications: boolean = false;\r\n-notifications: any[] = [];\r\n+  notifications: any[] = [];\r\n   \r\n   ngOnInit(): void {\r\n     this.loadUserProfile();   \r\n   }\r\n"
                },
                {
                    "date": 1747324839816,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,6 @@\n import { Component, Input, OnDestroy, OnInit } from '@angular/core';\r\n+import { Subscription } from 'rxjs';\r\n \r\n @Component({\r\n   selector: 'app-header',\r\n   templateUrl: './header.component.html',\r\n@@ -10,9 +11,10 @@\n   @Input() title: string = 'Tableau de bord';\r\n   username: string | null = null;\r\n   showNotifications: boolean = false;\r\n   notifications: any[] = [];\r\n-  \r\n+  private userId = '50da8c53-f1bb-47cb-9d06-b31e55706ed8'; // À remplacer par l'ID réel\r\n+  private notificationSubscription: Subscription;\r\n   ngOnInit(): void {\r\n     this.loadUserProfile();   \r\n   }\r\n   loadUserProfile():void{\r\n"
                },
                {
                    "date": 1747324848990,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,8 +13,9 @@\n   showNotifications: boolean = false;\r\n   notifications: any[] = [];\r\n   private userId = '50da8c53-f1bb-47cb-9d06-b31e55706ed8'; // À remplacer par l'ID réel\r\n   private notificationSubscription: Subscription;\r\n+  constructor(private notificationService: NotificationService) {}\r\n   ngOnInit(): void {\r\n     this.loadUserProfile();   \r\n   }\r\n   loadUserProfile():void{\r\n"
                },
                {
                    "date": 1747324854636,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,7 @@\n import { Component, Input, OnDestroy, OnInit } from '@angular/core';\r\n import { Subscription } from 'rxjs';\r\n+import { NotificationService } from '../services/notification.service';\r\n \r\n @Component({\r\n   selector: 'app-header',\r\n   templateUrl: './header.component.html',\r\n"
                },
                {
                    "date": 1747324870350,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,8 +17,10 @@\n   private notificationSubscription: Subscription;\r\n   constructor(private notificationService: NotificationService) {}\r\n   ngOnInit(): void {\r\n     this.loadUserProfile();   \r\n+     this.loadPendingNotifications();\r\n+    this.setupRealTimeNotifications();\r\n   }\r\n   loadUserProfile():void{\r\n const userProfileString = localStorage.getItem(\"user_profile\");\r\n \r\n"
                },
                {
                    "date": 1747324882097,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,5 +38,11 @@\n   }\r\n   toggleNotifications(): void {\r\n     this.showNotifications = !this.showNotifications;\r\n   }\r\n+  ngOnDestroy(): void {\r\n+    this.notificationService.closeConnection();\r\n+    if (this.notificationSubscription) {\r\n+      this.notificationSubscription.unsubscribe();\r\n+    }\r\n+  }\r\n }\r\n"
                },
                {
                    "date": 1747324894666,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,5 +44,29 @@\n     if (this.notificationSubscription) {\r\n       this.notificationSubscription.unsubscribe();\r\n     }\r\n   }\r\n+  private loadPendingNotifications(): void {\r\n+    this.notificationService.getPendingNotifications(this.userId)\r\n+      .subscribe({\r\n+        next: (notifications) => {\r\n+          this.notifications = [...notifications, ...this.notifications];\r\n+        },\r\n+        error: (err) => console.error('Error loading pending notifications', err)\r\n+      });\r\n+  }\r\n+\r\n+  private setupRealTimeNotifications(): void {\r\n+    this.notificationSubscription = this.notificationService\r\n+      .connectToNotificationStream(this.userId)\r\n+      .subscribe({\r\n+        next: (notification) => {\r\n+          this.notifications = [notification, ...this.notifications];\r\n+        },\r\n+        error: (err) => console.error('SSE error', err)\r\n+      });\r\n+  }\r\n+\r\n+  formatDate(dateString: string): string {\r\n+    return new Date(dateString).toLocaleString();\r\n+  }\r\n }\r\n"
                },
                {
                    "date": 1747327062968,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,10 +13,9 @@\n   username: string | null = null;\r\n   showNotifications: boolean = false;\r\n   notifications: any[] = [];\r\n   private userId = '50da8c53-f1bb-47cb-9d06-b31e55706ed8'; // À remplacer par l'ID réel\r\n-  private notificationSubscription: Subscription;\r\n-  constructor(private notificationService: NotificationService) {}\r\n+  \r\n   ngOnInit(): void {\r\n     this.loadUserProfile();   \r\n      this.loadPendingNotifications();\r\n     this.setupRealTimeNotifications();\r\n"
                },
                {
                    "date": 1747327068654,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -38,12 +38,9 @@\n   toggleNotifications(): void {\r\n     this.showNotifications = !this.showNotifications;\r\n   }\r\n   ngOnDestroy(): void {\r\n-    this.notificationService.closeConnection();\r\n-    if (this.notificationSubscription) {\r\n-      this.notificationSubscription.unsubscribe();\r\n-    }\r\n+    \r\n   }\r\n   private loadPendingNotifications(): void {\r\n     this.notificationService.getPendingNotifications(this.userId)\r\n       .subscribe({\r\n"
                },
                {
                    "date": 1747327073880,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,15 +41,9 @@\n   ngOnDestroy(): void {\r\n     \r\n   }\r\n   private loadPendingNotifications(): void {\r\n-    this.notificationService.getPendingNotifications(this.userId)\r\n-      .subscribe({\r\n-        next: (notifications) => {\r\n-          this.notifications = [...notifications, ...this.notifications];\r\n-        },\r\n-        error: (err) => console.error('Error loading pending notifications', err)\r\n-      });\r\n+    \r\n   }\r\n \r\n   private setupRealTimeNotifications(): void {\r\n     this.notificationSubscription = this.notificationService\r\n"
                },
                {
                    "date": 1747327105482,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,9 +7,9 @@\n   templateUrl: './header.component.html',\r\n   styleUrl: './header.component.scss',\r\n   standalone: false\r\n })\r\n-export class HeaderComponent implements OnInit, OnDestroy {\r\n+export class HeaderComponent implements  OnDestroy {\r\n   @Input() title: string = 'Tableau de bord';\r\n   username: string | null = null;\r\n   showNotifications: boolean = false;\r\n   notifications: any[] = [];\r\n@@ -45,16 +45,9 @@\n     \r\n   }\r\n \r\n   private setupRealTimeNotifications(): void {\r\n-    this.notificationSubscription = this.notificationService\r\n-      .connectToNotificationStream(this.userId)\r\n-      .subscribe({\r\n-        next: (notification) => {\r\n-          this.notifications = [notification, ...this.notifications];\r\n-        },\r\n-        error: (err) => console.error('SSE error', err)\r\n-      });\r\n+    \r\n   }\r\n \r\n   formatDate(dateString: string): string {\r\n     return new Date(dateString).toLocaleString();\r\n"
                },
                {
                    "date": 1747327125144,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,9 +7,9 @@\n   templateUrl: './header.component.html',\r\n   styleUrl: './header.component.scss',\r\n   standalone: false\r\n })\r\n-export class HeaderComponent implements  OnDestroy {\r\n+export class HeaderComponent implements OnInit, OnDestroy {\r\n   @Input() title: string = 'Tableau de bord';\r\n   username: string | null = null;\r\n   showNotifications: boolean = false;\r\n   notifications: any[] = [];\r\n"
                },
                {
                    "date": 1749121153446,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,6 @@\n import { Component, Input, OnDestroy, OnInit } from '@angular/core';\r\n import { Subscription } from 'rxjs';\r\n-import { NotificationService } from '../services/notification.service';\r\n \r\n @Component({\r\n   selector: 'app-header',\r\n   templateUrl: './header.component.html',\r\n"
                },
                {
                    "date": 1749121384551,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,8 +14,9 @@\n   notifications: any[] = [];\r\n   private userId = '50da8c53-f1bb-47cb-9d06-b31e55706ed8'; // À remplacer par l'ID réel\r\n   \r\n   ngOnInit(): void {\r\n+    \r\n     this.loadUserProfile();   \r\n      this.loadPendingNotifications();\r\n     this.setupRealTimeNotifications();\r\n   }\r\n"
                },
                {
                    "date": 1749121393819,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,12 +11,12 @@\n   @Input() title: string = 'Tableau de bord';\r\n   username: string | null = null;\r\n   showNotifications: boolean = false;\r\n   notifications: any[] = [];\r\n-  private userId = '50da8c53-f1bb-47cb-9d06-b31e55706ed8'; // À remplacer par l'ID réel\r\n+  private userId :string; // À remplacer par l'ID réel\r\n   \r\n   ngOnInit(): void {\r\n-    \r\n+\r\n     this.loadUserProfile();   \r\n      this.loadPendingNotifications();\r\n     this.setupRealTimeNotifications();\r\n   }\r\n"
                },
                {
                    "date": 1749121403052,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,12 +11,12 @@\n   @Input() title: string = 'Tableau de bord';\r\n   username: string | null = null;\r\n   showNotifications: boolean = false;\r\n   notifications: any[] = [];\r\n-  private userId :string; // À remplacer par l'ID réel\r\n+  private userId !:string; // À remplacer par l'ID réel\r\n   \r\n   ngOnInit(): void {\r\n-\r\n+    this.userId\r\n     this.loadUserProfile();   \r\n      this.loadPendingNotifications();\r\n     this.setupRealTimeNotifications();\r\n   }\r\n"
                },
                {
                    "date": 1749121408664,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,9 +14,9 @@\n   notifications: any[] = [];\r\n   private userId !:string; // À remplacer par l'ID réel\r\n   \r\n   ngOnInit(): void {\r\n-    this.userId\r\n+    this.userId=\r\n     this.loadUserProfile();   \r\n      this.loadPendingNotifications();\r\n     this.setupRealTimeNotifications();\r\n   }\r\n"
                },
                {
                    "date": 1749121422244,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,9 +14,9 @@\n   notifications: any[] = [];\r\n   private userId !:string; // À remplacer par l'ID réel\r\n   \r\n   ngOnInit(): void {\r\n-    this.userId=\r\n+    this.userId=localStorage.getItem(\"\")\r\n     this.loadUserProfile();   \r\n      this.loadPendingNotifications();\r\n     this.setupRealTimeNotifications();\r\n   }\r\n"
                },
                {
                    "date": 1749121435335,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,12 +11,12 @@\n   @Input() title: string = 'Tableau de bord';\r\n   username: string | null = null;\r\n   showNotifications: boolean = false;\r\n   notifications: any[] = [];\r\n-  private userId !:string; // À remplacer par l'ID réel\r\n+  private userId !:string!null; // À remplacer par l'ID réel\r\n   \r\n   ngOnInit(): void {\r\n-    this.userId=localStorage.getItem(\"\")\r\n+    this.userId=localStorage.getItem(\"user_id\");\r\n     this.loadUserProfile();   \r\n      this.loadPendingNotifications();\r\n     this.setupRealTimeNotifications();\r\n   }\r\n"
                },
                {
                    "date": 1749121468853,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,10 +11,10 @@\n   @Input() title: string = 'Tableau de bord';\r\n   username: string | null = null;\r\n   showNotifications: boolean = false;\r\n   notifications: any[] = [];\r\n-  private userId !:string!null; // À remplacer par l'ID réel\r\n-  \r\n+  private userId !:string|null; // À remplacer par l'ID réel\r\n+  private subscriptions = new Subscription();\r\n   ngOnInit(): void {\r\n     this.userId=localStorage.getItem(\"user_id\");\r\n     this.loadUserProfile();   \r\n      this.loadPendingNotifications();\r\n"
                },
                {
                    "date": 1749121487425,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,8 +13,9 @@\n   showNotifications: boolean = false;\r\n   notifications: any[] = [];\r\n   private userId !:string|null; // À remplacer par l'ID réel\r\n   private subscriptions = new Subscription();\r\n+   constructor(private notificationService: NotificationService) {}\r\n   ngOnInit(): void {\r\n     this.userId=localStorage.getItem(\"user_id\");\r\n     this.loadUserProfile();   \r\n      this.loadPendingNotifications();\r\n"
                },
                {
                    "date": 1749121506820,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,7 @@\n import { Component, Input, OnDestroy, OnInit } from '@angular/core';\r\n import { Subscription } from 'rxjs';\r\n+import { NotificationService } from '../services/notificationService';\r\n \r\n @Component({\r\n   selector: 'app-header',\r\n   templateUrl: './header.component.html',\r\n@@ -37,9 +38,13 @@\n     }\r\n   }\r\n   toggleNotifications(): void {\r\n     this.showNotifications = !this.showNotifications;\r\n+    if (this.showNotifications && this.notifications.length > 0) {\r\n+      // Marquer les notifications comme lues si nécessaire\r\n+    }\r\n   }\r\n+\r\n   ngOnDestroy(): void {\r\n     \r\n   }\r\n   private loadPendingNotifications(): void {\r\n"
                },
                {
                    "date": 1749121525510,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -42,20 +42,37 @@\n     if (this.showNotifications && this.notifications.length > 0) {\r\n       // Marquer les notifications comme lues si nécessaire\r\n     }\r\n   }\r\n-\r\n-  ngOnDestroy(): void {\r\n-    \r\n+private loadPendingNotifications(): void {\r\n+    this.subscriptions.add(\r\n+      this.notificationService.getPendingNotifications(this.userId)\r\n+        .subscribe(notifications => {\r\n+          this.notifications = notifications;\r\n+        })\r\n+    );\r\n   }\r\n-  private loadPendingNotifications(): void {\r\n-    \r\n-  }\r\n \r\n   private setupRealTimeNotifications(): void {\r\n-    \r\n+    this.subscriptions.add(\r\n+      this.notificationService.connect(this.userId)\r\n+        .subscribe(notification => {\r\n+          this.notifications.unshift(notification); // Ajoute en tête de liste\r\n+          // Optionnel: Jouer un son ou afficher un toast\r\n+          this.playNotificationSound();\r\n+        })\r\n+    );\r\n   }\r\n \r\n+  private playNotificationSound(): void {\r\n+    const audio = new Audio('assets/sounds/notification.mp3');\r\n+    audio.play().catch(e => console.error('Audio play failed:', e));\r\n+  }\r\n+\r\n   formatDate(dateString: string): string {\r\n     return new Date(dateString).toLocaleString();\r\n   }\r\n+\r\n+  ngOnDestroy(): void {\r\n+    this.subscriptions.unsubscribe();\r\n+  }\r\n }\r\n"
                },
                {
                    "date": 1749121541723,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,9 +12,9 @@\n   @Input() title: string = 'Tableau de bord';\r\n   username: string | null = null;\r\n   showNotifications: boolean = false;\r\n   notifications: any[] = [];\r\n-  private userId !:string|null; // À remplacer par l'ID réel\r\n+  private userId !:string; // À remplacer par l'ID réel\r\n   private subscriptions = new Subscription();\r\n    constructor(private notificationService: NotificationService) {}\r\n   ngOnInit(): void {\r\n     this.userId=localStorage.getItem(\"user_id\");\r\n"
                },
                {
                    "date": 1749121548608,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,8 +16,9 @@\n   private userId !:string; // À remplacer par l'ID réel\r\n   private subscriptions = new Subscription();\r\n    constructor(private notificationService: NotificationService) {}\r\n   ngOnInit(): void {\r\n+    const \r\n     this.userId=localStorage.getItem(\"user_id\");\r\n     this.loadUserProfile();   \r\n      this.loadPendingNotifications();\r\n     this.setupRealTimeNotifications();\r\n"
                },
                {
                    "date": 1749121558657,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,9 +16,9 @@\n   private userId !:string; // À remplacer par l'ID réel\r\n   private subscriptions = new Subscription();\r\n    constructor(private notificationService: NotificationService) {}\r\n   ngOnInit(): void {\r\n-    const \r\n+    const id=localStorage.getItem(\"user_id\");\r\n     this.userId=localStorage.getItem(\"user_id\");\r\n     this.loadUserProfile();   \r\n      this.loadPendingNotifications();\r\n     this.setupRealTimeNotifications();\r\n"
                },
                {
                    "date": 1749121565901,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -17,9 +17,9 @@\n   private subscriptions = new Subscription();\r\n    constructor(private notificationService: NotificationService) {}\r\n   ngOnInit(): void {\r\n     const id=localStorage.getItem(\"user_id\");\r\n-    if \r\n+    if (id)\r\n     this.userId=localStorage.getItem(\"user_id\");\r\n     this.loadUserProfile();   \r\n      this.loadPendingNotifications();\r\n     this.setupRealTimeNotifications();\r\n"
                },
                {
                    "date": 1749121577275,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -20,9 +20,9 @@\n     const id=localStorage.getItem(\"user_id\");\r\n     if (id){\r\n       this.userId=id;\r\n     }\r\n-    this.userId=localStorage.getItem(\"user_id\");\r\n+\r\n     this.loadUserProfile();   \r\n      this.loadPendingNotifications();\r\n     this.setupRealTimeNotifications();\r\n   }\r\n"
                }
            ],
            "date": 1741687617491,
            "name": "Commit-0",
            "content": "import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-header',\r\n  templateUrl: './header.component.html',\r\n  styleUrl: './header.component.scss'\r\n})\r\nexport class HeaderComponent {\r\n  title: string = 'Tableau de bord'; // Titre par défaut\r\n\r\n  // Méthode pour changer dynamiquement le titre en fonction de l'interface\r\n  changeTitle(newTitle: string): void {\r\n    this.title = newTitle;\r\n  }\r\n}\r\n"
        }
    ]
}